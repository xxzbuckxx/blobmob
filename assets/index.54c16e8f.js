var d1=Object.defineProperty;var f1=(t,e,n)=>e in t?d1(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var E=(t,e,n)=>(f1(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Yi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Tc={},Mg={exports:{}},St={},Y={exports:{}},X={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uo=Symbol.for("react.element"),p1=Symbol.for("react.portal"),m1=Symbol.for("react.fragment"),g1=Symbol.for("react.strict_mode"),y1=Symbol.for("react.profiler"),v1=Symbol.for("react.provider"),w1=Symbol.for("react.context"),_1=Symbol.for("react.forward_ref"),T1=Symbol.for("react.suspense"),S1=Symbol.for("react.memo"),E1=Symbol.for("react.lazy"),np=Symbol.iterator;function k1(t){return t===null||typeof t!="object"?null:(t=np&&t[np]||t["@@iterator"],typeof t=="function"?t:null)}var Og={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lg=Object.assign,$g={};function ji(t,e,n){this.props=t,this.context=e,this.refs=$g,this.updater=n||Og}ji.prototype.isReactComponent={};ji.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ji.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Fg(){}Fg.prototype=ji.prototype;function qh(t,e,n){this.props=t,this.context=e,this.refs=$g,this.updater=n||Og}var Kh=qh.prototype=new Fg;Kh.constructor=qh;Lg(Kh,ji.prototype);Kh.isPureReactComponent=!0;var rp=Array.isArray,Ug=Object.prototype.hasOwnProperty,Wh={current:null},Vg={key:!0,ref:!0,__self:!0,__source:!0};function Bg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Ug.call(e,r)&&!Vg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:uo,type:t,key:s,ref:o,props:i,_owner:Wh.current}}function I1(t,e){return{$$typeof:uo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qh(t){return typeof t=="object"&&t!==null&&t.$$typeof===uo}function C1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ip=/\/+/g;function xu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?C1(""+t.key):e.toString(36)}function fa(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case uo:case p1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+xu(o,0):r,rp(i)?(n="",t!=null&&(n=t.replace(ip,"$&/")+"/"),fa(i,e,n,"",function(c){return c})):i!=null&&(Qh(i)&&(i=I1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ip,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",rp(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+xu(s,l);o+=fa(s,e,n,u,i)}else if(u=k1(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+xu(s,l++),o+=fa(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function jo(t,e,n){if(t==null)return t;var r=[],i=0;return fa(t,r,"","",function(s){return e.call(n,s,i++)}),r}function A1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var st={current:null},pa={transition:null},x1={ReactCurrentDispatcher:st,ReactCurrentBatchConfig:pa,ReactCurrentOwner:Wh};X.Children={map:jo,forEach:function(t,e,n){jo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return jo(t,function(){e++}),e},toArray:function(t){return jo(t,function(e){return e})||[]},only:function(t){if(!Qh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};X.Component=ji;X.Fragment=m1;X.Profiler=y1;X.PureComponent=qh;X.StrictMode=g1;X.Suspense=T1;X.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x1;X.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Lg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wh.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Ug.call(e,u)&&!Vg.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:uo,type:t.type,key:i,ref:s,props:r,_owner:o}};X.createContext=function(t){return t={$$typeof:w1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:v1,_context:t},t.Consumer=t};X.createElement=Bg;X.createFactory=function(t){var e=Bg.bind(null,t);return e.type=t,e};X.createRef=function(){return{current:null}};X.forwardRef=function(t){return{$$typeof:_1,render:t}};X.isValidElement=Qh;X.lazy=function(t){return{$$typeof:E1,_payload:{_status:-1,_result:t},_init:A1}};X.memo=function(t,e){return{$$typeof:S1,type:t,compare:e===void 0?null:e}};X.startTransition=function(t){var e=pa.transition;pa.transition={};try{t()}finally{pa.transition=e}};X.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};X.useCallback=function(t,e){return st.current.useCallback(t,e)};X.useContext=function(t){return st.current.useContext(t)};X.useDebugValue=function(){};X.useDeferredValue=function(t){return st.current.useDeferredValue(t)};X.useEffect=function(t,e){return st.current.useEffect(t,e)};X.useId=function(){return st.current.useId()};X.useImperativeHandle=function(t,e,n){return st.current.useImperativeHandle(t,e,n)};X.useInsertionEffect=function(t,e){return st.current.useInsertionEffect(t,e)};X.useLayoutEffect=function(t,e){return st.current.useLayoutEffect(t,e)};X.useMemo=function(t,e){return st.current.useMemo(t,e)};X.useReducer=function(t,e,n){return st.current.useReducer(t,e,n)};X.useRef=function(t){return st.current.useRef(t)};X.useState=function(t){return st.current.useState(t)};X.useSyncExternalStore=function(t,e,n){return st.current.useSyncExternalStore(t,e,n)};X.useTransition=function(){return st.current.useTransition()};X.version="18.2.0";(function(t){t.exports=X})(Y);var jg={exports:{}},zg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,G){var W=b.length;b.push(G);e:for(;0<W;){var we=W-1>>>1,Pe=b[we];if(0<i(Pe,G))b[we]=G,b[W]=Pe,W=we;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var G=b[0],W=b.pop();if(W!==G){b[0]=W;e:for(var we=0,Pe=b.length,Vo=Pe>>>1;we<Vo;){var dr=2*(we+1)-1,Au=b[dr],fr=dr+1,Bo=b[fr];if(0>i(Au,W))fr<Pe&&0>i(Bo,Au)?(b[we]=Bo,b[fr]=W,we=fr):(b[we]=Au,b[dr]=W,we=dr);else if(fr<Pe&&0>i(Bo,W))b[we]=Bo,b[fr]=W,we=fr;else break e}}return G}function i(b,G){var W=b.sortIndex-G.sortIndex;return W!==0?W:b.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],f=1,a=null,h=3,d=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(b){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=b)r(c),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(c)}}function T(b){if(y=!1,v(b),!m)if(n(u)!==null)m=!0,Iu(A);else{var G=n(c);G!==null&&Cu(T,G.startTime-b)}}function A(b,G){m=!1,y&&(y=!1,p(L),L=-1),d=!0;var W=h;try{for(v(G),a=n(u);a!==null&&(!(a.expirationTime>G)||b&&!at());){var we=a.callback;if(typeof we=="function"){a.callback=null,h=a.priorityLevel;var Pe=we(a.expirationTime<=G);G=t.unstable_now(),typeof Pe=="function"?a.callback=Pe:a===n(u)&&r(u),v(G)}else r(u);a=n(u)}if(a!==null)var Vo=!0;else{var dr=n(c);dr!==null&&Cu(T,dr.startTime-G),Vo=!1}return Vo}finally{a=null,h=W,d=!1}}var x=!1,N=null,L=-1,U=5,K=-1;function at(){return!(t.unstable_now()-K<U)}function hr(){if(N!==null){var b=t.unstable_now();K=b;var G=!0;try{G=N(!0,b)}finally{G?En():(x=!1,N=null)}}else x=!1}var En;if(typeof g=="function")En=function(){g(hr)};else if(typeof MessageChannel<"u"){var en=new MessageChannel,ku=en.port2;en.port1.onmessage=hr,En=function(){ku.postMessage(null)}}else En=function(){w(hr,0)};function Iu(b){N=b,x||(x=!0,En())}function Cu(b,G){L=w(function(){b(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){m||d||(m=!0,Iu(A))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(b){switch(h){case 1:case 2:case 3:var G=3;break;default:G=h}var W=h;h=G;try{return b()}finally{h=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,G){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var W=h;h=b;try{return G()}finally{h=W}},t.unstable_scheduleCallback=function(b,G,W){var we=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?we+W:we):W=we,b){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=W+Pe,b={id:f++,callback:G,priorityLevel:b,startTime:W,expirationTime:Pe,sortIndex:-1},W>we?(b.sortIndex=W,e(c,b),n(u)===null&&b===n(c)&&(y?(p(L),L=-1):y=!0,Cu(T,W-we))):(b.sortIndex=Pe,e(u,b),m||d||(m=!0,Iu(A))),b},t.unstable_shouldYield=at,t.unstable_wrapCallback=function(b){var G=h;return function(){var W=h;h=G;try{return b.apply(this,arguments)}finally{h=W}}}})(zg);(function(t){t.exports=zg})(jg);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg=Y.exports,_t=jg.exports;function k(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gg=new Set,Ps={};function Vr(t,e){Ei(t,e),Ei(t+"Capture",e)}function Ei(t,e){for(Ps[t]=e,t=0;t<e.length;t++)Gg.add(e[t])}var dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sc=Object.prototype.hasOwnProperty,N1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sp={},op={};function D1(t){return Sc.call(op,t)?!0:Sc.call(sp,t)?!1:N1.test(t)?op[t]=!0:(sp[t]=!0,!1)}function P1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function R1(t,e,n,r){if(e===null||typeof e>"u"||P1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ot(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ve={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ve[t]=new ot(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ve[e]=new ot(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ve[t]=new ot(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ve[t]=new ot(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ve[t]=new ot(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ve[t]=new ot(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ve[t]=new ot(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ve[t]=new ot(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ve[t]=new ot(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xh=/[\-:]([a-z])/g;function Yh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xh,Yh);Ve[e]=new ot(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xh,Yh);Ve[e]=new ot(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xh,Yh);Ve[e]=new ot(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ve[t]=new ot(t,1,!1,t.toLowerCase(),null,!1,!1)});Ve.xlinkHref=new ot("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ve[t]=new ot(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jh(t,e,n,r){var i=Ve.hasOwnProperty(e)?Ve[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(R1(e,n,i,r)&&(n=null),r||i===null?D1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Tn=Hg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zo=Symbol.for("react.element"),Wr=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),Zh=Symbol.for("react.strict_mode"),Ec=Symbol.for("react.profiler"),qg=Symbol.for("react.provider"),Kg=Symbol.for("react.context"),ed=Symbol.for("react.forward_ref"),kc=Symbol.for("react.suspense"),Ic=Symbol.for("react.suspense_list"),td=Symbol.for("react.memo"),Nn=Symbol.for("react.lazy"),Wg=Symbol.for("react.offscreen"),ap=Symbol.iterator;function Ji(t){return t===null||typeof t!="object"?null:(t=ap&&t[ap]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Object.assign,Nu;function as(t){if(Nu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nu=e&&e[1]||""}return`
`+Nu+t}var Du=!1;function Pu(t,e){if(!t||Du)return"";Du=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Du=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?as(t):""}function b1(t){switch(t.tag){case 5:return as(t.type);case 16:return as("Lazy");case 13:return as("Suspense");case 19:return as("SuspenseList");case 0:case 2:case 15:return t=Pu(t.type,!1),t;case 11:return t=Pu(t.type.render,!1),t;case 1:return t=Pu(t.type,!0),t;default:return""}}function Cc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qr:return"Fragment";case Wr:return"Portal";case Ec:return"Profiler";case Zh:return"StrictMode";case kc:return"Suspense";case Ic:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kg:return(t.displayName||"Context")+".Consumer";case qg:return(t._context.displayName||"Context")+".Provider";case ed:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case td:return e=t.displayName||null,e!==null?e:Cc(t.type)||"Memo";case Nn:e=t._payload,t=t._init;try{return Cc(t(e))}catch{}}return null}function M1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cc(e);case 8:return e===Zh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function O1(t){var e=Qg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ho(t){t._valueTracker||(t._valueTracker=O1(t))}function Xg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ba(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ac(t,e){var n=e.checked;return ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function lp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Yg(t,e){e=e.checked,e!=null&&Jh(t,"checked",e,!1)}function xc(t,e){Yg(t,e);var n=Xn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nc(t,e.type,Xn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function up(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nc(t,e,n){(e!=="number"||ba(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ls=Array.isArray;function ci(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Dc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(k(91));return ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(k(92));if(ls(n)){if(1<n.length)throw Error(k(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xn(n)}}function Jg(t,e){var n=Xn(e.value),r=Xn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Zg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Zg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Go,ey=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Go=Go||document.createElement("div"),Go.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Go.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Rs(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var gs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L1=["Webkit","ms","Moz","O"];Object.keys(gs).forEach(function(t){L1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gs[e]=gs[t]})});function ty(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||gs.hasOwnProperty(t)&&gs[t]?(""+e).trim():e+"px"}function ny(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ty(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var $1=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rc(t,e){if(e){if($1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(k(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(k(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(k(61))}if(e.style!=null&&typeof e.style!="object")throw Error(k(62))}}function bc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mc=null;function nd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oc=null,hi=null,di=null;function dp(t){if(t=fo(t)){if(typeof Oc!="function")throw Error(k(280));var e=t.stateNode;e&&(e=Dl(e),Oc(t.stateNode,t.type,e))}}function ry(t){hi?di?di.push(t):di=[t]:hi=t}function iy(){if(hi){var t=hi,e=di;if(di=hi=null,dp(t),e)for(t=0;t<e.length;t++)dp(e[t])}}function sy(t,e){return t(e)}function oy(){}var Ru=!1;function ay(t,e,n){if(Ru)return t(e,n);Ru=!0;try{return sy(t,e,n)}finally{Ru=!1,(hi!==null||di!==null)&&(oy(),iy())}}function bs(t,e){var n=t.stateNode;if(n===null)return null;var r=Dl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(k(231,e,typeof n));return n}var Lc=!1;if(dn)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){Lc=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{Lc=!1}function F1(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(f){this.onError(f)}}var ys=!1,Ma=null,Oa=!1,$c=null,U1={onError:function(t){ys=!0,Ma=t}};function V1(t,e,n,r,i,s,o,l,u){ys=!1,Ma=null,F1.apply(U1,arguments)}function B1(t,e,n,r,i,s,o,l,u){if(V1.apply(this,arguments),ys){if(ys){var c=Ma;ys=!1,Ma=null}else throw Error(k(198));Oa||(Oa=!0,$c=c)}}function Br(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ly(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fp(t){if(Br(t)!==t)throw Error(k(188))}function j1(t){var e=t.alternate;if(!e){if(e=Br(t),e===null)throw Error(k(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return fp(i),t;if(s===r)return fp(i),e;s=s.sibling}throw Error(k(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(k(189))}}if(n.alternate!==r)throw Error(k(190))}if(n.tag!==3)throw Error(k(188));return n.stateNode.current===n?t:e}function uy(t){return t=j1(t),t!==null?cy(t):null}function cy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=cy(t);if(e!==null)return e;t=t.sibling}return null}var hy=_t.unstable_scheduleCallback,pp=_t.unstable_cancelCallback,z1=_t.unstable_shouldYield,H1=_t.unstable_requestPaint,_e=_t.unstable_now,G1=_t.unstable_getCurrentPriorityLevel,rd=_t.unstable_ImmediatePriority,dy=_t.unstable_UserBlockingPriority,La=_t.unstable_NormalPriority,q1=_t.unstable_LowPriority,fy=_t.unstable_IdlePriority,Cl=null,Ht=null;function K1(t){if(Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(Cl,t,void 0,(t.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:X1,W1=Math.log,Q1=Math.LN2;function X1(t){return t>>>=0,t===0?32:31-(W1(t)/Q1|0)|0}var qo=64,Ko=4194304;function us(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $a(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=us(l):(s&=o,s!==0&&(r=us(s)))}else o=n&~i,o!==0?r=us(o):s!==0&&(r=us(s));if(r===0)return 0;if(e!==0&&e!==r&&(e&i)===0&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ot(e),i=1<<n,r|=t[n],e&=~i;return r}function Y1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function J1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ot(s),l=1<<o,u=i[o];u===-1?((l&n)===0||(l&r)!==0)&&(i[o]=Y1(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Fc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function py(){var t=qo;return qo<<=1,(qo&4194240)===0&&(qo=64),t}function bu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function co(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ot(e),t[e]=n}function Z1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ot(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function id(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ot(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var re=0;function my(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var gy,sd,yy,vy,wy,Uc=!1,Wo=[],$n=null,Fn=null,Un=null,Ms=new Map,Os=new Map,Pn=[],eT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mp(t,e){switch(t){case"focusin":case"focusout":$n=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Un=null;break;case"pointerover":case"pointerout":Ms.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Os.delete(e.pointerId)}}function es(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=fo(e),e!==null&&sd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function tT(t,e,n,r,i){switch(e){case"focusin":return $n=es($n,t,e,n,r,i),!0;case"dragenter":return Fn=es(Fn,t,e,n,r,i),!0;case"mouseover":return Un=es(Un,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ms.set(s,es(Ms.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Os.set(s,es(Os.get(s)||null,t,e,n,r,i)),!0}return!1}function _y(t){var e=yr(t.target);if(e!==null){var n=Br(e);if(n!==null){if(e=n.tag,e===13){if(e=ly(n),e!==null){t.blockedOn=e,wy(t.priority,function(){yy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ma(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Mc=r,n.target.dispatchEvent(r),Mc=null}else return e=fo(n),e!==null&&sd(e),t.blockedOn=n,!1;e.shift()}return!0}function gp(t,e,n){ma(t)&&n.delete(e)}function nT(){Uc=!1,$n!==null&&ma($n)&&($n=null),Fn!==null&&ma(Fn)&&(Fn=null),Un!==null&&ma(Un)&&(Un=null),Ms.forEach(gp),Os.forEach(gp)}function ts(t,e){t.blockedOn===e&&(t.blockedOn=null,Uc||(Uc=!0,_t.unstable_scheduleCallback(_t.unstable_NormalPriority,nT)))}function Ls(t){function e(i){return ts(i,t)}if(0<Wo.length){ts(Wo[0],t);for(var n=1;n<Wo.length;n++){var r=Wo[n];r.blockedOn===t&&(r.blockedOn=null)}}for($n!==null&&ts($n,t),Fn!==null&&ts(Fn,t),Un!==null&&ts(Un,t),Ms.forEach(e),Os.forEach(e),n=0;n<Pn.length;n++)r=Pn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pn.length&&(n=Pn[0],n.blockedOn===null);)_y(n),n.blockedOn===null&&Pn.shift()}var fi=Tn.ReactCurrentBatchConfig,Fa=!0;function rT(t,e,n,r){var i=re,s=fi.transition;fi.transition=null;try{re=1,od(t,e,n,r)}finally{re=i,fi.transition=s}}function iT(t,e,n,r){var i=re,s=fi.transition;fi.transition=null;try{re=4,od(t,e,n,r)}finally{re=i,fi.transition=s}}function od(t,e,n,r){if(Fa){var i=Vc(t,e,n,r);if(i===null)zu(t,e,r,Ua,n),mp(t,r);else if(tT(i,t,e,n,r))r.stopPropagation();else if(mp(t,r),e&4&&-1<eT.indexOf(t)){for(;i!==null;){var s=fo(i);if(s!==null&&gy(s),s=Vc(t,e,n,r),s===null&&zu(t,e,r,Ua,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else zu(t,e,r,null,n)}}var Ua=null;function Vc(t,e,n,r){if(Ua=null,t=nd(r),t=yr(t),t!==null)if(e=Br(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ly(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ua=t,null}function Ty(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(G1()){case rd:return 1;case dy:return 4;case La:case q1:return 16;case fy:return 536870912;default:return 16}default:return 16}}var On=null,ad=null,ga=null;function Sy(){if(ga)return ga;var t,e=ad,n=e.length,r,i="value"in On?On.value:On.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ga=i.slice(t,1<r?1-r:void 0)}function ya(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qo(){return!0}function yp(){return!1}function Et(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Qo:yp,this.isPropagationStopped=yp,this}return ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),e}var zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ld=Et(zi),ho=ge({},zi,{view:0,detail:0}),sT=Et(ho),Mu,Ou,ns,Al=ge({},ho,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ud,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ns&&(ns&&t.type==="mousemove"?(Mu=t.screenX-ns.screenX,Ou=t.screenY-ns.screenY):Ou=Mu=0,ns=t),Mu)},movementY:function(t){return"movementY"in t?t.movementY:Ou}}),vp=Et(Al),oT=ge({},Al,{dataTransfer:0}),aT=Et(oT),lT=ge({},ho,{relatedTarget:0}),Lu=Et(lT),uT=ge({},zi,{animationName:0,elapsedTime:0,pseudoElement:0}),cT=Et(uT),hT=ge({},zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),dT=Et(hT),fT=ge({},zi,{data:0}),wp=Et(fT),pT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=gT[t])?!!e[t]:!1}function ud(){return yT}var vT=ge({},ho,{key:function(t){if(t.key){var e=pT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ya(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ud,charCode:function(t){return t.type==="keypress"?ya(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ya(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wT=Et(vT),_T=ge({},Al,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_p=Et(_T),TT=ge({},ho,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ud}),ST=Et(TT),ET=ge({},zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),kT=Et(ET),IT=ge({},Al,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CT=Et(IT),AT=[9,13,27,32],cd=dn&&"CompositionEvent"in window,vs=null;dn&&"documentMode"in document&&(vs=document.documentMode);var xT=dn&&"TextEvent"in window&&!vs,Ey=dn&&(!cd||vs&&8<vs&&11>=vs),Tp=String.fromCharCode(32),Sp=!1;function ky(t,e){switch(t){case"keyup":return AT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xr=!1;function NT(t,e){switch(t){case"compositionend":return Iy(e);case"keypress":return e.which!==32?null:(Sp=!0,Tp);case"textInput":return t=e.data,t===Tp&&Sp?null:t;default:return null}}function DT(t,e){if(Xr)return t==="compositionend"||!cd&&ky(t,e)?(t=Sy(),ga=ad=On=null,Xr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ey&&e.locale!=="ko"?null:e.data;default:return null}}var PT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ep(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PT[t.type]:e==="textarea"}function Cy(t,e,n,r){ry(r),e=Va(e,"onChange"),0<e.length&&(n=new ld("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ws=null,$s=null;function RT(t){$y(t,0)}function xl(t){var e=Zr(t);if(Xg(e))return t}function bT(t,e){if(t==="change")return e}var Ay=!1;if(dn){var $u;if(dn){var Fu="oninput"in document;if(!Fu){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),Fu=typeof kp.oninput=="function"}$u=Fu}else $u=!1;Ay=$u&&(!document.documentMode||9<document.documentMode)}function Ip(){ws&&(ws.detachEvent("onpropertychange",xy),$s=ws=null)}function xy(t){if(t.propertyName==="value"&&xl($s)){var e=[];Cy(e,$s,t,nd(t)),ay(RT,e)}}function MT(t,e,n){t==="focusin"?(Ip(),ws=e,$s=n,ws.attachEvent("onpropertychange",xy)):t==="focusout"&&Ip()}function OT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return xl($s)}function LT(t,e){if(t==="click")return xl(e)}function $T(t,e){if(t==="input"||t==="change")return xl(e)}function FT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:FT;function Fs(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Sc.call(e,i)||!$t(t[i],e[i]))return!1}return!0}function Cp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ap(t,e){var n=Cp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cp(n)}}function Ny(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ny(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Dy(){for(var t=window,e=ba();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ba(t.document)}return e}function hd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UT(t){var e=Dy(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ny(n.ownerDocument.documentElement,n)){if(r!==null&&hd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ap(n,s);var o=Ap(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var VT=dn&&"documentMode"in document&&11>=document.documentMode,Yr=null,Bc=null,_s=null,jc=!1;function xp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jc||Yr==null||Yr!==ba(r)||(r=Yr,"selectionStart"in r&&hd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_s&&Fs(_s,r)||(_s=r,r=Va(Bc,"onSelect"),0<r.length&&(e=new ld("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Yr)))}function Xo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Jr={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},Uu={},Py={};dn&&(Py=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);function Nl(t){if(Uu[t])return Uu[t];if(!Jr[t])return t;var e=Jr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Py)return Uu[t]=e[n];return t}var Ry=Nl("animationend"),by=Nl("animationiteration"),My=Nl("animationstart"),Oy=Nl("transitionend"),Ly=new Map,Np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(t,e){Ly.set(t,e),Vr(e,[t])}for(var Vu=0;Vu<Np.length;Vu++){var Bu=Np[Vu],BT=Bu.toLowerCase(),jT=Bu[0].toUpperCase()+Bu.slice(1);ir(BT,"on"+jT)}ir(Ry,"onAnimationEnd");ir(by,"onAnimationIteration");ir(My,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(Oy,"onTransitionEnd");Ei("onMouseEnter",["mouseout","mouseover"]);Ei("onMouseLeave",["mouseout","mouseover"]);Ei("onPointerEnter",["pointerout","pointerover"]);Ei("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zT=new Set("cancel close invalid load scroll toggle".split(" ").concat(cs));function Dp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,B1(r,e,void 0,t),t.currentTarget=null}function $y(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Dp(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Dp(i,l,c),s=u}}}if(Oa)throw t=$c,Oa=!1,$c=null,t}function le(t,e){var n=e[Kc];n===void 0&&(n=e[Kc]=new Set);var r=t+"__bubble";n.has(r)||(Fy(e,t,2,!1),n.add(r))}function ju(t,e,n){var r=0;e&&(r|=4),Fy(n,t,r,e)}var Yo="_reactListening"+Math.random().toString(36).slice(2);function Us(t){if(!t[Yo]){t[Yo]=!0,Gg.forEach(function(n){n!=="selectionchange"&&(zT.has(n)||ju(n,!1,t),ju(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Yo]||(e[Yo]=!0,ju("selectionchange",!1,e))}}function Fy(t,e,n,r){switch(Ty(e)){case 1:var i=rT;break;case 4:i=iT;break;default:i=od}n=i.bind(null,e,n,t),i=void 0,!Lc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function zu(t,e,n,r,i){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=yr(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}ay(function(){var c=s,f=nd(n),a=[];e:{var h=Ly.get(t);if(h!==void 0){var d=ld,m=t;switch(t){case"keypress":if(ya(n)===0)break e;case"keydown":case"keyup":d=wT;break;case"focusin":m="focus",d=Lu;break;case"focusout":m="blur",d=Lu;break;case"beforeblur":case"afterblur":d=Lu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=vp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=aT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=ST;break;case Ry:case by:case My:d=cT;break;case Oy:d=kT;break;case"scroll":d=sT;break;case"wheel":d=CT;break;case"copy":case"cut":case"paste":d=dT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=_p}var y=(e&4)!==0,w=!y&&t==="scroll",p=y?h!==null?h+"Capture":null:h;y=[];for(var g=c,v;g!==null;){v=g;var T=v.stateNode;if(v.tag===5&&T!==null&&(v=T,p!==null&&(T=bs(g,p),T!=null&&y.push(Vs(g,T,v)))),w)break;g=g.return}0<y.length&&(h=new d(h,m,null,n,f),a.push({event:h,listeners:y}))}}if((e&7)===0){e:{if(h=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",h&&n!==Mc&&(m=n.relatedTarget||n.fromElement)&&(yr(m)||m[fn]))break e;if((d||h)&&(h=f.window===f?f:(h=f.ownerDocument)?h.defaultView||h.parentWindow:window,d?(m=n.relatedTarget||n.toElement,d=c,m=m?yr(m):null,m!==null&&(w=Br(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(d=null,m=c),d!==m)){if(y=vp,T="onMouseLeave",p="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=_p,T="onPointerLeave",p="onPointerEnter",g="pointer"),w=d==null?h:Zr(d),v=m==null?h:Zr(m),h=new y(T,g+"leave",d,n,f),h.target=w,h.relatedTarget=v,T=null,yr(f)===c&&(y=new y(p,g+"enter",m,n,f),y.target=v,y.relatedTarget=w,T=y),w=T,d&&m)t:{for(y=d,p=m,g=0,v=y;v;v=Gr(v))g++;for(v=0,T=p;T;T=Gr(T))v++;for(;0<g-v;)y=Gr(y),g--;for(;0<v-g;)p=Gr(p),v--;for(;g--;){if(y===p||p!==null&&y===p.alternate)break t;y=Gr(y),p=Gr(p)}y=null}else y=null;d!==null&&Pp(a,h,d,y,!1),m!==null&&w!==null&&Pp(a,w,m,y,!0)}}e:{if(h=c?Zr(c):window,d=h.nodeName&&h.nodeName.toLowerCase(),d==="select"||d==="input"&&h.type==="file")var A=bT;else if(Ep(h))if(Ay)A=$T;else{A=OT;var x=MT}else(d=h.nodeName)&&d.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(A=LT);if(A&&(A=A(t,c))){Cy(a,A,n,f);break e}x&&x(t,h,c),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&Nc(h,"number",h.value)}switch(x=c?Zr(c):window,t){case"focusin":(Ep(x)||x.contentEditable==="true")&&(Yr=x,Bc=c,_s=null);break;case"focusout":_s=Bc=Yr=null;break;case"mousedown":jc=!0;break;case"contextmenu":case"mouseup":case"dragend":jc=!1,xp(a,n,f);break;case"selectionchange":if(VT)break;case"keydown":case"keyup":xp(a,n,f)}var N;if(cd)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else Xr?ky(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(Ey&&n.locale!=="ko"&&(Xr||L!=="onCompositionStart"?L==="onCompositionEnd"&&Xr&&(N=Sy()):(On=f,ad="value"in On?On.value:On.textContent,Xr=!0)),x=Va(c,L),0<x.length&&(L=new wp(L,t,null,n,f),a.push({event:L,listeners:x}),N?L.data=N:(N=Iy(n),N!==null&&(L.data=N)))),(N=xT?NT(t,n):DT(t,n))&&(c=Va(c,"onBeforeInput"),0<c.length&&(f=new wp("onBeforeInput","beforeinput",null,n,f),a.push({event:f,listeners:c}),f.data=N))}$y(a,e)})}function Vs(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Va(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=bs(t,n),s!=null&&r.unshift(Vs(t,s,i)),s=bs(t,e),s!=null&&r.push(Vs(t,s,i))),t=t.return}return r}function Gr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pp(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=bs(n,s),u!=null&&o.unshift(Vs(n,u,l))):i||(u=bs(n,s),u!=null&&o.push(Vs(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var HT=/\r\n?/g,GT=/\u0000|\uFFFD/g;function Rp(t){return(typeof t=="string"?t:""+t).replace(HT,`
`).replace(GT,"")}function Jo(t,e,n){if(e=Rp(e),Rp(t)!==e&&n)throw Error(k(425))}function Ba(){}var zc=null,Hc=null;function Gc(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qc=typeof setTimeout=="function"?setTimeout:void 0,qT=typeof clearTimeout=="function"?clearTimeout:void 0,bp=typeof Promise=="function"?Promise:void 0,KT=typeof queueMicrotask=="function"?queueMicrotask:typeof bp<"u"?function(t){return bp.resolve(null).then(t).catch(WT)}:qc;function WT(t){setTimeout(function(){throw t})}function Hu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ls(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ls(e)}function Vn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Mp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hi=Math.random().toString(36).slice(2),jt="__reactFiber$"+Hi,Bs="__reactProps$"+Hi,fn="__reactContainer$"+Hi,Kc="__reactEvents$"+Hi,QT="__reactListeners$"+Hi,XT="__reactHandles$"+Hi;function yr(t){var e=t[jt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[fn]||n[jt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Mp(t);t!==null;){if(n=t[jt])return n;t=Mp(t)}return e}t=n,n=t.parentNode}return null}function fo(t){return t=t[jt]||t[fn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(k(33))}function Dl(t){return t[Bs]||null}var Wc=[],ei=-1;function sr(t){return{current:t}}function ce(t){0>ei||(t.current=Wc[ei],Wc[ei]=null,ei--)}function oe(t,e){ei++,Wc[ei]=t.current,t.current=e}var Yn={},Ze=sr(Yn),dt=sr(!1),Dr=Yn;function ki(t,e){var n=t.type.contextTypes;if(!n)return Yn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ft(t){return t=t.childContextTypes,t!=null}function ja(){ce(dt),ce(Ze)}function Op(t,e,n){if(Ze.current!==Yn)throw Error(k(168));oe(Ze,e),oe(dt,n)}function Uy(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(k(108,M1(t)||"Unknown",i));return ge({},n,r)}function za(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yn,Dr=Ze.current,oe(Ze,t),oe(dt,dt.current),!0}function Lp(t,e,n){var r=t.stateNode;if(!r)throw Error(k(169));n?(t=Uy(t,e,Dr),r.__reactInternalMemoizedMergedChildContext=t,ce(dt),ce(Ze),oe(Ze,t)):ce(dt),oe(dt,n)}var nn=null,Pl=!1,Gu=!1;function Vy(t){nn===null?nn=[t]:nn.push(t)}function YT(t){Pl=!0,Vy(t)}function or(){if(!Gu&&nn!==null){Gu=!0;var t=0,e=re;try{var n=nn;for(re=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}nn=null,Pl=!1}catch(i){throw nn!==null&&(nn=nn.slice(t+1)),hy(rd,or),i}finally{re=e,Gu=!1}}return null}var ti=[],ni=0,Ha=null,Ga=0,kt=[],It=0,Pr=null,on=1,an="";function pr(t,e){ti[ni++]=Ga,ti[ni++]=Ha,Ha=t,Ga=e}function By(t,e,n){kt[It++]=on,kt[It++]=an,kt[It++]=Pr,Pr=t;var r=on;t=an;var i=32-Ot(r)-1;r&=~(1<<i),n+=1;var s=32-Ot(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,on=1<<32-Ot(e)+i|n<<i|r,an=s+t}else on=1<<s|n<<i|r,an=t}function dd(t){t.return!==null&&(pr(t,1),By(t,1,0))}function fd(t){for(;t===Ha;)Ha=ti[--ni],ti[ni]=null,Ga=ti[--ni],ti[ni]=null;for(;t===Pr;)Pr=kt[--It],kt[It]=null,an=kt[--It],kt[It]=null,on=kt[--It],kt[It]=null}var wt=null,yt=null,de=!1,bt=null;function jy(t,e){var n=Ct(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $p(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wt=t,yt=Vn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wt=t,yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pr!==null?{id:on,overflow:an}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ct(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wt=t,yt=null,!0):!1;default:return!1}}function Qc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Xc(t){if(de){var e=yt;if(e){var n=e;if(!$p(t,e)){if(Qc(t))throw Error(k(418));e=Vn(n.nextSibling);var r=wt;e&&$p(t,e)?jy(r,n):(t.flags=t.flags&-4097|2,de=!1,wt=t)}}else{if(Qc(t))throw Error(k(418));t.flags=t.flags&-4097|2,de=!1,wt=t}}}function Fp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wt=t}function Zo(t){if(t!==wt)return!1;if(!de)return Fp(t),de=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gc(t.type,t.memoizedProps)),e&&(e=yt)){if(Qc(t))throw zy(),Error(k(418));for(;e;)jy(t,e),e=Vn(e.nextSibling)}if(Fp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(k(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yt=Vn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yt=null}}else yt=wt?Vn(t.stateNode.nextSibling):null;return!0}function zy(){for(var t=yt;t;)t=Vn(t.nextSibling)}function Ii(){yt=wt=null,de=!1}function pd(t){bt===null?bt=[t]:bt.push(t)}var JT=Tn.ReactCurrentBatchConfig;function Pt(t,e){if(t&&t.defaultProps){e=ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var qa=sr(null),Ka=null,ri=null,md=null;function gd(){md=ri=Ka=null}function yd(t){var e=qa.current;ce(qa),t._currentValue=e}function Yc(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function pi(t,e){Ka=t,md=ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(ht=!0),t.firstContext=null)}function xt(t){var e=t._currentValue;if(md!==t)if(t={context:t,memoizedValue:e,next:null},ri===null){if(Ka===null)throw Error(k(308));ri=t,Ka.dependencies={lanes:0,firstContext:t}}else ri=ri.next=t;return e}var vr=null;function vd(t){vr===null?vr=[t]:vr.push(t)}function Hy(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,vd(e)):(n.next=i.next,i.next=n),e.interleaved=n,pn(t,r)}function pn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Dn=!1;function wd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function hn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(ee&2)!==0){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,pn(t,n)}return i=r.interleaved,i===null?(e.next=e,vd(r)):(e.next=i.next,i.next=e),r.interleaved=e,pn(t,n)}function va(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,id(t,n)}}function Up(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Wa(t,e,n,r){var i=t.updateQueue;Dn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=c:l.next=c,f.lastBaseUpdate=u))}if(s!==null){var a=i.baseState;o=0,f=c=u=null,l=s;do{var h=l.lane,d=l.eventTime;if((r&h)===h){f!==null&&(f=f.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,y=l;switch(h=e,d=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){a=m.call(d,a,h);break e}a=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,h=typeof m=="function"?m.call(d,a,h):m,h==null)break e;a=ge({},a,h);break e;case 2:Dn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[l]:h.push(l))}else d={eventTime:d,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(c=f=d,u=a):f=f.next=d,o|=h;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;h=l,l=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(1);if(f===null&&(u=a),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=f,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);br|=o,t.lanes=o,t.memoizedState=a}}function Vp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(k(191,i));i.call(r)}}}var qy=new Hg.Component().refs;function Jc(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Rl={isMounted:function(t){return(t=t._reactInternals)?Br(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=it(),i=zn(t),s=hn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Bn(t,s,i),e!==null&&(Lt(e,t,i,r),va(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=it(),i=zn(t),s=hn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Bn(t,s,i),e!==null&&(Lt(e,t,i,r),va(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=it(),r=zn(t),i=hn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bn(t,i,r),e!==null&&(Lt(e,t,r,n),va(e,t,r))}};function Bp(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Fs(n,r)||!Fs(i,s):!0}function Ky(t,e,n){var r=!1,i=Yn,s=e.contextType;return typeof s=="object"&&s!==null?s=xt(s):(i=ft(e)?Dr:Ze.current,r=e.contextTypes,s=(r=r!=null)?ki(t,i):Yn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function jp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Rl.enqueueReplaceState(e,e.state,null)}function Zc(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=qy,wd(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=xt(s):(s=ft(e)?Dr:Ze.current,i.context=ki(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jc(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Rl.enqueueReplaceState(i,i.state,null),Wa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function rs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(k(309));var r=n.stateNode}if(!r)throw Error(k(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;l===qy&&(l=i.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(k(284));if(!n._owner)throw Error(k(290,t))}return t}function ea(t,e){throw t=Object.prototype.toString.call(e),Error(k(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zp(t){var e=t._init;return e(t._payload)}function Wy(t){function e(p,g){if(t){var v=p.deletions;v===null?(p.deletions=[g],p.flags|=16):v.push(g)}}function n(p,g){if(!t)return null;for(;g!==null;)e(p,g),g=g.sibling;return null}function r(p,g){for(p=new Map;g!==null;)g.key!==null?p.set(g.key,g):p.set(g.index,g),g=g.sibling;return p}function i(p,g){return p=Hn(p,g),p.index=0,p.sibling=null,p}function s(p,g,v){return p.index=v,t?(v=p.alternate,v!==null?(v=v.index,v<g?(p.flags|=2,g):v):(p.flags|=2,g)):(p.flags|=1048576,g)}function o(p){return t&&p.alternate===null&&(p.flags|=2),p}function l(p,g,v,T){return g===null||g.tag!==6?(g=Ju(v,p.mode,T),g.return=p,g):(g=i(g,v),g.return=p,g)}function u(p,g,v,T){var A=v.type;return A===Qr?f(p,g,v.props.children,T,v.key):g!==null&&(g.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Nn&&zp(A)===g.type)?(T=i(g,v.props),T.ref=rs(p,g,v),T.return=p,T):(T=ka(v.type,v.key,v.props,null,p.mode,T),T.ref=rs(p,g,v),T.return=p,T)}function c(p,g,v,T){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Zu(v,p.mode,T),g.return=p,g):(g=i(g,v.children||[]),g.return=p,g)}function f(p,g,v,T,A){return g===null||g.tag!==7?(g=Ir(v,p.mode,T,A),g.return=p,g):(g=i(g,v),g.return=p,g)}function a(p,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Ju(""+g,p.mode,v),g.return=p,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case zo:return v=ka(g.type,g.key,g.props,null,p.mode,v),v.ref=rs(p,null,g),v.return=p,v;case Wr:return g=Zu(g,p.mode,v),g.return=p,g;case Nn:var T=g._init;return a(p,T(g._payload),v)}if(ls(g)||Ji(g))return g=Ir(g,p.mode,v,null),g.return=p,g;ea(p,g)}return null}function h(p,g,v,T){var A=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return A!==null?null:l(p,g,""+v,T);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case zo:return v.key===A?u(p,g,v,T):null;case Wr:return v.key===A?c(p,g,v,T):null;case Nn:return A=v._init,h(p,g,A(v._payload),T)}if(ls(v)||Ji(v))return A!==null?null:f(p,g,v,T,null);ea(p,v)}return null}function d(p,g,v,T,A){if(typeof T=="string"&&T!==""||typeof T=="number")return p=p.get(v)||null,l(g,p,""+T,A);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case zo:return p=p.get(T.key===null?v:T.key)||null,u(g,p,T,A);case Wr:return p=p.get(T.key===null?v:T.key)||null,c(g,p,T,A);case Nn:var x=T._init;return d(p,g,v,x(T._payload),A)}if(ls(T)||Ji(T))return p=p.get(v)||null,f(g,p,T,A,null);ea(g,T)}return null}function m(p,g,v,T){for(var A=null,x=null,N=g,L=g=0,U=null;N!==null&&L<v.length;L++){N.index>L?(U=N,N=null):U=N.sibling;var K=h(p,N,v[L],T);if(K===null){N===null&&(N=U);break}t&&N&&K.alternate===null&&e(p,N),g=s(K,g,L),x===null?A=K:x.sibling=K,x=K,N=U}if(L===v.length)return n(p,N),de&&pr(p,L),A;if(N===null){for(;L<v.length;L++)N=a(p,v[L],T),N!==null&&(g=s(N,g,L),x===null?A=N:x.sibling=N,x=N);return de&&pr(p,L),A}for(N=r(p,N);L<v.length;L++)U=d(N,p,L,v[L],T),U!==null&&(t&&U.alternate!==null&&N.delete(U.key===null?L:U.key),g=s(U,g,L),x===null?A=U:x.sibling=U,x=U);return t&&N.forEach(function(at){return e(p,at)}),de&&pr(p,L),A}function y(p,g,v,T){var A=Ji(v);if(typeof A!="function")throw Error(k(150));if(v=A.call(v),v==null)throw Error(k(151));for(var x=A=null,N=g,L=g=0,U=null,K=v.next();N!==null&&!K.done;L++,K=v.next()){N.index>L?(U=N,N=null):U=N.sibling;var at=h(p,N,K.value,T);if(at===null){N===null&&(N=U);break}t&&N&&at.alternate===null&&e(p,N),g=s(at,g,L),x===null?A=at:x.sibling=at,x=at,N=U}if(K.done)return n(p,N),de&&pr(p,L),A;if(N===null){for(;!K.done;L++,K=v.next())K=a(p,K.value,T),K!==null&&(g=s(K,g,L),x===null?A=K:x.sibling=K,x=K);return de&&pr(p,L),A}for(N=r(p,N);!K.done;L++,K=v.next())K=d(N,p,L,K.value,T),K!==null&&(t&&K.alternate!==null&&N.delete(K.key===null?L:K.key),g=s(K,g,L),x===null?A=K:x.sibling=K,x=K);return t&&N.forEach(function(hr){return e(p,hr)}),de&&pr(p,L),A}function w(p,g,v,T){if(typeof v=="object"&&v!==null&&v.type===Qr&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case zo:e:{for(var A=v.key,x=g;x!==null;){if(x.key===A){if(A=v.type,A===Qr){if(x.tag===7){n(p,x.sibling),g=i(x,v.props.children),g.return=p,p=g;break e}}else if(x.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===Nn&&zp(A)===x.type){n(p,x.sibling),g=i(x,v.props),g.ref=rs(p,x,v),g.return=p,p=g;break e}n(p,x);break}else e(p,x);x=x.sibling}v.type===Qr?(g=Ir(v.props.children,p.mode,T,v.key),g.return=p,p=g):(T=ka(v.type,v.key,v.props,null,p.mode,T),T.ref=rs(p,g,v),T.return=p,p=T)}return o(p);case Wr:e:{for(x=v.key;g!==null;){if(g.key===x)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(p,g.sibling),g=i(g,v.children||[]),g.return=p,p=g;break e}else{n(p,g);break}else e(p,g);g=g.sibling}g=Zu(v,p.mode,T),g.return=p,p=g}return o(p);case Nn:return x=v._init,w(p,g,x(v._payload),T)}if(ls(v))return m(p,g,v,T);if(Ji(v))return y(p,g,v,T);ea(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(n(p,g.sibling),g=i(g,v),g.return=p,p=g):(n(p,g),g=Ju(v,p.mode,T),g.return=p,p=g),o(p)):n(p,g)}return w}var Ci=Wy(!0),Qy=Wy(!1),po={},Gt=sr(po),js=sr(po),zs=sr(po);function wr(t){if(t===po)throw Error(k(174));return t}function _d(t,e){switch(oe(zs,e),oe(js,t),oe(Gt,po),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pc(e,t)}ce(Gt),oe(Gt,e)}function Ai(){ce(Gt),ce(js),ce(zs)}function Xy(t){wr(zs.current);var e=wr(Gt.current),n=Pc(e,t.type);e!==n&&(oe(js,t),oe(Gt,n))}function Td(t){js.current===t&&(ce(Gt),ce(js))}var pe=sr(0);function Qa(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qu=[];function Sd(){for(var t=0;t<qu.length;t++)qu[t]._workInProgressVersionPrimary=null;qu.length=0}var wa=Tn.ReactCurrentDispatcher,Ku=Tn.ReactCurrentBatchConfig,Rr=0,me=null,Ie=null,be=null,Xa=!1,Ts=!1,Hs=0,ZT=0;function je(){throw Error(k(321))}function Ed(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$t(t[n],e[n]))return!1;return!0}function kd(t,e,n,r,i,s){if(Rr=s,me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,wa.current=t===null||t.memoizedState===null?rS:iS,t=n(r,i),Ts){s=0;do{if(Ts=!1,Hs=0,25<=s)throw Error(k(301));s+=1,be=Ie=null,e.updateQueue=null,wa.current=sS,t=n(r,i)}while(Ts)}if(wa.current=Ya,e=Ie!==null&&Ie.next!==null,Rr=0,be=Ie=me=null,Xa=!1,e)throw Error(k(300));return t}function Id(){var t=Hs!==0;return Hs=0,t}function Vt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?me.memoizedState=be=t:be=be.next=t,be}function Nt(){if(Ie===null){var t=me.alternate;t=t!==null?t.memoizedState:null}else t=Ie.next;var e=be===null?me.memoizedState:be.next;if(e!==null)be=e,Ie=t;else{if(t===null)throw Error(k(310));Ie=t,t={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},be===null?me.memoizedState=be=t:be=be.next=t}return be}function Gs(t,e){return typeof e=="function"?e(t):e}function Wu(t){var e=Nt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=Ie,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var f=c.lane;if((Rr&f)===f)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var a={lane:f,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=a,o=r):u=u.next=a,me.lanes|=f,br|=f}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,$t(r,e.memoizedState)||(ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,me.lanes|=s,br|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qu(t){var e=Nt(),n=e.queue;if(n===null)throw Error(k(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);$t(s,e.memoizedState)||(ht=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Yy(){}function Jy(t,e){var n=me,r=Nt(),i=e(),s=!$t(r.memoizedState,i);if(s&&(r.memoizedState=i,ht=!0),r=r.queue,Cd(tv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||be!==null&&be.memoizedState.tag&1){if(n.flags|=2048,qs(9,ev.bind(null,n,r,i,e),void 0,null),Me===null)throw Error(k(349));(Rr&30)!==0||Zy(n,e,i)}return i}function Zy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ev(t,e,n,r){e.value=n,e.getSnapshot=r,nv(e)&&rv(t)}function tv(t,e,n){return n(function(){nv(e)&&rv(t)})}function nv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$t(t,n)}catch{return!0}}function rv(t){var e=pn(t,1);e!==null&&Lt(e,t,1,-1)}function Hp(t){var e=Vt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gs,lastRenderedState:t},e.queue=t,t=t.dispatch=nS.bind(null,me,t),[e.memoizedState,t]}function qs(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=me.updateQueue,e===null?(e={lastEffect:null,stores:null},me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iv(){return Nt().memoizedState}function _a(t,e,n,r){var i=Vt();me.flags|=t,i.memoizedState=qs(1|e,n,void 0,r===void 0?null:r)}function bl(t,e,n,r){var i=Nt();r=r===void 0?null:r;var s=void 0;if(Ie!==null){var o=Ie.memoizedState;if(s=o.destroy,r!==null&&Ed(r,o.deps)){i.memoizedState=qs(e,n,s,r);return}}me.flags|=t,i.memoizedState=qs(1|e,n,s,r)}function Gp(t,e){return _a(8390656,8,t,e)}function Cd(t,e){return bl(2048,8,t,e)}function sv(t,e){return bl(4,2,t,e)}function ov(t,e){return bl(4,4,t,e)}function av(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lv(t,e,n){return n=n!=null?n.concat([t]):null,bl(4,4,av.bind(null,e,t),n)}function Ad(){}function uv(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ed(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cv(t,e){var n=Nt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ed(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hv(t,e,n){return(Rr&21)===0?(t.baseState&&(t.baseState=!1,ht=!0),t.memoizedState=n):($t(n,e)||(n=py(),me.lanes|=n,br|=n,t.baseState=!0),e)}function eS(t,e){var n=re;re=n!==0&&4>n?n:4,t(!0);var r=Ku.transition;Ku.transition={};try{t(!1),e()}finally{re=n,Ku.transition=r}}function dv(){return Nt().memoizedState}function tS(t,e,n){var r=zn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fv(t))pv(e,n);else if(n=Hy(t,e,n,r),n!==null){var i=it();Lt(n,t,r,i),mv(n,e,r)}}function nS(t,e,n){var r=zn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fv(t))pv(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,$t(l,o)){var u=e.interleaved;u===null?(i.next=i,vd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Hy(t,e,i,r),n!==null&&(i=it(),Lt(n,t,r,i),mv(n,e,r))}}function fv(t){var e=t.alternate;return t===me||e!==null&&e===me}function pv(t,e){Ts=Xa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mv(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,id(t,n)}}var Ya={readContext:xt,useCallback:je,useContext:je,useEffect:je,useImperativeHandle:je,useInsertionEffect:je,useLayoutEffect:je,useMemo:je,useReducer:je,useRef:je,useState:je,useDebugValue:je,useDeferredValue:je,useTransition:je,useMutableSource:je,useSyncExternalStore:je,useId:je,unstable_isNewReconciler:!1},rS={readContext:xt,useCallback:function(t,e){return Vt().memoizedState=[t,e===void 0?null:e],t},useContext:xt,useEffect:Gp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,_a(4194308,4,av.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _a(4194308,4,t,e)},useInsertionEffect:function(t,e){return _a(4,2,t,e)},useMemo:function(t,e){var n=Vt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Vt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=tS.bind(null,me,t),[r.memoizedState,t]},useRef:function(t){var e=Vt();return t={current:t},e.memoizedState=t},useState:Hp,useDebugValue:Ad,useDeferredValue:function(t){return Vt().memoizedState=t},useTransition:function(){var t=Hp(!1),e=t[0];return t=eS.bind(null,t[1]),Vt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=me,i=Vt();if(de){if(n===void 0)throw Error(k(407));n=n()}else{if(n=e(),Me===null)throw Error(k(349));(Rr&30)!==0||Zy(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Gp(tv.bind(null,r,s,t),[t]),r.flags|=2048,qs(9,ev.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Vt(),e=Me.identifierPrefix;if(de){var n=an,r=on;n=(r&~(1<<32-Ot(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Hs++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ZT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},iS={readContext:xt,useCallback:uv,useContext:xt,useEffect:Cd,useImperativeHandle:lv,useInsertionEffect:sv,useLayoutEffect:ov,useMemo:cv,useReducer:Wu,useRef:iv,useState:function(){return Wu(Gs)},useDebugValue:Ad,useDeferredValue:function(t){var e=Nt();return hv(e,Ie.memoizedState,t)},useTransition:function(){var t=Wu(Gs)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:Yy,useSyncExternalStore:Jy,useId:dv,unstable_isNewReconciler:!1},sS={readContext:xt,useCallback:uv,useContext:xt,useEffect:Cd,useImperativeHandle:lv,useInsertionEffect:sv,useLayoutEffect:ov,useMemo:cv,useReducer:Qu,useRef:iv,useState:function(){return Qu(Gs)},useDebugValue:Ad,useDeferredValue:function(t){var e=Nt();return Ie===null?e.memoizedState=t:hv(e,Ie.memoizedState,t)},useTransition:function(){var t=Qu(Gs)[0],e=Nt().memoizedState;return[t,e]},useMutableSource:Yy,useSyncExternalStore:Jy,useId:dv,unstable_isNewReconciler:!1};function xi(t,e){try{var n="",r=e;do n+=b1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Xu(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function eh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var oS=typeof WeakMap=="function"?WeakMap:Map;function gv(t,e,n){n=hn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Za||(Za=!0,ch=r),eh(t,e)},n}function yv(t,e,n){n=hn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){eh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){eh(t,e),typeof r!="function"&&(jn===null?jn=new Set([this]):jn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function qp(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new oS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=_S.bind(null,t,e,n),e.then(t,t))}function Kp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wp(t,e,n,r,i){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=hn(-1,1),e.tag=2,Bn(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var aS=Tn.ReactCurrentOwner,ht=!1;function nt(t,e,n,r){e.child=t===null?Qy(e,null,n,r):Ci(e,t.child,n,r)}function Qp(t,e,n,r,i){n=n.render;var s=e.ref;return pi(e,i),r=kd(t,e,n,r,s,i),n=Id(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mn(t,e,i)):(de&&n&&dd(e),e.flags|=1,nt(t,e,r,i),e.child)}function Xp(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Od(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,vv(t,e,s,r,i)):(t=ka(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,(t.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Fs,n(o,r)&&t.ref===e.ref)return mn(t,e,i)}return e.flags|=1,t=Hn(s,r),t.ref=e.ref,t.return=e,e.child=t}function vv(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Fs(s,r)&&t.ref===e.ref)if(ht=!1,e.pendingProps=r=s,(t.lanes&i)!==0)(t.flags&131072)!==0&&(ht=!0);else return e.lanes=t.lanes,mn(t,e,i)}return th(t,e,n,r,i)}function wv(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(si,gt),gt|=n;else{if((n&1073741824)===0)return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,oe(si,gt),gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,oe(si,gt),gt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,oe(si,gt),gt|=r;return nt(t,e,i,n),e.child}function _v(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function th(t,e,n,r,i){var s=ft(n)?Dr:Ze.current;return s=ki(e,s),pi(e,i),n=kd(t,e,n,r,s,i),r=Id(),t!==null&&!ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,mn(t,e,i)):(de&&r&&dd(e),e.flags|=1,nt(t,e,n,i),e.child)}function Yp(t,e,n,r,i){if(ft(n)){var s=!0;za(e)}else s=!1;if(pi(e,i),e.stateNode===null)Ta(t,e),Ky(e,n,r),Zc(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=xt(c):(c=ft(n)?Dr:Ze.current,c=ki(e,c));var f=n.getDerivedStateFromProps,a=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";a||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&jp(e,o,r,c),Dn=!1;var h=e.memoizedState;o.state=h,Wa(e,r,o,i),u=e.memoizedState,l!==r||h!==u||dt.current||Dn?(typeof f=="function"&&(Jc(e,n,f,r),u=e.memoizedState),(l=Dn||Bp(e,n,l,r,h,u,c))?(a||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Gy(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Pt(e.type,l),o.props=c,a=e.pendingProps,h=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=xt(u):(u=ft(n)?Dr:Ze.current,u=ki(e,u));var d=n.getDerivedStateFromProps;(f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==a||h!==u)&&jp(e,o,r,u),Dn=!1,h=e.memoizedState,o.state=h,Wa(e,r,o,i);var m=e.memoizedState;l!==a||h!==m||dt.current||Dn?(typeof d=="function"&&(Jc(e,n,d,r),m=e.memoizedState),(c=Dn||Bp(e,n,c,r,h,m,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return nh(t,e,n,r,s,i)}function nh(t,e,n,r,i,s){_v(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Lp(e,n,!1),mn(t,e,s);r=e.stateNode,aS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ci(e,t.child,null,s),e.child=Ci(e,null,l,s)):nt(t,e,l,s),e.memoizedState=r.state,i&&Lp(e,n,!0),e.child}function Tv(t){var e=t.stateNode;e.pendingContext?Op(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Op(t,e.context,!1),_d(t,e.containerInfo)}function Jp(t,e,n,r,i){return Ii(),pd(i),e.flags|=256,nt(t,e,n,r),e.child}var rh={dehydrated:null,treeContext:null,retryLane:0};function ih(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sv(t,e,n){var r=e.pendingProps,i=pe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),oe(pe,i&1),t===null)return Xc(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ll(o,r,0,null),t=Ir(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ih(n),e.memoizedState=rh,t):xd(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return lS(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Hn(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Hn(l,s):(s=Ir(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ih(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=rh,r}return s=t.child,t=s.sibling,r=Hn(s,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xd(t,e){return e=Ll({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ta(t,e,n,r){return r!==null&&pd(r),Ci(e,t.child,null,n),t=xd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function lS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Xu(Error(k(422))),ta(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ll({mode:"visible",children:r.children},i,0,null),s=Ir(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,(e.mode&1)!==0&&Ci(e,t.child,null,o),e.child.memoizedState=ih(o),e.memoizedState=rh,s);if((e.mode&1)===0)return ta(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(k(419)),r=Xu(s,r,void 0),ta(t,e,o,r)}if(l=(o&t.childLanes)!==0,ht||l){if(r=Me,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,pn(t,i),Lt(r,t,i,-1))}return Md(),r=Xu(Error(k(421))),ta(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TS.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,yt=Vn(i.nextSibling),wt=e,de=!0,bt=null,t!==null&&(kt[It++]=on,kt[It++]=an,kt[It++]=Pr,on=t.id,an=t.overflow,Pr=e),e=xd(e,r.children),e.flags|=4096,e)}function Zp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yc(t.return,e,n)}function Yu(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ev(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(nt(t,e,r.children,n),r=pe.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zp(t,n,e);else if(t.tag===19)Zp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(oe(pe,r),(e.mode&1)===0)e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Qa(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Yu(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Qa(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Yu(e,!0,n,null,s);break;case"together":Yu(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ta(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),br|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(k(153));if(e.child!==null){for(t=e.child,n=Hn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function uS(t,e,n){switch(e.tag){case 3:Tv(e),Ii();break;case 5:Xy(e);break;case 1:ft(e.type)&&za(e);break;case 4:_d(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;oe(qa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(oe(pe,pe.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?Sv(t,e,n):(oe(pe,pe.current&1),t=mn(t,e,n),t!==null?t.sibling:null);oe(pe,pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return Ev(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),oe(pe,pe.current),r)break;return null;case 22:case 23:return e.lanes=0,wv(t,e,n)}return mn(t,e,n)}var kv,sh,Iv,Cv;kv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sh=function(){};Iv=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,wr(Gt.current);var s=null;switch(n){case"input":i=Ac(t,i),r=Ac(t,r),s=[];break;case"select":i=ge({},i,{value:void 0}),r=ge({},r,{value:void 0}),s=[];break;case"textarea":i=Dc(t,i),r=Dc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ba)}Rc(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ps.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ps.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&le("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Cv=function(t,e,n,r){n!==r&&(e.flags|=4)};function is(t,e){if(!de)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function cS(t,e,n){var r=e.pendingProps;switch(fd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return ft(e.type)&&ja(),ze(e),null;case 3:return r=e.stateNode,Ai(),ce(dt),ce(Ze),Sd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,bt!==null&&(fh(bt),bt=null))),sh(t,e),ze(e),null;case 5:Td(e);var i=wr(zs.current);if(n=e.type,t!==null&&e.stateNode!=null)Iv(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(k(166));return ze(e),null}if(t=wr(Gt.current),Zo(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[jt]=e,r[Bs]=s,t=(e.mode&1)!==0,n){case"dialog":le("cancel",r),le("close",r);break;case"iframe":case"object":case"embed":le("load",r);break;case"video":case"audio":for(i=0;i<cs.length;i++)le(cs[i],r);break;case"source":le("error",r);break;case"img":case"image":case"link":le("error",r),le("load",r);break;case"details":le("toggle",r);break;case"input":lp(r,s),le("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},le("invalid",r);break;case"textarea":cp(r,s),le("invalid",r)}Rc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Jo(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Jo(r.textContent,l,t),i=["children",""+l]):Ps.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&le("scroll",r)}switch(n){case"input":Ho(r),up(r,s,!0);break;case"textarea":Ho(r),hp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ba)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Zg(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[jt]=e,t[Bs]=r,kv(t,e,!1,!1),e.stateNode=t;e:{switch(o=bc(n,r),n){case"dialog":le("cancel",t),le("close",t),i=r;break;case"iframe":case"object":case"embed":le("load",t),i=r;break;case"video":case"audio":for(i=0;i<cs.length;i++)le(cs[i],t);i=r;break;case"source":le("error",t),i=r;break;case"img":case"image":case"link":le("error",t),le("load",t),i=r;break;case"details":le("toggle",t),i=r;break;case"input":lp(t,r),i=Ac(t,r),le("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ge({},r,{value:void 0}),le("invalid",t);break;case"textarea":cp(t,r),i=Dc(t,r),le("invalid",t);break;default:i=r}Rc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?ny(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ey(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Rs(t,u):typeof u=="number"&&Rs(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ps.hasOwnProperty(s)?u!=null&&s==="onScroll"&&le("scroll",t):u!=null&&Jh(t,s,u,o))}switch(n){case"input":Ho(t),up(t,r,!1);break;case"textarea":Ho(t),hp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ci(t,!!r.multiple,s,!1):r.defaultValue!=null&&ci(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ba)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ze(e),null;case 6:if(t&&e.stateNode!=null)Cv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(k(166));if(n=wr(zs.current),wr(Gt.current),Zo(e)){if(r=e.stateNode,n=e.memoizedProps,r[jt]=e,(s=r.nodeValue!==n)&&(t=wt,t!==null))switch(t.tag){case 3:Jo(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jo(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jt]=e,e.stateNode=r}return ze(e),null;case 13:if(ce(pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(de&&yt!==null&&(e.mode&1)!==0&&(e.flags&128)===0)zy(),Ii(),e.flags|=98560,s=!1;else if(s=Zo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(k(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(k(317));s[jt]=e}else Ii(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ze(e),s=!1}else bt!==null&&(fh(bt),bt=null),s=!0;if(!s)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(pe.current&1)!==0?Ce===0&&(Ce=3):Md())),e.updateQueue!==null&&(e.flags|=4),ze(e),null);case 4:return Ai(),sh(t,e),t===null&&Us(e.stateNode.containerInfo),ze(e),null;case 10:return yd(e.type._context),ze(e),null;case 17:return ft(e.type)&&ja(),ze(e),null;case 19:if(ce(pe),s=e.memoizedState,s===null)return ze(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)is(s,!1);else{if(Ce!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=Qa(t),o!==null){for(e.flags|=128,is(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return oe(pe,pe.current&1|2),e.child}t=t.sibling}s.tail!==null&&_e()>Ni&&(e.flags|=128,r=!0,is(s,!1),e.lanes=4194304)}else{if(!r)if(t=Qa(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),is(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!de)return ze(e),null}else 2*_e()-s.renderingStartTime>Ni&&n!==1073741824&&(e.flags|=128,r=!0,is(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=_e(),e.sibling=null,n=pe.current,oe(pe,r?n&1|2:n&1),e):(ze(e),null);case 22:case 23:return bd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(gt&1073741824)!==0&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),null;case 24:return null;case 25:return null}throw Error(k(156,e.tag))}function hS(t,e){switch(fd(e),e.tag){case 1:return ft(e.type)&&ja(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ai(),ce(dt),ce(Ze),Sd(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Td(e),null;case 13:if(ce(pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(k(340));Ii()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ce(pe),null;case 4:return Ai(),null;case 10:return yd(e.type._context),null;case 22:case 23:return bd(),null;case 24:return null;default:return null}}var na=!1,Ge=!1,dS=typeof WeakSet=="function"?WeakSet:Set,D=null;function ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ye(t,e,r)}else n.current=null}function oh(t,e,n){try{n()}catch(r){ye(t,e,r)}}var em=!1;function fS(t,e){if(zc=Fa,t=Dy(),hd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,f=0,a=t,h=null;t:for(;;){for(var d;a!==n||i!==0&&a.nodeType!==3||(l=o+i),a!==s||r!==0&&a.nodeType!==3||(u=o+r),a.nodeType===3&&(o+=a.nodeValue.length),(d=a.firstChild)!==null;)h=a,a=d;for(;;){if(a===t)break t;if(h===n&&++c===i&&(l=o),h===s&&++f===r&&(u=o),(d=a.nextSibling)!==null)break;a=h,h=a.parentNode}a=d}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hc={focusedElem:t,selectionRange:n},Fa=!1,D=e;D!==null;)if(e=D,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,D=t;else for(;D!==null;){e=D;try{var m=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,p=e.stateNode,g=p.getSnapshotBeforeUpdate(e.elementType===e.type?y:Pt(e.type,y),w);p.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(k(163))}}catch(T){ye(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,D=t;break}D=e.return}return m=em,em=!1,m}function Ss(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&oh(e,n,s)}i=i.next}while(i!==r)}}function Ml(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ah(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Av(t){var e=t.alternate;e!==null&&(t.alternate=null,Av(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[jt],delete e[Bs],delete e[Kc],delete e[QT],delete e[XT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xv(t){return t.tag===5||t.tag===3||t.tag===4}function tm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ba));else if(r!==4&&(t=t.child,t!==null))for(lh(t,e,n),t=t.sibling;t!==null;)lh(t,e,n),t=t.sibling}function uh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uh(t,e,n),t=t.sibling;t!==null;)uh(t,e,n),t=t.sibling}var Le=null,Rt=!1;function kn(t,e,n){for(n=n.child;n!==null;)Nv(t,e,n),n=n.sibling}function Nv(t,e,n){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(Cl,n)}catch{}switch(n.tag){case 5:Ge||ii(n,e);case 6:var r=Le,i=Rt;Le=null,kn(t,e,n),Le=r,Rt=i,Le!==null&&(Rt?(t=Le,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(Rt?(t=Le,n=n.stateNode,t.nodeType===8?Hu(t.parentNode,n):t.nodeType===1&&Hu(t,n),Ls(t)):Hu(Le,n.stateNode));break;case 4:r=Le,i=Rt,Le=n.stateNode.containerInfo,Rt=!0,kn(t,e,n),Le=r,Rt=i;break;case 0:case 11:case 14:case 15:if(!Ge&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&oh(n,e,o),i=i.next}while(i!==r)}kn(t,e,n);break;case 1:if(!Ge&&(ii(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ye(n,e,l)}kn(t,e,n);break;case 21:kn(t,e,n);break;case 22:n.mode&1?(Ge=(r=Ge)||n.memoizedState!==null,kn(t,e,n),Ge=r):kn(t,e,n);break;default:kn(t,e,n)}}function nm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new dS),e.forEach(function(r){var i=SS.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Dt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Le=l.stateNode,Rt=!1;break e;case 3:Le=l.stateNode.containerInfo,Rt=!0;break e;case 4:Le=l.stateNode.containerInfo,Rt=!0;break e}l=l.return}if(Le===null)throw Error(k(160));Nv(s,o,i),Le=null,Rt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){ye(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dv(e,t),e=e.sibling}function Dv(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dt(e,t),Ut(t),r&4){try{Ss(3,t,t.return),Ml(3,t)}catch(y){ye(t,t.return,y)}try{Ss(5,t,t.return)}catch(y){ye(t,t.return,y)}}break;case 1:Dt(e,t),Ut(t),r&512&&n!==null&&ii(n,n.return);break;case 5:if(Dt(e,t),Ut(t),r&512&&n!==null&&ii(n,n.return),t.flags&32){var i=t.stateNode;try{Rs(i,"")}catch(y){ye(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Yg(i,s),bc(l,o);var c=bc(l,s);for(o=0;o<u.length;o+=2){var f=u[o],a=u[o+1];f==="style"?ny(i,a):f==="dangerouslySetInnerHTML"?ey(i,a):f==="children"?Rs(i,a):Jh(i,f,a,c)}switch(l){case"input":xc(i,s);break;case"textarea":Jg(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?ci(i,!!s.multiple,d,!1):h!==!!s.multiple&&(s.defaultValue!=null?ci(i,!!s.multiple,s.defaultValue,!0):ci(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bs]=s}catch(y){ye(t,t.return,y)}}break;case 6:if(Dt(e,t),Ut(t),r&4){if(t.stateNode===null)throw Error(k(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){ye(t,t.return,y)}}break;case 3:if(Dt(e,t),Ut(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ls(e.containerInfo)}catch(y){ye(t,t.return,y)}break;case 4:Dt(e,t),Ut(t);break;case 13:Dt(e,t),Ut(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Pd=_e())),r&4&&nm(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ge=(c=Ge)||f,Dt(e,t),Ge=c):Dt(e,t),Ut(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!f&&(t.mode&1)!==0)for(D=t,f=t.child;f!==null;){for(a=D=f;D!==null;){switch(h=D,d=h.child,h.tag){case 0:case 11:case 14:case 15:Ss(4,h,h.return);break;case 1:ii(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){ye(r,n,y)}}break;case 5:ii(h,h.return);break;case 22:if(h.memoizedState!==null){im(a);continue}}d!==null?(d.return=h,D=d):im(a)}f=f.sibling}e:for(f=null,a=t;;){if(a.tag===5){if(f===null){f=a;try{i=a.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=a.stateNode,u=a.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=ty("display",o))}catch(y){ye(t,t.return,y)}}}else if(a.tag===6){if(f===null)try{a.stateNode.nodeValue=c?"":a.memoizedProps}catch(y){ye(t,t.return,y)}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;f===a&&(f=null),a=a.return}f===a&&(f=null),a.sibling.return=a.return,a=a.sibling}}break;case 19:Dt(e,t),Ut(t),r&4&&nm(t);break;case 21:break;default:Dt(e,t),Ut(t)}}function Ut(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xv(n)){var r=n;break e}n=n.return}throw Error(k(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Rs(i,""),r.flags&=-33);var s=tm(t);uh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=tm(t);lh(t,l,o);break;default:throw Error(k(161))}}catch(u){ye(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function pS(t,e,n){D=t,Pv(t)}function Pv(t,e,n){for(var r=(t.mode&1)!==0;D!==null;){var i=D,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||na;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ge;l=na;var c=Ge;if(na=o,(Ge=u)&&!c)for(D=i;D!==null;)o=D,u=o.child,o.tag===22&&o.memoizedState!==null?sm(i):u!==null?(u.return=o,D=u):sm(i);for(;s!==null;)D=s,Pv(s),s=s.sibling;D=i,na=l,Ge=c}rm(t)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,D=s):rm(t)}}function rm(t){for(;D!==null;){var e=D;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:Ge||Ml(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ge)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Pt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Vp(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vp(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var f=c.memoizedState;if(f!==null){var a=f.dehydrated;a!==null&&Ls(a)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(k(163))}Ge||e.flags&512&&ah(e)}catch(h){ye(e,e.return,h)}}if(e===t){D=null;break}if(n=e.sibling,n!==null){n.return=e.return,D=n;break}D=e.return}}function im(t){for(;D!==null;){var e=D;if(e===t){D=null;break}var n=e.sibling;if(n!==null){n.return=e.return,D=n;break}D=e.return}}function sm(t){for(;D!==null;){var e=D;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ml(4,e)}catch(u){ye(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){ye(e,i,u)}}var s=e.return;try{ah(e)}catch(u){ye(e,s,u)}break;case 5:var o=e.return;try{ah(e)}catch(u){ye(e,o,u)}}}catch(u){ye(e,e.return,u)}if(e===t){D=null;break}var l=e.sibling;if(l!==null){l.return=e.return,D=l;break}D=e.return}}var mS=Math.ceil,Ja=Tn.ReactCurrentDispatcher,Nd=Tn.ReactCurrentOwner,At=Tn.ReactCurrentBatchConfig,ee=0,Me=null,Ee=null,Fe=0,gt=0,si=sr(0),Ce=0,Ks=null,br=0,Ol=0,Dd=0,Es=null,lt=null,Pd=0,Ni=1/0,tn=null,Za=!1,ch=null,jn=null,ra=!1,Ln=null,el=0,ks=0,hh=null,Sa=-1,Ea=0;function it(){return(ee&6)!==0?_e():Sa!==-1?Sa:Sa=_e()}function zn(t){return(t.mode&1)===0?1:(ee&2)!==0&&Fe!==0?Fe&-Fe:JT.transition!==null?(Ea===0&&(Ea=py()),Ea):(t=re,t!==0||(t=window.event,t=t===void 0?16:Ty(t.type)),t)}function Lt(t,e,n,r){if(50<ks)throw ks=0,hh=null,Error(k(185));co(t,n,r),((ee&2)===0||t!==Me)&&(t===Me&&((ee&2)===0&&(Ol|=n),Ce===4&&Rn(t,Fe)),pt(t,r),n===1&&ee===0&&(e.mode&1)===0&&(Ni=_e()+500,Pl&&or()))}function pt(t,e){var n=t.callbackNode;J1(t,e);var r=$a(t,t===Me?Fe:0);if(r===0)n!==null&&pp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pp(n),e===1)t.tag===0?YT(om.bind(null,t)):Vy(om.bind(null,t)),KT(function(){(ee&6)===0&&or()}),n=null;else{switch(my(r)){case 1:n=rd;break;case 4:n=dy;break;case 16:n=La;break;case 536870912:n=fy;break;default:n=La}n=Uv(n,Rv.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Rv(t,e){if(Sa=-1,Ea=0,(ee&6)!==0)throw Error(k(327));var n=t.callbackNode;if(mi()&&t.callbackNode!==n)return null;var r=$a(t,t===Me?Fe:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=tl(t,r);else{e=r;var i=ee;ee|=2;var s=Mv();(Me!==t||Fe!==e)&&(tn=null,Ni=_e()+500,kr(t,e));do try{vS();break}catch(l){bv(t,l)}while(1);gd(),Ja.current=s,ee=i,Ee!==null?e=0:(Me=null,Fe=0,e=Ce)}if(e!==0){if(e===2&&(i=Fc(t),i!==0&&(r=i,e=dh(t,i))),e===1)throw n=Ks,kr(t,0),Rn(t,r),pt(t,_e()),n;if(e===6)Rn(t,r);else{if(i=t.current.alternate,(r&30)===0&&!gS(i)&&(e=tl(t,r),e===2&&(s=Fc(t),s!==0&&(r=s,e=dh(t,s))),e===1))throw n=Ks,kr(t,0),Rn(t,r),pt(t,_e()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(k(345));case 2:mr(t,lt,tn);break;case 3:if(Rn(t,r),(r&130023424)===r&&(e=Pd+500-_e(),10<e)){if($a(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){it(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qc(mr.bind(null,t,lt,tn),e);break}mr(t,lt,tn);break;case 4:if(Rn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ot(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=_e()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*mS(r/1960))-r,10<r){t.timeoutHandle=qc(mr.bind(null,t,lt,tn),r);break}mr(t,lt,tn);break;case 5:mr(t,lt,tn);break;default:throw Error(k(329))}}}return pt(t,_e()),t.callbackNode===n?Rv.bind(null,t):null}function dh(t,e){var n=Es;return t.current.memoizedState.isDehydrated&&(kr(t,e).flags|=256),t=tl(t,e),t!==2&&(e=lt,lt=n,e!==null&&fh(e)),t}function fh(t){lt===null?lt=t:lt.push.apply(lt,t)}function gS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$t(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Rn(t,e){for(e&=~Dd,e&=~Ol,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ot(e),r=1<<n;t[n]=-1,e&=~r}}function om(t){if((ee&6)!==0)throw Error(k(327));mi();var e=$a(t,0);if((e&1)===0)return pt(t,_e()),null;var n=tl(t,e);if(t.tag!==0&&n===2){var r=Fc(t);r!==0&&(e=r,n=dh(t,r))}if(n===1)throw n=Ks,kr(t,0),Rn(t,e),pt(t,_e()),n;if(n===6)throw Error(k(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,mr(t,lt,tn),pt(t,_e()),null}function Rd(t,e){var n=ee;ee|=1;try{return t(e)}finally{ee=n,ee===0&&(Ni=_e()+500,Pl&&or())}}function Mr(t){Ln!==null&&Ln.tag===0&&(ee&6)===0&&mi();var e=ee;ee|=1;var n=At.transition,r=re;try{if(At.transition=null,re=1,t)return t()}finally{re=r,At.transition=n,ee=e,(ee&6)===0&&or()}}function bd(){gt=si.current,ce(si)}function kr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,qT(n)),Ee!==null)for(n=Ee.return;n!==null;){var r=n;switch(fd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ja();break;case 3:Ai(),ce(dt),ce(Ze),Sd();break;case 5:Td(r);break;case 4:Ai();break;case 13:ce(pe);break;case 19:ce(pe);break;case 10:yd(r.type._context);break;case 22:case 23:bd()}n=n.return}if(Me=t,Ee=t=Hn(t.current,null),Fe=gt=e,Ce=0,Ks=null,Dd=Ol=br=0,lt=Es=null,vr!==null){for(e=0;e<vr.length;e++)if(n=vr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}vr=null}return t}function bv(t,e){do{var n=Ee;try{if(gd(),wa.current=Ya,Xa){for(var r=me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Xa=!1}if(Rr=0,be=Ie=me=null,Ts=!1,Hs=0,Nd.current=null,n===null||n.return===null){Ce=1,Ks=e,Ee=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Fe,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,f=l,a=f.tag;if((f.mode&1)===0&&(a===0||a===11||a===15)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var d=Kp(o);if(d!==null){d.flags&=-257,Wp(d,o,l,s,e),d.mode&1&&qp(s,c,e),e=d,u=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(u),e.updateQueue=y}else m.add(u);break e}else{if((e&1)===0){qp(s,c,e),Md();break e}u=Error(k(426))}}else if(de&&l.mode&1){var w=Kp(o);if(w!==null){(w.flags&65536)===0&&(w.flags|=256),Wp(w,o,l,s,e),pd(xi(u,l));break e}}s=u=xi(u,l),Ce!==4&&(Ce=2),Es===null?Es=[s]:Es.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var p=gv(s,u,e);Up(s,p);break e;case 1:l=u;var g=s.type,v=s.stateNode;if((s.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(jn===null||!jn.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=yv(s,l,e);Up(s,T);break e}}s=s.return}while(s!==null)}Lv(n)}catch(A){e=A,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(1)}function Mv(){var t=Ja.current;return Ja.current=Ya,t===null?Ya:t}function Md(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Me===null||(br&268435455)===0&&(Ol&268435455)===0||Rn(Me,Fe)}function tl(t,e){var n=ee;ee|=2;var r=Mv();(Me!==t||Fe!==e)&&(tn=null,kr(t,e));do try{yS();break}catch(i){bv(t,i)}while(1);if(gd(),ee=n,Ja.current=r,Ee!==null)throw Error(k(261));return Me=null,Fe=0,Ce}function yS(){for(;Ee!==null;)Ov(Ee)}function vS(){for(;Ee!==null&&!z1();)Ov(Ee)}function Ov(t){var e=Fv(t.alternate,t,gt);t.memoizedProps=t.pendingProps,e===null?Lv(t):Ee=e,Nd.current=null}function Lv(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=cS(n,e,gt),n!==null){Ee=n;return}}else{if(n=hS(n,e),n!==null){n.flags&=32767,Ee=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ce=6,Ee=null;return}}if(e=e.sibling,e!==null){Ee=e;return}Ee=e=t}while(e!==null);Ce===0&&(Ce=5)}function mr(t,e,n){var r=re,i=At.transition;try{At.transition=null,re=1,wS(t,e,n,r)}finally{At.transition=i,re=r}return null}function wS(t,e,n,r){do mi();while(Ln!==null);if((ee&6)!==0)throw Error(k(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(k(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Z1(t,s),t===Me&&(Ee=Me=null,Fe=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||ra||(ra=!0,Uv(La,function(){return mi(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=At.transition,At.transition=null;var o=re;re=1;var l=ee;ee|=4,Nd.current=null,fS(t,n),Dv(n,t),UT(Hc),Fa=!!zc,Hc=zc=null,t.current=n,pS(n),H1(),ee=l,re=o,At.transition=s}else t.current=n;if(ra&&(ra=!1,Ln=t,el=i),s=t.pendingLanes,s===0&&(jn=null),K1(n.stateNode),pt(t,_e()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Za)throw Za=!1,t=ch,ch=null,t;return(el&1)!==0&&t.tag!==0&&mi(),s=t.pendingLanes,(s&1)!==0?t===hh?ks++:(ks=0,hh=t):ks=0,or(),null}function mi(){if(Ln!==null){var t=my(el),e=At.transition,n=re;try{if(At.transition=null,re=16>t?16:t,Ln===null)var r=!1;else{if(t=Ln,Ln=null,el=0,(ee&6)!==0)throw Error(k(331));var i=ee;for(ee|=4,D=t.current;D!==null;){var s=D,o=s.child;if((D.flags&16)!==0){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(D=c;D!==null;){var f=D;switch(f.tag){case 0:case 11:case 15:Ss(8,f,s)}var a=f.child;if(a!==null)a.return=f,D=a;else for(;D!==null;){f=D;var h=f.sibling,d=f.return;if(Av(f),f===c){D=null;break}if(h!==null){h.return=d,D=h;break}D=d}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}D=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,D=o;else e:for(;D!==null;){if(s=D,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Ss(9,s,s.return)}var p=s.sibling;if(p!==null){p.return=s.return,D=p;break e}D=s.return}}var g=t.current;for(D=g;D!==null;){o=D;var v=o.child;if((o.subtreeFlags&2064)!==0&&v!==null)v.return=o,D=v;else e:for(o=g;D!==null;){if(l=D,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:Ml(9,l)}}catch(A){ye(l,l.return,A)}if(l===o){D=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,D=T;break e}D=l.return}}if(ee=i,or(),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(Cl,t)}catch{}r=!0}return r}finally{re=n,At.transition=e}}return!1}function am(t,e,n){e=xi(n,e),e=gv(t,e,1),t=Bn(t,e,1),e=it(),t!==null&&(co(t,1,e),pt(t,e))}function ye(t,e,n){if(t.tag===3)am(t,t,n);else for(;e!==null;){if(e.tag===3){am(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jn===null||!jn.has(r))){t=xi(n,t),t=yv(e,t,1),e=Bn(e,t,1),t=it(),e!==null&&(co(e,1,t),pt(e,t));break}}e=e.return}}function _S(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=it(),t.pingedLanes|=t.suspendedLanes&n,Me===t&&(Fe&n)===n&&(Ce===4||Ce===3&&(Fe&130023424)===Fe&&500>_e()-Pd?kr(t,0):Dd|=n),pt(t,e)}function $v(t,e){e===0&&((t.mode&1)===0?e=1:(e=Ko,Ko<<=1,(Ko&130023424)===0&&(Ko=4194304)));var n=it();t=pn(t,e),t!==null&&(co(t,e,n),pt(t,n))}function TS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$v(t,n)}function SS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(k(314))}r!==null&&r.delete(e),$v(t,n)}var Fv;Fv=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dt.current)ht=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return ht=!1,uS(t,e,n);ht=(t.flags&131072)!==0}else ht=!1,de&&(e.flags&1048576)!==0&&By(e,Ga,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ta(t,e),t=e.pendingProps;var i=ki(e,Ze.current);pi(e,n),i=kd(null,e,r,t,i,n);var s=Id();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ft(r)?(s=!0,za(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,wd(e),i.updater=Rl,e.stateNode=i,i._reactInternals=e,Zc(e,r,t,n),e=nh(null,e,r,!0,s,n)):(e.tag=0,de&&s&&dd(e),nt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ta(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=kS(r),t=Pt(r,t),i){case 0:e=th(null,e,r,t,n);break e;case 1:e=Yp(null,e,r,t,n);break e;case 11:e=Qp(null,e,r,t,n);break e;case 14:e=Xp(null,e,r,Pt(r.type,t),n);break e}throw Error(k(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),th(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),Yp(t,e,r,i,n);case 3:e:{if(Tv(e),t===null)throw Error(k(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Gy(t,e),Wa(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=xi(Error(k(423)),e),e=Jp(t,e,r,n,i);break e}else if(r!==i){i=xi(Error(k(424)),e),e=Jp(t,e,r,n,i);break e}else for(yt=Vn(e.stateNode.containerInfo.firstChild),wt=e,de=!0,bt=null,n=Qy(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ii(),r===i){e=mn(t,e,n);break e}nt(t,e,r,n)}e=e.child}return e;case 5:return Xy(e),t===null&&Xc(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Gc(r,i)?o=null:s!==null&&Gc(r,s)&&(e.flags|=32),_v(t,e),nt(t,e,o,n),e.child;case 6:return t===null&&Xc(e),null;case 13:return Sv(t,e,n);case 4:return _d(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ci(e,null,r,n):nt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),Qp(t,e,r,i,n);case 7:return nt(t,e,e.pendingProps,n),e.child;case 8:return nt(t,e,e.pendingProps.children,n),e.child;case 12:return nt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,oe(qa,r._currentValue),r._currentValue=o,s!==null)if($t(s.value,o)){if(s.children===i.children&&!dt.current){e=mn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=hn(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var f=c.pending;f===null?u.next=u:(u.next=f.next,f.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Yc(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(k(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Yc(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}nt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,pi(e,n),i=xt(i),r=r(i),e.flags|=1,nt(t,e,r,n),e.child;case 14:return r=e.type,i=Pt(r,e.pendingProps),i=Pt(r.type,i),Xp(t,e,r,i,n);case 15:return vv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Pt(r,i),Ta(t,e),e.tag=1,ft(r)?(t=!0,za(e)):t=!1,pi(e,n),Ky(e,r,i),Zc(e,r,i,n),nh(null,e,r,!0,t,n);case 19:return Ev(t,e,n);case 22:return wv(t,e,n)}throw Error(k(156,e.tag))};function Uv(t,e){return hy(t,e)}function ES(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ct(t,e,n,r){return new ES(t,e,n,r)}function Od(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kS(t){if(typeof t=="function")return Od(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ed)return 11;if(t===td)return 14}return 2}function Hn(t,e){var n=t.alternate;return n===null?(n=Ct(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ka(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Od(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qr:return Ir(n.children,i,s,e);case Zh:o=8,i|=8;break;case Ec:return t=Ct(12,n,e,i|2),t.elementType=Ec,t.lanes=s,t;case kc:return t=Ct(13,n,e,i),t.elementType=kc,t.lanes=s,t;case Ic:return t=Ct(19,n,e,i),t.elementType=Ic,t.lanes=s,t;case Wg:return Ll(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qg:o=10;break e;case Kg:o=9;break e;case ed:o=11;break e;case td:o=14;break e;case Nn:o=16,r=null;break e}throw Error(k(130,t==null?t:typeof t,""))}return e=Ct(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ir(t,e,n,r){return t=Ct(7,t,r,e),t.lanes=n,t}function Ll(t,e,n,r){return t=Ct(22,t,r,e),t.elementType=Wg,t.lanes=n,t.stateNode={isHidden:!1},t}function Ju(t,e,n){return t=Ct(6,t,null,e),t.lanes=n,t}function Zu(t,e,n){return e=Ct(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IS(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bu(0),this.expirationTimes=bu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ld(t,e,n,r,i,s,o,l,u){return t=new IS(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ct(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wd(s),t}function CS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Vv(t){if(!t)return Yn;t=t._reactInternals;e:{if(Br(t)!==t||t.tag!==1)throw Error(k(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(k(171))}if(t.tag===1){var n=t.type;if(ft(n))return Uy(t,n,e)}return e}function Bv(t,e,n,r,i,s,o,l,u){return t=Ld(n,r,!0,t,i,s,o,l,u),t.context=Vv(null),n=t.current,r=it(),i=zn(n),s=hn(r,i),s.callback=e!=null?e:null,Bn(n,s,i),t.current.lanes=i,co(t,i,r),pt(t,r),t}function $l(t,e,n,r){var i=e.current,s=it(),o=zn(i);return n=Vv(n),e.context===null?e.context=n:e.pendingContext=n,e=hn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bn(i,e,o),t!==null&&(Lt(t,i,o,s),va(t,i,o)),o}function nl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $d(t,e){lm(t,e),(t=t.alternate)&&lm(t,e)}function AS(){return null}var jv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fd(t){this._internalRoot=t}Fl.prototype.render=Fd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(k(409));$l(t,e,null,null)};Fl.prototype.unmount=Fd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Mr(function(){$l(null,t,null,null)}),e[fn]=null}};function Fl(t){this._internalRoot=t}Fl.prototype.unstable_scheduleHydration=function(t){if(t){var e=vy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pn.length&&e!==0&&e<Pn[n].priority;n++);Pn.splice(n,0,t),n===0&&_y(t)}};function Ud(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ul(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function um(){}function xS(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=nl(o);s.call(c)}}var o=Bv(e,r,t,0,null,!1,!1,"",um);return t._reactRootContainer=o,t[fn]=o.current,Us(t.nodeType===8?t.parentNode:t),Mr(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=nl(u);l.call(c)}}var u=Ld(t,0,!1,null,null,!1,!1,"",um);return t._reactRootContainer=u,t[fn]=u.current,Us(t.nodeType===8?t.parentNode:t),Mr(function(){$l(e,u,n,r)}),u}function Vl(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=nl(o);l.call(u)}}$l(e,o,t,i)}else o=xS(n,e,t,i,r);return nl(o)}gy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=us(e.pendingLanes);n!==0&&(id(e,n|1),pt(e,_e()),(ee&6)===0&&(Ni=_e()+500,or()))}break;case 13:Mr(function(){var r=pn(t,1);if(r!==null){var i=it();Lt(r,t,1,i)}}),$d(t,1)}};sd=function(t){if(t.tag===13){var e=pn(t,134217728);if(e!==null){var n=it();Lt(e,t,134217728,n)}$d(t,134217728)}};yy=function(t){if(t.tag===13){var e=zn(t),n=pn(t,e);if(n!==null){var r=it();Lt(n,t,e,r)}$d(t,e)}};vy=function(){return re};wy=function(t,e){var n=re;try{return re=t,e()}finally{re=n}};Oc=function(t,e,n){switch(e){case"input":if(xc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Dl(r);if(!i)throw Error(k(90));Xg(r),xc(r,i)}}}break;case"textarea":Jg(t,n);break;case"select":e=n.value,e!=null&&ci(t,!!n.multiple,e,!1)}};sy=Rd;oy=Mr;var NS={usingClientEntryPoint:!1,Events:[fo,Zr,Dl,ry,iy,Rd]},ss={findFiberByHostInstance:yr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},DS={bundleType:ss.bundleType,version:ss.version,rendererPackageName:ss.rendererPackageName,rendererConfig:ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=uy(t),t===null?null:t.stateNode},findFiberByHostInstance:ss.findFiberByHostInstance||AS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ia=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ia.isDisabled&&ia.supportsFiber)try{Cl=ia.inject(DS),Ht=ia}catch{}}St.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NS;St.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ud(e))throw Error(k(200));return CS(t,e,null,n)};St.createRoot=function(t,e){if(!Ud(t))throw Error(k(299));var n=!1,r="",i=jv;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Ld(t,1,!1,null,null,n,!1,r,i),t[fn]=e.current,Us(t.nodeType===8?t.parentNode:t),new Fd(e)};St.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(k(188)):(t=Object.keys(t).join(","),Error(k(268,t)));return t=uy(e),t=t===null?null:t.stateNode,t};St.flushSync=function(t){return Mr(t)};St.hydrate=function(t,e,n){if(!Ul(e))throw Error(k(200));return Vl(null,t,e,!0,n)};St.hydrateRoot=function(t,e,n){if(!Ud(t))throw Error(k(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jv;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Bv(e,null,t,1,n!=null?n:null,i,!1,s,o),t[fn]=e.current,Us(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Fl(e)};St.render=function(t,e,n){if(!Ul(e))throw Error(k(200));return Vl(null,t,e,!1,n)};St.unmountComponentAtNode=function(t){if(!Ul(t))throw Error(k(40));return t._reactRootContainer?(Mr(function(){Vl(null,null,t,!1,function(){t._reactRootContainer=null,t[fn]=null})}),!0):!1};St.unstable_batchedUpdates=Rd;St.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ul(n))throw Error(k(200));if(t==null||t._reactInternals===void 0)throw Error(k(38));return Vl(t,e,n,!1,r)};St.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=St})(Mg);var cm=Mg.exports;Tc.createRoot=cm.createRoot,Tc.hydrateRoot=cm.hydrateRoot;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},PS=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Hv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,f=s>>2,a=(s&3)<<4|l>>4;let h=(l&15)<<2|c>>6,d=c&63;u||(d=64,o||(h=64)),r.push(n[f],n[a],n[h],n[d])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zv(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PS(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const a=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||a==null)throw new RS;const h=s<<2|l>>4;if(r.push(h),c!==64){const d=l<<4&240|c>>2;if(r.push(d),a!==64){const m=c<<6&192|a;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class RS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bS=function(t){const e=zv(t);return Hv.encodeByteArray(e,!0)},rl=function(t){return bS(t).replace(/\./g,"")},Gv=function(t){try{return Hv.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=()=>MS().__FIREBASE_DEFAULTS__,LS=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$S=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Gv(t[1]);return e&&JSON.parse(e)},Vd=()=>{try{return OS()||LS()||$S()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qv=t=>{var e,n;return(n=(e=Vd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FS=t=>{const e=qv(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},US=()=>{var t;return(t=Vd())===null||t===void 0?void 0:t.config},Kv=t=>{var e;return(e=Vd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[rl(JSON.stringify(n)),rl(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function zS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function HS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GS(){const t=et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qS(){try{return typeof indexedDB=="object"}catch{return!1}}function KS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="FirebaseError";class Sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WS,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?QS(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Sn(i,l,r)}}function QS(t,e){return t.replace(XS,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const XS=/\{\$([^}]+)}/g;function YS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function il(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(hm(s)&&hm(o)){if(!il(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function hm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function JS(t,e){const n=new ZS(t,e);return n.subscribe.bind(n)}class ZS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");eE(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ec),i.error===void 0&&(i.error=ec),i.complete===void 0&&(i.complete=ec);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eE(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ec(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class Or{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rE(e))try{this.getOrInitializeService({instanceIdentifier:gr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=gr){return this.instances.has(e)}getOptions(e=gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gr){return this.component?this.component.multipleInstances?e:gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nE(t){return t===gr?void 0:t}function rE(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(te||(te={}));const sE={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},oE=te.INFO,aE={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},lE=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=aE[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bd{constructor(e){this.name=e,this._logLevel=oE,this._logHandler=lE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const uE=(t,e)=>e.some(n=>t instanceof n);let dm,fm;function cE(){return dm||(dm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hE(){return fm||(fm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wv=new WeakMap,ph=new WeakMap,Qv=new WeakMap,tc=new WeakMap,jd=new WeakMap;function dE(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Gn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Wv.set(n,t)}).catch(()=>{}),jd.set(e,t),e}function fE(t){if(ph.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ph.set(t,e)}let mh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ph.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qv.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pE(t){mh=t(mh)}function mE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nc(this),e,...n);return Qv.set(r,e.sort?e.sort():[e]),Gn(r)}:hE().includes(t)?function(...e){return t.apply(nc(this),e),Gn(Wv.get(this))}:function(...e){return Gn(t.apply(nc(this),e))}}function gE(t){return typeof t=="function"?mE(t):(t instanceof IDBTransaction&&fE(t),uE(t,cE())?new Proxy(t,mh):t)}function Gn(t){if(t instanceof IDBRequest)return dE(t);if(tc.has(t))return tc.get(t);const e=gE(t);return e!==t&&(tc.set(t,e),jd.set(e,t)),e}const nc=t=>jd.get(t);function yE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Gn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Gn(o.result),u.oldVersion,u.newVersion,Gn(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",()=>i())}).catch(()=>{}),l}const vE=["get","getKey","getAll","getAllKeys","count"],wE=["put","add","delete","clear"],rc=new Map;function pm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rc.get(e))return rc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=wE.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vE.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return rc.set(e,s),s}pE(t=>({...t,get:(e,n,r)=>pm(e,n)||t.get(e,n,r),has:(e,n)=>!!pm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(TE(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function TE(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gh="@firebase/app",mm="0.9.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr=new Bd("@firebase/app"),SE="@firebase/app-compat",EE="@firebase/analytics-compat",kE="@firebase/analytics",IE="@firebase/app-check-compat",CE="@firebase/app-check",AE="@firebase/auth",xE="@firebase/auth-compat",NE="@firebase/database",DE="@firebase/database-compat",PE="@firebase/functions",RE="@firebase/functions-compat",bE="@firebase/installations",ME="@firebase/installations-compat",OE="@firebase/messaging",LE="@firebase/messaging-compat",$E="@firebase/performance",FE="@firebase/performance-compat",UE="@firebase/remote-config",VE="@firebase/remote-config-compat",BE="@firebase/storage",jE="@firebase/storage-compat",zE="@firebase/firestore",HE="@firebase/firestore-compat",GE="firebase",qE="9.17.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="[DEFAULT]",KE={[gh]:"fire-core",[SE]:"fire-core-compat",[kE]:"fire-analytics",[EE]:"fire-analytics-compat",[CE]:"fire-app-check",[IE]:"fire-app-check-compat",[AE]:"fire-auth",[xE]:"fire-auth-compat",[NE]:"fire-rtdb",[DE]:"fire-rtdb-compat",[PE]:"fire-fn",[RE]:"fire-fn-compat",[bE]:"fire-iid",[ME]:"fire-iid-compat",[OE]:"fire-fcm",[LE]:"fire-fcm-compat",[$E]:"fire-perf",[FE]:"fire-perf-compat",[UE]:"fire-rc",[VE]:"fire-rc-compat",[BE]:"fire-gcs",[jE]:"fire-gcs-compat",[zE]:"fire-fst",[HE]:"fire-fst-compat","fire-js":"fire-js",[GE]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sl=new Map,vh=new Map;function WE(t,e){try{t.container.addComponent(e)}catch(n){Lr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Di(t){const e=t.name;if(vh.has(e))return Lr.debug(`There were multiple attempts to register component ${e}.`),!1;vh.set(e,t);for(const n of sl.values())WE(n,t);return!0}function zd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},qn=new mo("app","Firebase",QE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=qE;function Xv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:yh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw qn.create("bad-app-name",{appName:String(i)});if(n||(n=US()),!n)throw qn.create("no-options");const s=sl.get(i);if(s){if(il(n,s.options)&&il(r,s.config))return s;throw qn.create("duplicate-app",{appName:i})}const o=new iE(i);for(const u of vh.values())o.addComponent(u);const l=new XE(n,r,o);return sl.set(i,l),l}function Yv(t=yh){const e=sl.get(t);if(!e&&t===yh)return Xv();if(!e)throw qn.create("no-app",{appName:t});return e}function Cr(t,e,n){var r;let i=(r=KE[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Lr.warn(l.join(" "));return}Di(new Or(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="firebase-heartbeat-database",JE=1,Ws="firebase-heartbeat-store";let ic=null;function Jv(){return ic||(ic=yE(YE,JE,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ws)}}}).catch(t=>{throw qn.create("idb-open",{originalErrorMessage:t.message})})),ic}async function ZE(t){try{return(await Jv()).transaction(Ws).objectStore(Ws).get(Zv(t))}catch(e){if(e instanceof Sn)Lr.warn(e.message);else{const n=qn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Lr.warn(n.message)}}}async function gm(t,e){try{const r=(await Jv()).transaction(Ws,"readwrite");return await r.objectStore(Ws).put(e,Zv(t)),r.done}catch(n){if(n instanceof Sn)Lr.warn(n.message);else{const r=qn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Lr.warn(r.message)}}}function Zv(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek=1024,tk=30*24*60*60*1e3;class nk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ik(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ym();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=tk}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=ym(),{heartbeatsToSend:n,unsentEntries:r}=rk(this._heartbeatsCache.heartbeats),i=rl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ym(){return new Date().toISOString().substring(0,10)}function rk(t,e=ek){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),vm(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),vm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ik{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qS()?KS().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await ZE(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return gm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return gm(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function vm(t){return rl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sk(t){Di(new Or("platform-logger",e=>new _E(e),"PRIVATE")),Di(new Or("heartbeat",e=>new nk(e),"PRIVATE")),Cr(gh,mm,t),Cr(gh,mm,"esm2017"),Cr("fire-js","")}sk("");var ok=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O,Hd=Hd||{},j=ok||self;function ol(){}function Bl(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function vo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function ak(t){return Object.prototype.hasOwnProperty.call(t,sc)&&t[sc]||(t[sc]=++lk)}var sc="closure_uid_"+(1e9*Math.random()>>>0),lk=0;function uk(t,e,n){return t.call.apply(t.bind,arguments)}function ck(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function We(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?We=uk:We=ck,We.apply(null,arguments)}function sa(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Be(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,i,s){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return e.prototype[i].apply(r,o)}}function ar(){this.s=this.s,this.o=this.o}var hk=0;ar.prototype.s=!1;ar.prototype.na=function(){!this.s&&(this.s=!0,this.M(),hk!=0)&&ak(this)};ar.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const e0=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Gd(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function wm(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Bl(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Qe(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Qe.prototype.h=function(){this.defaultPrevented=!0};var dk=function(){if(!j.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{j.addEventListener("test",ol,e),j.removeEventListener("test",ol,e)}catch{}return t}();function al(t){return/^[\s\xa0]*$/.test(t)}var _m=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function oc(t,e){return t<e?-1:t>e?1:0}function jl(){var t=j.navigator;return t&&(t=t.userAgent)?t:""}function zt(t){return jl().indexOf(t)!=-1}function qd(t){return qd[" "](t),t}qd[" "]=ol;function fk(t){var e=gk;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var pk=zt("Opera"),Pi=zt("Trident")||zt("MSIE"),t0=zt("Edge"),wh=t0||Pi,n0=zt("Gecko")&&!(jl().toLowerCase().indexOf("webkit")!=-1&&!zt("Edge"))&&!(zt("Trident")||zt("MSIE"))&&!zt("Edge"),mk=jl().toLowerCase().indexOf("webkit")!=-1&&!zt("Edge");function r0(){var t=j.document;return t?t.documentMode:void 0}var ll;e:{var ac="",lc=function(){var t=jl();if(n0)return/rv:([^\);]+)(\)|;)/.exec(t);if(t0)return/Edge\/([\d\.]+)/.exec(t);if(Pi)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(mk)return/WebKit\/(\S+)/.exec(t);if(pk)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(lc&&(ac=lc?lc[1]:""),Pi){var uc=r0();if(uc!=null&&uc>parseFloat(ac)){ll=String(uc);break e}}ll=ac}var gk={};function yk(){return fk(function(){let t=0;const e=_m(String(ll)).split("."),n=_m("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var i=e[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i[0].length==0&&s[0].length==0)break;t=oc(i[1].length==0?0:parseInt(i[1],10),s[1].length==0?0:parseInt(s[1],10))||oc(i[2].length==0,s[2].length==0)||oc(i[2],s[2]),i=i[3],s=s[3]}while(t==0)}return 0<=t})}var _h;if(j.document&&Pi){var Tm=r0();_h=Tm||parseInt(ll,10)||void 0}else _h=void 0;var vk=_h;function Qs(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(n0){e:{try{qd(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:wk[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Qs.X.h.call(this)}}Be(Qs,Qe);var wk={2:"touch",3:"pen",4:"mouse"};Qs.prototype.h=function(){Qs.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var wo="closure_listenable_"+(1e6*Math.random()|0),_k=0;function Tk(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=i,this.key=++_k,this.ba=this.ea=!1}function zl(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function Kd(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function i0(t){const e={};for(const n in t)e[n]=t[n];return e}const Sm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function s0(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Sm.length;s++)n=Sm[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Hl(t){this.src=t,this.g={},this.h=0}Hl.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Sh(t,e,r,i);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new Tk(e,this.src,s,!!r,i),e.ea=n,t.push(e)),e};function Th(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=e0(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(zl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Sh(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.ba&&s.listener==e&&s.capture==!!n&&s.ha==r)return i}return-1}var Wd="closure_lm_"+(1e6*Math.random()|0),cc={};function o0(t,e,n,r,i){if(r&&r.once)return l0(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)o0(t,e[s],n,r,i);return null}return n=Yd(n),t&&t[wo]?t.N(e,n,vo(r)?!!r.capture:!!r,i):a0(t,e,n,!1,r,i)}function a0(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=vo(i)?!!i.capture:!!i,l=Xd(t);if(l||(t[Wd]=l=new Hl(t)),n=l.add(e,n,r,o,s),n.proxy)return n;if(r=Sk(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)dk||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(c0(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Sk(){function t(n){return e.call(t.src,t.listener,n)}const e=Ek;return t}function l0(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)l0(t,e[s],n,r,i);return null}return n=Yd(n),t&&t[wo]?t.O(e,n,vo(r)?!!r.capture:!!r,i):a0(t,e,n,!0,r,i)}function u0(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)u0(t,e[s],n,r,i);else r=vo(r)?!!r.capture:!!r,n=Yd(n),t&&t[wo]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Sh(s,n,r,i),-1<n&&(zl(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Xd(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Sh(e,n,r,i)),(n=-1<t?e[t]:null)&&Qd(n))}function Qd(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[wo])Th(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(c0(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Xd(e))?(Th(n,t),n.h==0&&(n.src=null,e[Wd]=null)):zl(t)}}}function c0(t){return t in cc?cc[t]:cc[t]="on"+t}function Ek(t,e){if(t.ba)t=!0;else{e=new Qs(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&Qd(t),t=n.call(r,e)}return t}function Xd(t){return t=t[Wd],t instanceof Hl?t:null}var hc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yd(t){return typeof t=="function"?t:(t[hc]||(t[hc]=function(e){return t.handleEvent(e)}),t[hc])}function Oe(){ar.call(this),this.i=new Hl(this),this.P=this,this.I=null}Be(Oe,ar);Oe.prototype[wo]=!0;Oe.prototype.removeEventListener=function(t,e,n,r){u0(this,t,e,n,r)};function Ue(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new Qe(e,t);else if(e instanceof Qe)e.target=e.target||t;else{var i=e;e=new Qe(r,t),s0(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=oa(o,r,!0,e)&&i}if(o=e.g=t,i=oa(o,r,!0,e)&&i,i=oa(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=oa(o,r,!1,e)&&i}Oe.prototype.M=function(){if(Oe.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)zl(n[r]);delete t.g[e],t.h--}}this.I=null};Oe.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Oe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function oa(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.ba&&o.capture==n){var l=o.listener,u=o.ha||o.src;o.ea&&Th(t.i,o),i=l.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var Jd=j.JSON.stringify;function kk(){var t=f0;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Ik{constructor(){this.h=this.g=null}add(e,n){const r=h0.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var h0=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new Ck,t=>t.reset());class Ck{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Ak(t){j.setTimeout(()=>{throw t},0)}function d0(t,e){Eh||xk(),kh||(Eh(),kh=!0),f0.add(t,e)}var Eh;function xk(){var t=j.Promise.resolve(void 0);Eh=function(){t.then(Nk)}}var kh=!1,f0=new Ik;function Nk(){for(var t;t=kk();){try{t.h.call(t.g)}catch(n){Ak(n)}var e=h0;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}kh=!1}function Gl(t,e){Oe.call(this),this.h=t||1,this.g=e||j,this.j=We(this.lb,this),this.l=Date.now()}Be(Gl,Oe);O=Gl.prototype;O.ca=!1;O.R=null;O.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Ue(this,"tick"),this.ca&&(Zd(this),this.start()))}};O.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Zd(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}O.M=function(){Gl.X.M.call(this),Zd(this),delete this.g};function ef(t,e,n){if(typeof t=="function")n&&(t=We(t,n));else if(t&&typeof t.handleEvent=="function")t=We(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:j.setTimeout(t,e||0)}function p0(t){t.g=ef(()=>{t.g=null,t.i&&(t.i=!1,p0(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class Dk extends ar{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:p0(this)}M(){super.M(),this.g&&(j.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xs(t){ar.call(this),this.h=t,this.g={}}Be(Xs,ar);var Em=[];function m0(t,e,n,r){Array.isArray(n)||(n&&(Em[0]=n.toString()),n=Em);for(var i=0;i<n.length;i++){var s=o0(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function g0(t){Kd(t.g,function(e,n){this.g.hasOwnProperty(n)&&Qd(e)},t),t.g={}}Xs.prototype.M=function(){Xs.X.M.call(this),g0(this)};Xs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function ql(){this.g=!0}ql.prototype.Aa=function(){this.g=!1};function Pk(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",l=s.split("&"),u=0;u<l.length;u++){var c=l[u].split("=");if(1<c.length){var f=c[0];c=c[1];var a=f.split("_");o=2<=a.length&&a[1]=="type"?o+(f+"="+c+"&"):o+(f+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function Rk(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function oi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+Mk(t,n)+(r?" "+r:"")})}function bk(t,e){t.info(function(){return"TIMEOUT: "+e})}ql.prototype.info=function(){};function Mk(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Jd(n)}catch{return e}}var jr={},km=null;function Kl(){return km=km||new Oe}jr.Pa="serverreachability";function y0(t){Qe.call(this,jr.Pa,t)}Be(y0,Qe);function Ys(t){const e=Kl();Ue(e,new y0(e))}jr.STAT_EVENT="statevent";function v0(t,e){Qe.call(this,jr.STAT_EVENT,t),this.stat=e}Be(v0,Qe);function rt(t){const e=Kl();Ue(e,new v0(e,t))}jr.Qa="timingevent";function w0(t,e){Qe.call(this,jr.Qa,t),this.size=e}Be(w0,Qe);function _o(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return j.setTimeout(function(){t()},e)}var Wl={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},_0={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function tf(){}tf.prototype.h=null;function Im(t){return t.h||(t.h=t.i())}function T0(){}var To={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function nf(){Qe.call(this,"d")}Be(nf,Qe);function rf(){Qe.call(this,"c")}Be(rf,Qe);var Ih;function Ql(){}Be(Ql,tf);Ql.prototype.g=function(){return new XMLHttpRequest};Ql.prototype.i=function(){return{}};Ih=new Ql;function So(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new Xs(this),this.O=Ok,t=wh?125:void 0,this.T=new Gl(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new S0}function S0(){this.i=null,this.g="",this.h=!1}var Ok=45e3,Ch={},ul={};O=So.prototype;O.setTimeout=function(t){this.O=t};function Ah(t,e,n){t.K=1,t.v=Yl(gn(e)),t.s=n,t.P=!0,E0(t,null)}function E0(t,e){t.F=Date.now(),Eo(t),t.A=gn(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),P0(n.i,"t",r),t.C=0,n=t.l.H,t.h=new S0,t.g=J0(t.l,n?e:null,!t.s),0<t.N&&(t.L=new Dk(We(t.La,t,t.g),t.N)),m0(t.S,t.g,"readystatechange",t.ib),e=t.H?i0(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),Ys(),Pk(t.j,t.u,t.A,t.m,t.U,t.s)}O.ib=function(t){t=t.target;const e=this.L;e&&ln(t)==3?e.l():this.La(t)};O.La=function(t){try{if(t==this.g)e:{const f=ln(this.g);var e=this.g.Ea();const a=this.g.aa();if(!(3>f)&&(f!=3||wh||this.g&&(this.h.h||this.g.fa()||Nm(this.g)))){this.I||f!=4||e==7||(e==8||0>=a?Ys(3):Ys(2)),Xl(this);var n=this.g.aa();this.Y=n;t:if(k0(this)){var r=Nm(this.g);t="";var i=r.length,s=ln(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_r(this),Is(this);var o="";break t}this.h.i=new j.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,Rk(this.j,this.u,this.A,this.m,this.U,f,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var l,u=this.g;if((l=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!al(l)){var c=l;break t}}c=null}if(n=c)oi(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xh(this,n);else{this.i=!1,this.o=3,rt(12),_r(this),Is(this);break e}}this.P?(I0(this,f,o),wh&&this.i&&f==3&&(m0(this.S,this.T,"tick",this.hb),this.T.start())):(oi(this.j,this.m,o,null),xh(this,o)),f==4&&_r(this),this.i&&!this.I&&(f==4?W0(this.l,this):(this.i=!1,Eo(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,rt(12)):(this.o=0,rt(13)),_r(this),Is(this)}}}catch{}finally{}};function k0(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function I0(t,e,n){let r=!0,i;for(;!t.I&&t.C<n.length;)if(i=Lk(t,n),i==ul){e==4&&(t.o=4,rt(14),r=!1),oi(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Ch){t.o=4,rt(15),oi(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else oi(t.j,t.m,i,null),xh(t,i);k0(t)&&i!=ul&&i!=Ch&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,rt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),hf(e),e.K=!0,rt(11))):(oi(t.j,t.m,n,"[Invalid Chunked Response]"),_r(t),Is(t))}O.hb=function(){if(this.g){var t=ln(this.g),e=this.g.fa();this.C<e.length&&(Xl(this),I0(this,t,e),this.i&&t!=4&&Eo(this))}};function Lk(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?ul:(n=Number(e.substring(n,r)),isNaN(n)?Ch:(r+=1,r+n>e.length?ul:(e=e.substr(r,n),t.C=r+n,e)))}O.cancel=function(){this.I=!0,_r(this)};function Eo(t){t.V=Date.now()+t.O,C0(t,t.O)}function C0(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=_o(We(t.gb,t),e)}function Xl(t){t.B&&(j.clearTimeout(t.B),t.B=null)}O.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(bk(this.j,this.A),this.K!=2&&(Ys(),rt(17)),_r(this),this.o=2,Is(this)):C0(this,this.V-t)};function Is(t){t.l.G==0||t.I||W0(t.l,t)}function _r(t){Xl(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Zd(t.T),g0(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function xh(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||Nh(n.h,t))){if(!t.J&&Nh(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)dl(n),eu(n);else break e;cf(n),rt(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&n.A==0&&!n.v&&(n.v=_o(We(n.cb,n),6e3));if(1>=M0(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else Tr(n,11)}else if((t.J||n.g==t)&&dl(n),!al(e))for(i=n.Fa.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.T=c[0],c=c[1],n.G==2)if(c[0]=="c"){n.I=c[1],n.ka=c[2];const f=c[3];f!=null&&(n.ma=f,n.j.info("VER="+n.ma));const a=c[4];a!=null&&(n.Ca=a,n.j.info("SVER="+n.Ca));const h=c[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=t.g;if(d){const m=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var s=r.h;s.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(sf(s,s.h),s.h=null))}if(r.D){const y=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;y&&(r.za=y,fe(r.F,r.D,y))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=Y0(r,r.H?r.ka:null,r.V),o.J){O0(r.h,o);var l=o,u=r.J;u&&l.setTimeout(u),l.B&&(Xl(l),Eo(l)),r.g=o}else q0(r);0<n.i.length&&tu(n)}else c[0]!="stop"&&c[0]!="close"||Tr(n,7);else n.G==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Tr(n,7):uf(n):c[0]!="noop"&&n.l&&n.l.wa(c),n.A=0)}}Ys(4)}catch{}}function $k(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Bl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function Fk(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Bl(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function A0(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Bl(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=Fk(t),r=$k(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var x0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Uk(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Ar(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ar){this.h=e!==void 0?e:t.h,cl(this,t.j),this.s=t.s,this.g=t.g,hl(this,t.m),this.l=t.l,e=t.i;var n=new Js;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Cm(this,n),this.o=t.o}else t&&(n=String(t).match(x0))?(this.h=!!e,cl(this,n[1]||"",!0),this.s=hs(n[2]||""),this.g=hs(n[3]||"",!0),hl(this,n[4]),this.l=hs(n[5]||"",!0),Cm(this,n[6]||"",!0),this.o=hs(n[7]||"")):(this.h=!!e,this.i=new Js(null,this.h))}Ar.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ds(e,Am,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(ds(e,Am,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(ds(n,n.charAt(0)=="/"?jk:Bk,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ds(n,Hk)),t.join("")};function gn(t){return new Ar(t)}function cl(t,e,n){t.j=n?hs(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function hl(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Cm(t,e,n){e instanceof Js?(t.i=e,Gk(t.i,t.h)):(n||(e=ds(e,zk)),t.i=new Js(e,t.h))}function fe(t,e,n){t.i.set(e,n)}function Yl(t){return fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function hs(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ds(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Vk),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Vk(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Am=/[#\/\?@]/g,Bk=/[#\?:]/g,jk=/[#\?]/g,zk=/[#\?@]/g,Hk=/#/g;function Js(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function lr(t){t.g||(t.g=new Map,t.h=0,t.i&&Uk(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}O=Js.prototype;O.add=function(t,e){lr(this),this.i=null,t=Gi(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function N0(t,e){lr(t),e=Gi(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function D0(t,e){return lr(t),e=Gi(t,e),t.g.has(e)}O.forEach=function(t,e){lr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};O.oa=function(){lr(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};O.W=function(t){lr(this);let e=[];if(typeof t=="string")D0(this,t)&&(e=e.concat(this.g.get(Gi(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};O.set=function(t,e){return lr(this),this.i=null,t=Gi(this,t),D0(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};O.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function P0(t,e,n){N0(t,e),0<n.length&&(t.i=null,t.g.set(Gi(t,e),Gd(n)),t.h+=n.length)}O.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Gi(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function Gk(t,e){e&&!t.j&&(lr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(N0(this,r),P0(this,i,n))},t)),t.j=e}var qk=class{constructor(t,e){this.h=t,this.g=e}};function R0(t){this.l=t||Kk,j.PerformanceNavigationTiming?(t=j.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(j.g&&j.g.Ga&&j.g.Ga()&&j.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kk=10;function b0(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function M0(t){return t.h?1:t.g?t.g.size:0}function Nh(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function sf(t,e){t.g?t.g.add(e):t.h=e}function O0(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}R0.prototype.cancel=function(){if(this.i=L0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function L0(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Gd(t.i)}function of(){}of.prototype.stringify=function(t){return j.JSON.stringify(t,void 0)};of.prototype.parse=function(t){return j.JSON.parse(t,void 0)};function Wk(){this.g=new of}function Qk(t,e,n){const r=n||"";try{A0(t,function(i,s){let o=i;vo(i)&&(o=Jd(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Xk(t,e){const n=new ql;if(j.Image){const r=new Image;r.onload=sa(aa,n,r,"TestLoadImage: loaded",!0,e),r.onerror=sa(aa,n,r,"TestLoadImage: error",!1,e),r.onabort=sa(aa,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=sa(aa,n,r,"TestLoadImage: timeout",!1,e),j.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function aa(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ko(t){this.l=t.ac||null,this.j=t.jb||!1}Be(ko,tf);ko.prototype.g=function(){return new Jl(this.l,this.j)};ko.prototype.i=function(t){return function(){return t}}({});function Jl(t,e){Oe.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=af,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Be(Jl,Oe);var af=0;O=Jl.prototype;O.open=function(t,e){if(this.readyState!=af)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Zs(this)};O.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||j).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};O.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=af};O.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Zs(this)),this.g&&(this.readyState=3,Zs(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof j.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$0(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function $0(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}O.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Io(this):Zs(this),this.readyState==3&&$0(this)}};O.Va=function(t){this.g&&(this.response=this.responseText=t,Io(this))};O.Ua=function(t){this.g&&(this.response=t,Io(this))};O.ga=function(){this.g&&Io(this)};function Io(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Zs(t)}O.setRequestHeader=function(t,e){this.v.append(t,e)};O.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};O.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function Zs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Jl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Yk=j.JSON.parse;function ve(t){Oe.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=F0,this.K=this.L=!1}Be(ve,Oe);var F0="",Jk=/^https?$/i,Zk=["POST","PUT"];O=ve.prototype;O.Ka=function(t){this.L=t};O.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ih.g(),this.C=this.u?Im(this.u):Im(Ih),this.g.onreadystatechange=We(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(s){xm(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=j.FormData&&t instanceof j.FormData,!(0<=e0(Zk,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{B0(this),0<this.B&&((this.K=eI(this.g))?(this.g.timeout=this.B,this.g.ontimeout=We(this.qa,this)):this.A=ef(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){xm(this,s)}};function eI(t){return Pi&&yk()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}O.qa=function(){typeof Hd<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ue(this,"timeout"),this.abort(8))};function xm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,U0(t),Zl(t)}function U0(t){t.D||(t.D=!0,Ue(t,"complete"),Ue(t,"error"))}O.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ue(this,"complete"),Ue(this,"abort"),Zl(this))};O.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zl(this,!0)),ve.X.M.call(this)};O.Ha=function(){this.s||(this.F||this.v||this.l?V0(this):this.fb())};O.fb=function(){V0(this)};function V0(t){if(t.h&&typeof Hd<"u"&&(!t.C[1]||ln(t)!=4||t.aa()!=2)){if(t.v&&ln(t)==4)ef(t.Ha,0,t);else if(Ue(t,"readystatechange"),ln(t)==4){t.h=!1;try{const l=t.aa();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=l===0){var i=String(t.H).match(x0)[1]||null;if(!i&&j.self&&j.self.location){var s=j.self.location.protocol;i=s.substr(0,s.length-1)}r=!Jk.test(i?i.toLowerCase():"")}n=r}if(n)Ue(t,"complete"),Ue(t,"success");else{t.m=6;try{var o=2<ln(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",U0(t)}}finally{Zl(t)}}}}function Zl(t,e){if(t.g){B0(t);const n=t.g,r=t.C[0]?ol:null;t.g=null,t.C=null,e||Ue(t,"ready");try{n.onreadystatechange=r}catch{}}}function B0(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(j.clearTimeout(t.A),t.A=null)}function ln(t){return t.g?t.g.readyState:0}O.aa=function(){try{return 2<ln(this)?this.g.status:-1}catch{return-1}};O.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};O.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Yk(e)}};function Nm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case F0:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}O.Ea=function(){return this.m};O.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function j0(t){let e="";return Kd(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function lf(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=j0(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):fe(t,e,n))}function os(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function z0(t){this.Ca=0,this.i=[],this.j=new ql,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=os("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=os("baseRetryDelayMs",5e3,t),this.bb=os("retryDelaySeedMs",1e4,t),this.$a=os("forwardChannelMaxRetries",2,t),this.ta=os("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new R0(t&&t.concurrentRequestLimit),this.Fa=new Wk,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}O=z0.prototype;O.ma=8;O.G=1;function uf(t){if(H0(t),t.G==3){var e=t.U++,n=gn(t.F);fe(n,"SID",t.I),fe(n,"RID",e),fe(n,"TYPE","terminate"),Co(t,n),e=new So(t,t.j,e,void 0),e.K=2,e.v=Yl(gn(n)),n=!1,j.navigator&&j.navigator.sendBeacon&&(n=j.navigator.sendBeacon(e.v.toString(),"")),!n&&j.Image&&(new Image().src=e.v,n=!0),n||(e.g=J0(e.l,null),e.g.da(e.v)),e.F=Date.now(),Eo(e)}X0(t)}function eu(t){t.g&&(hf(t),t.g.cancel(),t.g=null)}function H0(t){eu(t),t.u&&(j.clearTimeout(t.u),t.u=null),dl(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&j.clearTimeout(t.m),t.m=null)}function tu(t){b0(t.h)||t.m||(t.m=!0,d0(t.Ja,t),t.C=0)}function tI(t,e){return M0(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=_o(We(t.Ja,t,e),Q0(t,t.C)),t.C++,!0)}O.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const i=new So(this,this.j,t,void 0);let s=this.s;if(this.S&&(s?(s=i0(s),s0(s,this.S)):s=this.S),this.o!==null||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=G0(this,i,e),n=gn(this.F),fe(n,"RID",t),fe(n,"CVER",22),this.D&&fe(n,"X-HTTP-Session-Id",this.D),Co(this,n),s&&(this.N?e="headers="+encodeURIComponent(String(j0(s)))+"&"+e:this.o&&lf(n,this.o,s)),sf(this.h,i),this.Ya&&fe(n,"TYPE","init"),this.O?(fe(n,"$req",e),fe(n,"SID","null"),i.Z=!0,Ah(i,n,null)):Ah(i,n,e),this.G=2}}else this.G==3&&(t?Dm(this,t):this.i.length==0||b0(this.h)||Dm(this))};function Dm(t,e){var n;e?n=e.m:n=t.U++;const r=gn(t.F);fe(r,"SID",t.I),fe(r,"RID",n),fe(r,"AID",t.T),Co(t,r),t.o&&t.s&&lf(r,t.o,t.s),n=new So(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=G0(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),sf(t.h,n),Ah(n,r,e)}function Co(t,e){t.ia&&Kd(t.ia,function(n,r){fe(e,r,n)}),t.l&&A0({},function(n,r){fe(e,r,n)})}function G0(t,e,n){n=Math.min(t.i.length,n);var r=t.l?We(t.l.Ra,t.l,t):null;e:{var i=t.i;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].h,o.push("ofs="+s)):s=0:o.push("ofs="+s);let l=!0;for(let u=0;u<n;u++){let c=i[u].h;const f=i[u].g;if(c-=s,0>c)s=Math.max(0,i[u].h-100),l=!1;else try{Qk(f,o,"req"+c+"_")}catch{r&&r(f)}}if(l){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function q0(t){t.g||t.u||(t.Z=1,d0(t.Ia,t),t.A=0)}function cf(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=_o(We(t.Ia,t),Q0(t,t.A)),t.A++,!0)}O.Ia=function(){if(this.u=null,K0(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=_o(We(this.eb,this),t)}};O.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,rt(10),eu(this),K0(this))};function hf(t){t.B!=null&&(j.clearTimeout(t.B),t.B=null)}function K0(t){t.g=new So(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=gn(t.sa);fe(e,"RID","rpc"),fe(e,"SID",t.I),fe(e,"CI",t.L?"0":"1"),fe(e,"AID",t.T),fe(e,"TYPE","xmlhttp"),Co(t,e),t.o&&t.s&&lf(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Yl(gn(e)),n.s=null,n.P=!0,E0(n,t)}O.cb=function(){this.v!=null&&(this.v=null,eu(this),cf(this),rt(19))};function dl(t){t.v!=null&&(j.clearTimeout(t.v),t.v=null)}function W0(t,e){var n=null;if(t.g==e){dl(t),hf(t),t.g=null;var r=2}else if(Nh(t.h,e))n=e.D,O0(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;r=Kl(),Ue(r,new w0(r,n)),tu(t)}else q0(t);else if(i=e.o,i==3||i==0&&0<t.pa||!(r==1&&tI(t,e)||r==2&&cf(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),i){case 1:Tr(t,5);break;case 4:Tr(t,10);break;case 3:Tr(t,6);break;default:Tr(t,2)}}}function Q0(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function Tr(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=We(t.kb,t);n||(n=new Ar("//www.google.com/images/cleardot.gif"),j.location&&j.location.protocol=="http"||cl(n,"https"),Yl(n)),Xk(n.toString(),r)}else rt(2);t.G=0,t.l&&t.l.va(e),X0(t),H0(t)}O.kb=function(t){t?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function X0(t){if(t.G=0,t.la=[],t.l){const e=L0(t.h);(e.length!=0||t.i.length!=0)&&(wm(t.la,e),wm(t.la,t.i),t.h.i.length=0,Gd(t.i),t.i.length=0),t.l.ua()}}function Y0(t,e,n){var r=n instanceof Ar?gn(n):new Ar(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),hl(r,r.m);else{var i=j.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Ar(null,void 0);r&&cl(s,r),e&&(s.g=e),i&&hl(s,i),n&&(s.l=n),r=s}return n=t.D,e=t.za,n&&e&&fe(r,n,e),fe(r,"VER",t.ma),Co(t,r),r}function J0(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new ve(new ko({jb:!0})):new ve(t.ra),e.Ka(t.H),e}function Z0(){}O=Z0.prototype;O.xa=function(){};O.wa=function(){};O.va=function(){};O.ua=function(){};O.Ra=function(){};function fl(){if(Pi&&!(10<=Number(vk)))throw Error("Environmental error: no available transport.")}fl.prototype.g=function(t,e){return new Tt(t,e)};function Tt(t,e){Oe.call(this),this.g=new z0(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!al(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!al(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new qi(this)}Be(Tt,Oe);Tt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;rt(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=Y0(t,null,t.V),tu(t)};Tt.prototype.close=function(){uf(this.g)};Tt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Jd(t),t=n);e.i.push(new qk(e.ab++,t)),e.G==3&&tu(e)};Tt.prototype.M=function(){this.g.l=null,delete this.j,uf(this.g),delete this.g,Tt.X.M.call(this)};function ew(t){nf.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Be(ew,nf);function tw(){rf.call(this),this.status=1}Be(tw,rf);function qi(t){this.g=t}Be(qi,Z0);qi.prototype.xa=function(){Ue(this.g,"a")};qi.prototype.wa=function(t){Ue(this.g,new ew(t))};qi.prototype.va=function(t){Ue(this.g,new tw)};qi.prototype.ua=function(){Ue(this.g,"b")};fl.prototype.createWebChannel=fl.prototype.g;Tt.prototype.send=Tt.prototype.u;Tt.prototype.open=Tt.prototype.m;Tt.prototype.close=Tt.prototype.close;Wl.NO_ERROR=0;Wl.TIMEOUT=8;Wl.HTTP_ERROR=6;_0.COMPLETE="complete";T0.EventType=To;To.OPEN="a";To.CLOSE="b";To.ERROR="c";To.MESSAGE="d";Oe.prototype.listen=Oe.prototype.N;ve.prototype.listenOnce=ve.prototype.O;ve.prototype.getLastError=ve.prototype.Oa;ve.prototype.getLastErrorCode=ve.prototype.Ea;ve.prototype.getStatus=ve.prototype.aa;ve.prototype.getResponseJson=ve.prototype.Sa;ve.prototype.getResponseText=ve.prototype.fa;ve.prototype.send=ve.prototype.da;ve.prototype.setWithCredentials=ve.prototype.Ka;var nI=function(){return new fl},rI=function(){return Kl()},dc=Wl,iI=_0,sI=jr,Pm={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},oI=ko,la=T0,aI=ve;const Rm="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ki="9.17.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Bd("@firebase/firestore");function bm(){return $r.logLevel}function $(t,...e){if($r.logLevel<=te.DEBUG){const n=e.map(df);$r.debug(`Firestore (${Ki}): ${t}`,...n)}}function yn(t,...e){if($r.logLevel<=te.ERROR){const n=e.map(df);$r.error(`Firestore (${Ki}): ${t}`,...n)}}function Dh(t,...e){if($r.logLevel<=te.WARN){const n=e.map(df);$r.warn(`Firestore (${Ki}): ${t}`,...n)}}function df(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t="Unexpected state"){const e=`FIRESTORE (${Ki}) INTERNAL ASSERTION FAILED: `+t;throw yn(e),new Error(e)}function ae(t,e){t||V()}function H(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class R extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(He.UNAUTHENTICATED))}shutdown(){}}class uI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cI{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Kn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Kn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Kn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string"),new nw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new He(e)}}class hI{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=He.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ae(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class dI{constructor(e,n,r,i){this.h=e,this.l=n,this.m=r,this.g=i}getToken(){return Promise.resolve(new hI(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pI{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.A;return this.A=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ae(typeof n.token=="string"),this.A=n.token,new fI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mI(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ne(t,e){return t<e?-1:t>e?1:0}function Ri(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new R(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new R(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new R(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ae(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new z(e)}static min(){return new z(new Ae(0,0))}static max(){return new z(new Ae(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,n,r){n===void 0?n=0:n>e.length&&V(),r===void 0?r=e.length-n:r>e.length-n&&V(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return eo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof eo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ue extends eo{construct(e,n,r){return new ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new R(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ue(n)}static emptyPath(){return new ue([])}}const gI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ke extends eo{construct(e,n,r){return new Ke(e,n,r)}static isValidIdentifier(e){return gI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ke.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ke(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new R(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new R(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new R(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new R(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ke(n)}static emptyPath(){return new Ke([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.path=e}static fromPath(e){return new F(ue.fromString(e))}static fromName(e){return new F(ue.fromString(e).popFirst(5))}static empty(){return new F(ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new F(new ue(e.slice()))}}function yI(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=z.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new Jn(i,F.empty(),e)}function vI(t){return new Jn(t.readTime,t.key,-1)}class Jn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Jn(z.min(),F.empty(),-1)}static max(){return new Jn(z.max(),F.empty(),-1)}}function wI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=F.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ao(t){if(t.code!==S.FAILED_PRECONDITION||t.message!==_I)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&V(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new C((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof C?n:C.resolve(n)}catch(n){return C.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):C.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):C.reject(n)}static resolve(e){return new C((n,r)=>{n(e)})}static reject(e){return new C((n,r)=>{r(e)})}static waitFor(e){return new C((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=C.resolve(!1);for(const r of e)n=n.next(i=>i?C.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new C((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(f=>{o[c]=f,++l,l===s&&r(o)},f=>i(f))}})}static doWhile(e,n){return new C((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function xo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}ff.at=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e,n,r,i,s,o,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.useFetchStreams=u}}class to{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new to("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof to&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function iw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){return t==null}function pl(t){return t===0&&1/t==-1/0}function EI(t){return typeof t=="number"&&Number.isInteger(t)&&!pl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(i){throw i instanceof DOMException?new kI("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const II=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zn(t){if(ae(!!t),typeof t=="string"){let e=0;const n=II.exec(t);if(ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function bi(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ow(t){const e=t.mapValue.fields.__previous_value__;return sw(e)?ow(e):e}function no(t){const e=Zn(t.mapValue.fields.__local_write_time__.timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Fr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sw(t)?4:CI(t)?9007199254740991:10:V()}function Yt(t,e){if(t===e)return!0;const n=Fr(t);if(n!==Fr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return no(t).isEqual(no(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Zn(r.timestampValue),o=Zn(i.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return bi(r.bytesValue).isEqual(bi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return Se(r.geoPointValue.latitude)===Se(i.geoPointValue.latitude)&&Se(r.geoPointValue.longitude)===Se(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Se(r.integerValue)===Se(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=Se(r.doubleValue),o=Se(i.doubleValue);return s===o?pl(s)===pl(o):isNaN(s)&&isNaN(o)}return!1}(t,e);case 9:return Ri(t.arrayValue.values||[],e.arrayValue.values||[],Yt);case 10:return function(r,i){const s=r.mapValue.fields||{},o=i.mapValue.fields||{};if(Mm(s)!==Mm(o))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(o[l]===void 0||!Yt(s[l],o[l])))return!1;return!0}(t,e);default:return V()}}function ro(t,e){return(t.values||[]).find(n=>Yt(n,e))!==void 0}function Mi(t,e){if(t===e)return 0;const n=Fr(t),r=Fr(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(i,s){const o=Se(i.integerValue||i.doubleValue),l=Se(s.integerValue||s.doubleValue);return o<l?-1:o>l?1:o===l?0:isNaN(o)?isNaN(l)?0:-1:1}(t,e);case 3:return Om(t.timestampValue,e.timestampValue);case 4:return Om(no(t),no(e));case 5:return ne(t.stringValue,e.stringValue);case 6:return function(i,s){const o=bi(i),l=bi(s);return o.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,s){const o=i.split("/"),l=s.split("/");for(let u=0;u<o.length&&u<l.length;u++){const c=ne(o[u],l[u]);if(c!==0)return c}return ne(o.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,s){const o=ne(Se(i.latitude),Se(s.latitude));return o!==0?o:ne(Se(i.longitude),Se(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(i,s){const o=i.values||[],l=s.values||[];for(let u=0;u<o.length&&u<l.length;++u){const c=Mi(o[u],l[u]);if(c)return c}return ne(o.length,l.length)}(t.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===ua.mapValue&&s===ua.mapValue)return 0;if(i===ua.mapValue)return 1;if(s===ua.mapValue)return-1;const o=i.fields||{},l=Object.keys(o),u=s.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let f=0;f<l.length&&f<c.length;++f){const a=ne(l[f],c[f]);if(a!==0)return a;const h=Mi(o[l[f]],u[c[f]]);if(h!==0)return h}return ne(l.length,c.length)}(t.mapValue,e.mapValue);default:throw V()}}function Om(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const n=Zn(t),r=Zn(e),i=ne(n.seconds,r.seconds);return i!==0?i:ne(n.nanos,r.nanos)}function Oi(t){return Ph(t)}function Ph(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Zn(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?bi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,F.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=Ph(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${Ph(r.fields[l])}`;return s+"}"}(t.mapValue):V();var e,n}function Lm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Rh(t){return!!t&&"integerValue"in t}function pf(t){return!!t&&"arrayValue"in t}function $m(t){return!!t&&"nullValue"in t}function Fm(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ia(t){return!!t&&"mapValue"in t}function Cs(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Cs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Cs(t.arrayValue.values[n]);return e}return Object.assign({},t)}function CI(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e,n){this.position=e,this.inclusive=n}}function Um(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=F.comparator(F.fromName(o.referenceValue),n.key):r=Mi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Yt(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{}class ke extends aw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new xI(e,n,r):n==="array-contains"?new PI(e,r):n==="in"?new RI(e,r):n==="not-in"?new bI(e,r):n==="array-contains-any"?new MI(e,r):new ke(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new NI(e,r):new DI(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Mi(n,this.value)):n!==null&&Fr(this.value)===Fr(n)&&this.matchesComparison(Mi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return V()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Ft extends aw{constructor(e,n){super(),this.filters=e,this.op=n,this.ft=null}static create(e,n){return new Ft(e,n)}matches(e){return lw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ft!==null||(this.ft=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ft}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.dt(n=>n.isInequality());return e!==null?e.field:null}dt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function lw(t){return t.op==="and"}function uw(t){return AI(t)&&lw(t)}function AI(t){for(const e of t.filters)if(e instanceof Ft)return!1;return!0}function bh(t){if(t instanceof ke)return t.field.canonicalString()+t.op.toString()+Oi(t.value);if(uw(t))return t.filters.map(e=>bh(e)).join(",");{const e=t.filters.map(n=>bh(n)).join(",");return`${t.op}(${e})`}}function cw(t,e){return t instanceof ke?function(n,r){return r instanceof ke&&n.op===r.op&&n.field.isEqual(r.field)&&Yt(n.value,r.value)}(t,e):t instanceof Ft?function(n,r){return r instanceof Ft&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,s,o)=>i&&cw(s,r.filters[o]),!0):!1}(t,e):void V()}function hw(t){return t instanceof ke?function(e){return`${e.field.canonicalString()} ${e.op} ${Oi(e.value)}`}(t):t instanceof Ft?function(e){return e.op.toString()+" {"+e.getFilters().map(hw).join(" ,")+"}"}(t):"Filter"}class xI extends ke{constructor(e,n,r){super(e,n,r),this.key=F.fromName(r.referenceValue)}matches(e){const n=F.comparator(e.key,this.key);return this.matchesComparison(n)}}class NI extends ke{constructor(e,n){super(e,"in",n),this.keys=dw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DI extends ke{constructor(e,n){super(e,"not-in",n),this.keys=dw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function dw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>F.fromName(r.referenceValue))}class PI extends ke{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return pf(n)&&ro(n.arrayValue,this.value)}}class RI extends ke{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ro(this.value.arrayValue,n)}}class bI extends ke{constructor(e,n){super(e,"not-in",n)}matches(e){if(ro(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ro(this.value.arrayValue,n)}}class MI extends ke{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!pf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ro(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,n="asc"){this.field=e,this.dir=n}}function OI(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e,n){this.comparator=e,this.root=n||$e.EMPTY}insert(e,n){return new De(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,$e.BLACK,null,null))}remove(e){return new De(this.comparator,this.root.remove(e,this.comparator).copy(null,null,$e.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ca(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ca(this.root,e,this.comparator,!1)}getReverseIterator(){return new ca(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ca(this.root,e,this.comparator,!0)}}class ca{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class $e{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r!=null?r:$e.RED,this.left=i!=null?i:$e.EMPTY,this.right=s!=null?s:$e.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new $e(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,s!=null?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return $e.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return $e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,$e.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,$e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw V();const e=this.left.check();if(e!==this.right.check())throw V();return e+(this.isRed()?0:1)}}$e.EMPTY=null,$e.RED=!0,$e.BLACK=!1;$e.EMPTY=new class{constructor(){this.size=0}get key(){throw V()}get value(){throw V()}get color(){throw V()}get left(){throw V()}get right(){throw V()}copy(t,e,n,r,i){return this}insert(t,e,n){return new $e(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Bm(this.data.getIterator())}getIteratorFrom(e){return new Bm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xe(this.comparator);return n.data=e,n}}class Bm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.fields=e,e.sort(Ke.comparator)}static empty(){return new vt([])}unionWith(e){let n=new xe(Ke.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ri(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.value=e}static empty(){return new ut({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ia(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Cs(n)}setAll(e){let n=Ke.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Cs(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ia(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Yt(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ia(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){zr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ut(Cs(this.value))}}function fw(t){const e=[];return zr(t.fields,(n,r)=>{const i=new Ke([n]);if(Ia(r)){const s=fw(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new qe(e,0,z.min(),z.min(),z.min(),ut.empty(),0)}static newFoundDocument(e,n,r,i){return new qe(e,1,n,z.min(),r,i,0)}static newNoDocument(e,n){return new qe(e,2,n,z.min(),z.min(),ut.empty(),0)}static newUnknownDocument(e,n){return new qe(e,3,n,z.min(),z.min(),ut.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ut.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ut.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this._t=null}}function jm(t,e=null,n=[],r=[],i=null,s=null,o=null){return new LI(t,e,n,r,i,s,o)}function mf(t){const e=H(t);if(e._t===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>bh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),nu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oi(r)).join(",")),e._t=n}return e._t}function gf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!OI(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!cw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vm(t.startAt,e.startAt)&&Vm(t.endAt,e.endAt)}function Mh(t){return F.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.wt=null,this.gt=null,this.startAt,this.endAt}}function $I(t,e,n,r,i,s,o,l){return new Wi(t,e,n,r,i,s,o,l)}function ru(t){return new Wi(t)}function zm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yf(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function iu(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function pw(t){return t.collectionGroup!==null}function yi(t){const e=H(t);if(e.wt===null){e.wt=[];const n=iu(e),r=yf(e);if(n!==null&&r===null)n.isKeyField()||e.wt.push(new gi(n)),e.wt.push(new gi(Ke.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new gi(Ke.keyField(),s))}}}return e.wt}function vn(t){const e=H(t);if(!e.gt)if(e.limitType==="F")e.gt=jm(e.path,e.collectionGroup,yi(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of yi(e)){const o=s.dir==="desc"?"asc":"desc";n.push(new gi(s.field,o))}const r=e.endAt?new ml(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new ml(e.startAt.position,e.startAt.inclusive):null;e.gt=jm(e.path,e.collectionGroup,n,e.filters,e.limit,r,i)}return e.gt}function Oh(t,e){e.getFirstInequalityField(),iu(t);const n=t.filters.concat([e]);return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gl(t,e,n){return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function No(t,e){return gf(vn(t),vn(e))&&t.limitType===e.limitType}function mw(t){return`${mf(vn(t))}|lt:${t.limitType}`}function Lh(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>hw(r)).join(", ")}]`),nu(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(i){return`${i.field.canonicalString()} (${i.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oi(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oi(r)).join(",")),`Target(${n})`}(vn(t))}; limitType=${t.limitType})`}function su(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):F.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of yi(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(i,s,o){const l=Um(i,s,o);return i.inclusive?l<=0:l<0}(n.startAt,yi(n),r)||n.endAt&&!function(i,s,o){const l=Um(i,s,o);return i.inclusive?l>=0:l>0}(n.endAt,yi(n),r))}(t,e)}function FI(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function gw(t){return(e,n)=>{let r=!1;for(const i of yi(t)){const s=UI(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function UI(t,e,n){const r=t.field.isKeyField()?F.comparator(e.key,n.key):function(i,s,o){const l=s.data.field(i),u=o.data.field(i);return l!==null&&u!==null?Mi(l,u):V()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return V()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t,e){if(t.yt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pl(e)?"-0":e}}function vw(t){return{integerValue:""+t}}function VI(t,e){return EI(e)?vw(e):yw(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){this._=void 0}}function BI(t,e,n){return t instanceof yl?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(n,e):t instanceof io?_w(t,e):t instanceof so?Tw(t,e):function(r,i){const s=ww(r,i),o=Hm(s)+Hm(r.It);return Rh(s)&&Rh(r.It)?vw(o):yw(r.Tt,o)}(t,e)}function jI(t,e,n){return t instanceof io?_w(t,e):t instanceof so?Tw(t,e):n}function ww(t,e){return t instanceof vl?Rh(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class yl extends ou{}class io extends ou{constructor(e){super(),this.elements=e}}function _w(t,e){const n=Sw(e);for(const r of t.elements)n.some(i=>Yt(i,r))||n.push(r);return{arrayValue:{values:n}}}class so extends ou{constructor(e){super(),this.elements=e}}function Tw(t,e){let n=Sw(e);for(const r of t.elements)n=n.filter(i=>!Yt(i,r));return{arrayValue:{values:n}}}class vl extends ou{constructor(e,n){super(),this.Tt=e,this.It=n}}function Hm(t){return Se(t.integerValue||t.doubleValue)}function Sw(t){return pf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zI(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof io&&r instanceof io||n instanceof so&&r instanceof so?Ri(n.elements,r.elements,Yt):n instanceof vl&&r instanceof vl?Yt(n.It,r.It):n instanceof yl&&r instanceof yl}(t.transform,e.transform)}class HI{constructor(e,n){this.version=e,this.transformResults=n}}class qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new qt}static exists(e){return new qt(void 0,e)}static updateTime(e){return new qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ca(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class au{}function Ew(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Iw(t.key,qt.none()):new Do(t.key,t.data,qt.none());{const n=t.data,r=ut.empty();let i=new xe(Ke.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ur(t.key,r,new vt(i.toArray()),qt.none())}}function GI(t,e,n){t instanceof Do?function(r,i,s){const o=r.value.clone(),l=qm(r.fieldTransforms,i,s.transformResults);o.setAll(l),i.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(t,e,n):t instanceof ur?function(r,i,s){if(!Ca(r.precondition,i))return void i.convertToUnknownDocument(s.version);const o=qm(r.fieldTransforms,i,s.transformResults),l=i.data;l.setAll(kw(r)),l.setAll(o),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(r,i,s){i.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function As(t,e,n,r){return t instanceof Do?function(i,s,o,l){if(!Ca(i.precondition,s))return o;const u=i.value.clone(),c=Km(i.fieldTransforms,l,s);return u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ur?function(i,s,o,l){if(!Ca(i.precondition,s))return o;const u=Km(i.fieldTransforms,l,s),c=s.data;return c.setAll(kw(i)),c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),o===null?null:o.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,s,o){return Ca(i.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o}(t,e,n)}function qI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=ww(r.transform,i||null);s!=null&&(n===null&&(n=ut.empty()),n.set(r.field,s))}return n||null}function Gm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&Ri(n,r,(i,s)=>zI(i,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Do extends au{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ur extends au{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qm(t,e,n){const r=new Map;ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,jI(o,l,n[i]))}return r}function Km(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,BI(s,o,e))}return r}class Iw extends au{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KI extends au{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.count=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te,J;function QI(t){switch(t){default:return V();case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0}}function Cw(t){if(t===void 0)return yn("GRPC error has no .code"),S.UNKNOWN;switch(t){case Te.OK:return S.OK;case Te.CANCELLED:return S.CANCELLED;case Te.UNKNOWN:return S.UNKNOWN;case Te.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case Te.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case Te.INTERNAL:return S.INTERNAL;case Te.UNAVAILABLE:return S.UNAVAILABLE;case Te.UNAUTHENTICATED:return S.UNAUTHENTICATED;case Te.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case Te.NOT_FOUND:return S.NOT_FOUND;case Te.ALREADY_EXISTS:return S.ALREADY_EXISTS;case Te.PERMISSION_DENIED:return S.PERMISSION_DENIED;case Te.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case Te.ABORTED:return S.ABORTED;case Te.OUT_OF_RANGE:return S.OUT_OF_RANGE;case Te.UNIMPLEMENTED:return S.UNIMPLEMENTED;case Te.DATA_LOSS:return S.DATA_LOSS;default:return V()}}(J=Te||(Te={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return iw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=new De(F.comparator);function wn(){return XI}const Aw=new De(F.comparator);function fs(...t){let e=Aw;for(const n of t)e=e.insert(n.key,n);return e}function xw(t){let e=Aw;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Sr(){return xs()}function Nw(){return xs()}function xs(){return new Qi(t=>t.toString(),(t,e)=>t.isEqual(e))}const YI=new De(F.comparator),JI=new xe(F.comparator);function Q(...t){let e=JI;for(const n of t)e=e.add(n);return e}const ZI=new xe(ne);function Dw(){return ZI}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Po.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new lu(z.min(),i,Dw(),wn(),Q())}}class Po{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Po(r,n,Q(),Q(),Q())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n,r,i){this.Et=e,this.removedTargetIds=n,this.key=r,this.At=i}}class Pw{constructor(e,n){this.targetId=e,this.Rt=n}}class Rw{constructor(e,n,r=tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Wm{constructor(){this.bt=0,this.vt=Xm(),this.Pt=tt.EMPTY_BYTE_STRING,this.Vt=!1,this.St=!0}get current(){return this.Vt}get resumeToken(){return this.Pt}get Dt(){return this.bt!==0}get Ct(){return this.St}xt(e){e.approximateByteSize()>0&&(this.St=!0,this.Pt=e)}Nt(){let e=Q(),n=Q(),r=Q();return this.vt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:V()}}),new Po(this.Pt,this.Vt,e,n,r)}kt(){this.St=!1,this.vt=Xm()}Ot(e,n){this.St=!0,this.vt=this.vt.insert(e,n)}Mt(e){this.St=!0,this.vt=this.vt.remove(e)}Ft(){this.bt+=1}$t(){this.bt-=1}Bt(){this.St=!0,this.Vt=!0}}class eC{constructor(e){this.Lt=e,this.qt=new Map,this.Ut=wn(),this.Kt=Qm(),this.Gt=new xe(ne)}Qt(e){for(const n of e.Et)e.At&&e.At.isFoundDocument()?this.jt(n,e.At):this.zt(n,e.key,e.At);for(const n of e.removedTargetIds)this.zt(n,e.key,e.At)}Wt(e){this.forEachTarget(e,n=>{const r=this.Ht(n);switch(e.state){case 0:this.Jt(n)&&r.xt(e.resumeToken);break;case 1:r.$t(),r.Dt||r.kt(),r.xt(e.resumeToken);break;case 2:r.$t(),r.Dt||this.removeTarget(n);break;case 3:this.Jt(n)&&(r.Bt(),r.xt(e.resumeToken));break;case 4:this.Jt(n)&&(this.Yt(n),r.xt(e.resumeToken));break;default:V()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.qt.forEach((r,i)=>{this.Jt(i)&&n(i)})}Zt(e){const n=e.targetId,r=e.Rt.count,i=this.Xt(n);if(i){const s=i.target;if(Mh(s))if(r===0){const o=new F(s.path);this.zt(n,o,qe.newNoDocument(o,z.min()))}else ae(r===1);else this.te(n)!==r&&(this.Yt(n),this.Gt=this.Gt.add(n))}}ee(e){const n=new Map;this.qt.forEach((s,o)=>{const l=this.Xt(o);if(l){if(s.current&&Mh(l.target)){const u=new F(l.target.path);this.Ut.get(u)!==null||this.ne(o,u)||this.zt(o,u,qe.newNoDocument(u,e))}s.Ct&&(n.set(o,s.Nt()),s.kt())}});let r=Q();this.Kt.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Xt(u);return!c||c.purpose===2||(l=!1,!1)}),l&&(r=r.add(s))}),this.Ut.forEach((s,o)=>o.setReadTime(e));const i=new lu(e,n,this.Gt,this.Ut,r);return this.Ut=wn(),this.Kt=Qm(),this.Gt=new xe(ne),i}jt(e,n){if(!this.Jt(e))return;const r=this.ne(e,n.key)?2:0;this.Ht(e).Ot(n.key,r),this.Ut=this.Ut.insert(n.key,n),this.Kt=this.Kt.insert(n.key,this.se(n.key).add(e))}zt(e,n,r){if(!this.Jt(e))return;const i=this.Ht(e);this.ne(e,n)?i.Ot(n,1):i.Mt(n),this.Kt=this.Kt.insert(n,this.se(n).delete(e)),r&&(this.Ut=this.Ut.insert(n,r))}removeTarget(e){this.qt.delete(e)}te(e){const n=this.Ht(e).Nt();return this.Lt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ft(e){this.Ht(e).Ft()}Ht(e){let n=this.qt.get(e);return n||(n=new Wm,this.qt.set(e,n)),n}se(e){let n=this.Kt.get(e);return n||(n=new xe(ne),this.Kt=this.Kt.insert(e,n)),n}Jt(e){const n=this.Xt(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Xt(e){const n=this.qt.get(e);return n&&n.Dt?null:this.Lt.ie(e)}Yt(e){this.qt.set(e,new Wm),this.Lt.getRemoteKeysForTarget(e).forEach(n=>{this.zt(e,n,null)})}ne(e,n){return this.Lt.getRemoteKeysForTarget(e).has(n)}}function Qm(){return new De(F.comparator)}function Xm(){return new De(F.comparator)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),nC=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),rC=(()=>({and:"AND",or:"OR"}))();class iC{constructor(e,n){this.databaseId=e,this.yt=n}}function wl(t,e){return t.yt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bw(t,e){return t.yt?e.toBase64():e.toUint8Array()}function sC(t,e){return wl(t,e.toTimestamp())}function Kt(t){return ae(!!t),z.fromTimestamp(function(e){const n=Zn(e);return new Ae(n.seconds,n.nanos)}(t))}function vf(t,e){return function(n){return new ue(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function Mw(t){const e=ue.fromString(t);return ae(Fw(e)),e}function $h(t,e){return vf(t.databaseId,e.path)}function fc(t,e){const n=Mw(e);if(n.get(1)!==t.databaseId.projectId)throw new R(S.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new R(S.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new F(Ow(n))}function Fh(t,e){return vf(t.databaseId,e)}function oC(t){const e=Mw(t);return e.length===4?ue.emptyPath():Ow(e)}function Uh(t){return new ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ow(t){return ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ym(t,e,n){return{name:$h(t,e),fields:n.value.mapValue.fields}}function aC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:V()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,c){return u.yt?(ae(c===void 0||typeof c=="string"),tt.fromBase64String(c||"")):(ae(c===void 0||c instanceof Uint8Array),tt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const c=u.code===void 0?S.UNKNOWN:Cw(u.code);return new R(c,u.message||"")}(o);n=new Rw(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=fc(t,r.document.name),s=Kt(r.document.updateTime),o=r.document.createTime?Kt(r.document.createTime):z.min(),l=new ut({mapValue:{fields:r.document.fields}}),u=qe.newFoundDocument(i,s,o,l),c=r.targetIds||[],f=r.removedTargetIds||[];n=new Aa(c,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=fc(t,r.document),s=r.readTime?Kt(r.readTime):z.min(),o=qe.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Aa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=fc(t,r.document),s=r.removedTargetIds||[];n=new Aa([],s,i,null)}else{if(!("filter"in e))return V();{e.filter;const r=e.filter;r.targetId;const i=r.count||0,s=new WI(i),o=r.targetId;n=new Pw(o,s)}}return n}function lC(t,e){let n;if(e instanceof Do)n={update:Ym(t,e.key,e.value)};else if(e instanceof Iw)n={delete:$h(t,e.key)};else if(e instanceof ur)n={update:Ym(t,e.key,e.data),updateMask:yC(e.fieldMask)};else{if(!(e instanceof KI))return V();n={verify:$h(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const o=s.transform;if(o instanceof yl)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof io)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof so)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof vl)return{fieldPath:s.field.canonicalString(),increment:o.It};throw V()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:sC(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:V()}(t,e.precondition)),n}function uC(t,e){return t&&t.length>0?(ae(e!==void 0),t.map(n=>function(r,i){let s=r.updateTime?Kt(r.updateTime):Kt(i);return s.isEqual(z.min())&&(s=Kt(i)),new HI(s,r.transformResults||[])}(n,e))):[]}function cC(t,e){return{documents:[Fh(t,e.path)]}}function hC(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Fh(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Fh(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(u){if(u.length!==0)return $w(Ft.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:qr(f.field),direction:pC(f.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(u,c){return u.yt||nu(c)?c:{value:c}}(t,e.limit);var l;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),n}function dC(t){let e=oC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ae(r===1);const f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let s=[];n.where&&(s=function(f){const a=Lw(f);return a instanceof Ft&&uw(a)?a.getFilters():[a]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(f=>function(a){return new gi(Kr(a.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(a.direction))}(f)));let l=null;n.limit&&(l=function(f){let a;return a=typeof f=="object"?f.value:f,nu(a)?null:a}(n.limit));let u=null;n.startAt&&(u=function(f){const a=!!f.before,h=f.values||[];return new ml(h,a)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const a=!f.before,h=f.values||[];return new ml(h,a)}(n.endAt)),$I(e,i,o,s,l,"F",u,c)}function fC(t,e){const n=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return V()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function Lw(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=Kr(e.unaryFilter.field);return ke.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=Kr(e.unaryFilter.field);return ke.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Kr(e.unaryFilter.field);return ke.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Kr(e.unaryFilter.field);return ke.create(s,"!=",{nullValue:"NULL_VALUE"});default:return V()}}(t):t.fieldFilter!==void 0?function(e){return ke.create(Kr(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return V()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Ft.create(e.compositeFilter.filters.map(n=>Lw(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return V()}}(e.compositeFilter.op))}(t):V()}function pC(t){return tC[t]}function mC(t){return nC[t]}function gC(t){return rC[t]}function qr(t){return{fieldPath:t.canonicalString()}}function Kr(t){return Ke.fromServerFormat(t.fieldPath)}function $w(t){return t instanceof ke?function(e){if(e.op==="=="){if(Fm(e.value))return{unaryFilter:{field:qr(e.field),op:"IS_NAN"}};if($m(e.value))return{unaryFilter:{field:qr(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(Fm(e.value))return{unaryFilter:{field:qr(e.field),op:"IS_NOT_NAN"}};if($m(e.value))return{unaryFilter:{field:qr(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qr(e.field),op:mC(e.op),value:e.value}}}(t):t instanceof Ft?function(e){const n=e.getFilters().map(r=>$w(r));return n.length===1?n[0]:{compositeFilter:{op:gC(e.op),filters:n}}}(t):V()}function yC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&GI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=As(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=As(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Nw();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=Ew(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Q())}isEqual(e){return this.batchId===e.batchId&&Ri(this.mutations,e.mutations,(n,r)=>Gm(n,r))&&Ri(this.baseMutations,e.baseMutations,(n,r)=>Gm(n,r))}}class wf{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ae(e.mutations.length===r.length);let i=YI;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new wf(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r,i,s=z.min(),o=z.min(),l=tt.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l}withSequenceNumber(e){return new xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.oe=e}}function TC(t){const e=dC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.Ze=new EC}addToCollectionParentIndex(e,n){return this.Ze.add(n),C.resolve()}getCollectionParents(e,n){return C.resolve(this.Ze.getEntries(n))}addFieldIndex(e,n){return C.resolve()}deleteFieldIndex(e,n){return C.resolve()}getDocumentsMatchingTarget(e,n){return C.resolve(null)}getIndexType(e,n){return C.resolve(0)}getFieldIndexes(e,n){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,n){return C.resolve(Jn.min())}getMinOffsetFromCollectionGroup(e,n){return C.resolve(Jn.min())}updateCollectionGroup(e,n,r){return C.resolve()}updateIndexEntries(e,n){return C.resolve()}}class EC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new xe(ue.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new xe(ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.Pn=e}next(){return this.Pn+=2,this.Pn}static Vn(){return new Li(0)}static Sn(){return new Li(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(){this.changes=new Qi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?C.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&As(r.mutation,i,vt.empty(),Ae.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Q()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Q()){const i=Sr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=fs();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Sr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Q()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=wn();const o=xs(),l=xs();return n.forEach((u,c)=>{const f=r.get(c.key);i.has(c.key)&&(f===void 0||f.mutation instanceof ur)?s=s.insert(c.key,c):f!==void 0?(o.set(c.key,f.mutation.getFieldMask()),As(f.mutation,c,f.mutation.getFieldMask(),Ae.now())):o.set(c.key,vt.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,f)=>o.set(c,f)),n.forEach((c,f)=>{var a;return l.set(c,new IC(f,(a=o.get(c))!==null&&a!==void 0?a:null))}),l))}recalculateAndSaveOverlays(e,n){const r=xs();let i=new De((o,l)=>o-l),s=Q();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let f=r.get(u)||vt.empty();f=l.applyToLocalView(c,f),r.set(u,f);const a=(i.get(l.batchId)||Q()).add(u);i=i.insert(l.batchId,a)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,f=u.value,a=Nw();f.forEach(h=>{if(!s.has(h)){const d=Ew(n.get(h),r.get(h));d!==null&&a.set(h,d),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,a))}return C.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(i){return F.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pw(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):C.resolve(Sr());let l=-1,u=s;return o.next(c=>C.forEach(c,(f,a)=>(l<a.largestBatchId&&(l=a.largestBatchId),s.get(f)?C.resolve():this.remoteDocumentCache.getEntry(e,f).next(h=>{u=u.insert(f,h)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,Q())).next(f=>({batchId:l,changes:xw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new F(n)).next(r=>{let i=fs();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=fs();return this.indexManager.getCollectionParents(e,i).next(o=>C.forEach(o,l=>{const u=function(c,f){return new Wi(f,null,c.explicitOrderBy.slice(),c.filters.slice(),c.limit,c.limitType,c.startAt,c.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r).next(c=>{c.forEach((f,a)=>{s=s.insert(f,a)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((l,u)=>{const c=u.getKey();s.get(c)===null&&(s=s.insert(c,qe.newInvalidDocument(c)))});let o=fs();return s.forEach((l,u)=>{const c=i.get(l);c!==void 0&&As(c.mutation,u,vt.empty(),Ae.now()),su(n,u)&&(o=o.insert(l,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.Tt=e,this.es=new Map,this.ns=new Map}getBundleMetadata(e,n){return C.resolve(this.es.get(n))}saveBundleMetadata(e,n){var r;return this.es.set(n.id,{id:(r=n).id,version:r.version,createTime:Kt(r.createTime)}),C.resolve()}getNamedQuery(e,n){return C.resolve(this.ns.get(n))}saveNamedQuery(e,n){return this.ns.set(n.name,function(r){return{name:r.name,query:TC(r.bundledQuery),readTime:Kt(r.readTime)}}(n)),C.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.overlays=new De(F.comparator),this.ss=new Map}getOverlay(e,n){return C.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Sr();return C.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ce(e,n,s)}),C.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.ss.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ss.delete(r)),C.resolve()}getOverlaysForCollection(e,n,r){const i=Sr(),s=n.length+1,o=new F(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return C.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new De((c,f)=>c-f);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let f=s.get(c.largestBatchId);f===null&&(f=Sr(),s=s.insert(c.largestBatchId,f)),f.set(c.getKey(),c)}}const l=Sr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,f)=>l.set(c,f)),!(l.size()>=i)););return C.resolve(l)}ce(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.ss.get(i.largestBatchId).delete(r.key);this.ss.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new wC(n,r));let s=this.ss.get(n);s===void 0&&(s=Q(),this.ss.set(n,s)),this.ss.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(){this.rs=new xe(Re.os),this.us=new xe(Re.cs)}isEmpty(){return this.rs.isEmpty()}addReference(e,n){const r=new Re(e,n);this.rs=this.rs.add(r),this.us=this.us.add(r)}hs(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.ls(new Re(e,n))}fs(e,n){e.forEach(r=>this.removeReference(r,n))}ds(e){const n=new F(new ue([])),r=new Re(n,e),i=new Re(n,e+1),s=[];return this.us.forEachInRange([r,i],o=>{this.ls(o),s.push(o.key)}),s}_s(){this.rs.forEach(e=>this.ls(e))}ls(e){this.rs=this.rs.delete(e),this.us=this.us.delete(e)}ws(e){const n=new F(new ue([])),r=new Re(n,e),i=new Re(n,e+1);let s=Q();return this.us.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Re(e,0),r=this.rs.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Re{constructor(e,n){this.key=e,this.gs=n}static os(e,n){return F.comparator(e.key,n.key)||ne(e.gs,n.gs)}static cs(e,n){return ne(e.gs,n.gs)||F.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ys=1,this.ps=new xe(Re.os)}checkEmpty(e){return C.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.ys;this.ys++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new vC(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.ps=this.ps.add(new Re(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return C.resolve(o)}lookupMutationBatch(e,n){return C.resolve(this.Is(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Ts(r),s=i<0?0:i;return C.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(this.mutationQueue.length===0?-1:this.ys-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Re(n,0),i=new Re(n,Number.POSITIVE_INFINITY),s=[];return this.ps.forEachInRange([r,i],o=>{const l=this.Is(o.gs);s.push(l)}),C.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xe(ne);return n.forEach(i=>{const s=new Re(i,0),o=new Re(i,Number.POSITIVE_INFINITY);this.ps.forEachInRange([s,o],l=>{r=r.add(l.gs)})}),C.resolve(this.Es(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;F.isDocumentKey(s)||(s=s.child(""));const o=new Re(new F(s),0);let l=new xe(ne);return this.ps.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.gs)),!0)},o),C.resolve(this.Es(l))}Es(e){const n=[];return e.forEach(r=>{const i=this.Is(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ae(this.As(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.ps;return C.forEach(n.mutations,i=>{const s=new Re(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ps=r})}bn(e){}containsKey(e,n){const r=new Re(n,0),i=this.ps.firstAfterOrEqual(r);return C.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,C.resolve()}As(e,n){return this.Ts(e)}Ts(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Is(e){const n=this.Ts(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.Rs=e,this.docs=new De(F.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Rs(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return C.resolve(r?r.document.mutableCopy():qe.newInvalidDocument(n))}getEntries(e,n){let r=wn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qe.newInvalidDocument(i))}),C.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=wn();const o=n.path,l=new F(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:f}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||wI(vI(f),r)<=0||(i.has(f.key)||su(n,f))&&(s=s.insert(f.key,f.mutableCopy()))}return C.resolve(s)}getAllFromCollectionGroup(e,n,r,i){V()}bs(e,n){return C.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new PC(this)}getSize(e){return C.resolve(this.size)}}class PC extends kC{constructor(e){super(),this.Xn=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Xn.addEntry(e,i)):this.Xn.removeEntry(r)}),C.waitFor(n)}getFromCache(e,n){return this.Xn.getEntry(e,n)}getAllFromCache(e,n){return this.Xn.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.persistence=e,this.vs=new Qi(n=>mf(n),gf),this.lastRemoteSnapshotVersion=z.min(),this.highestTargetId=0,this.Ps=0,this.Vs=new _f,this.targetCount=0,this.Ss=Li.Vn()}forEachTarget(e,n){return this.vs.forEach((r,i)=>n(i)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.Ps)}allocateTargetId(e){return this.highestTargetId=this.Ss.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Ps&&(this.Ps=n),C.resolve()}xn(e){this.vs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ss=new Li(n),this.highestTargetId=n),e.sequenceNumber>this.Ps&&(this.Ps=e.sequenceNumber)}addTargetData(e,n){return this.xn(n),this.targetCount+=1,C.resolve()}updateTargetData(e,n){return this.xn(n),C.resolve()}removeTargetData(e,n){return this.vs.delete(n.target),this.Vs.ds(n.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.vs.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.vs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),C.waitFor(s).next(()=>i)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,n){const r=this.vs.get(n)||null;return C.resolve(r)}addMatchingKeys(e,n,r){return this.Vs.hs(n,r),C.resolve()}removeMatchingKeys(e,n,r){this.Vs.fs(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),C.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Vs.ds(n),C.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Vs.ws(n);return C.resolve(r)}containsKey(e,n){return C.resolve(this.Vs.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n){this.Ds={},this.overlays={},this.Cs=new ff(0),this.xs=!1,this.xs=!0,this.referenceDelegate=e(this),this.Ns=new RC(this),this.indexManager=new SC,this.remoteDocumentCache=function(r){return new DC(r)}(r=>this.referenceDelegate.ks(r)),this.Tt=new _C(n),this.Os=new AC(this.Tt)}start(){return Promise.resolve()}shutdown(){return this.xs=!1,Promise.resolve()}get started(){return this.xs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Ds[e.toKey()];return r||(r=new NC(n,this.referenceDelegate),this.Ds[e.toKey()]=r),r}getTargetCache(){return this.Ns}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Os}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const i=new MC(this.Cs.next());return this.referenceDelegate.Ms(),r(i).next(s=>this.referenceDelegate.Fs(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}$s(e,n){return C.or(Object.values(this.Ds).map(r=>()=>r.containsKey(e,n)))}}class MC extends TI{constructor(e){super(),this.currentSequenceNumber=e}}class Tf{constructor(e){this.persistence=e,this.Bs=new _f,this.Ls=null}static qs(e){return new Tf(e)}get Us(){if(this.Ls)return this.Ls;throw V()}addReference(e,n,r){return this.Bs.addReference(r,n),this.Us.delete(r.toString()),C.resolve()}removeReference(e,n,r){return this.Bs.removeReference(r,n),this.Us.add(r.toString()),C.resolve()}markPotentiallyOrphaned(e,n){return this.Us.add(n.toString()),C.resolve()}removeTarget(e,n){this.Bs.ds(n.targetId).forEach(i=>this.Us.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Us.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ms(){this.Ls=new Set}Fs(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Us,r=>{const i=F.fromPath(r);return this.Ks(e,i).next(s=>{s||n.removeEntry(i,z.min())})}).next(()=>(this.Ls=null,n.apply(e)))}updateLimboDocument(e,n){return this.Ks(e,n).next(r=>{r?this.Us.delete(n.toString()):this.Us.add(n.toString())})}ks(e){return 0}Ks(e,n){return C.or([()=>C.resolve(this.Bs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.$s(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ci=r,this.xi=i}static Ni(e,n){let r=Q(),i=Q();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Sf(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(){this.ki=!1}initialize(e,n){this.Oi=e,this.indexManager=n,this.ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Mi(e,n).next(s=>s||this.Fi(e,n,i,r)).next(s=>s||this.$i(e,n))}Mi(e,n){if(zm(n))return C.resolve(null);let r=vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gl(n,null,"F"),r=vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Q(...s);return this.Oi.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Bi(n,l);return this.Li(n,c,o,u.readTime)?this.Mi(e,gl(n,null,"F")):this.qi(e,c,n,u)}))})))}Fi(e,n,r,i){return zm(n)||i.isEqual(z.min())?this.$i(e,n):this.Oi.getDocuments(e,r).next(s=>{const o=this.Bi(n,s);return this.Li(n,o,r,i)?this.$i(e,n):(bm()<=te.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lh(n)),this.qi(e,o,n,yI(i,-1)))})}Bi(e,n){let r=new xe(gw(e));return n.forEach((i,s)=>{su(e,s)&&(r=r.add(s))}),r}Li(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}$i(e,n){return bm()<=te.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Lh(n)),this.Oi.getDocumentsMatchingQuery(e,n,Jn.min())}qi(e,n,r,i){return this.Oi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n,r,i){this.persistence=e,this.Ui=n,this.Tt=i,this.Ki=new De(ne),this.Gi=new Qi(s=>mf(s),gf),this.Qi=new Map,this.ji=e.getRemoteDocumentCache(),this.Ns=e.getTargetCache(),this.Os=e.getBundleCache(),this.zi(r)}zi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CC(this.ji,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ji.setIndexManager(this.indexManager),this.Ui.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ki))}}function $C(t,e,n,r){return new LC(t,e,n,r)}async function Uw(t,e){const n=H(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.zi(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=Q();for(const c of i){o.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}for(const c of s){l.push(c.batchId);for(const f of c.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Wi:c,removedBatchIds:o,addedBatchIds:l}))})})}function FC(t,e){const n=H(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.ji.newChangeBuffer({trackRemovals:!0});return function(o,l,u,c){const f=u.batch,a=f.keys();let h=C.resolve();return a.forEach(d=>{h=h.next(()=>c.getEntry(l,d)).next(m=>{const y=u.docVersions.get(d);ae(y!==null),m.version.compareTo(y)<0&&(f.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))})}),h.next(()=>o.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let l=Q();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(l=l.add(o.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Vw(t){const e=H(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ns.getLastRemoteSnapshotVersion(n))}function UC(t,e){const n=H(t),r=e.snapshotVersion;let i=n.Ki;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.ji.newChangeBuffer({trackRemovals:!0});i=n.Ki;const l=[];e.targetChanges.forEach((f,a)=>{const h=i.get(a);if(!h)return;l.push(n.Ns.removeMatchingKeys(s,f.removedDocuments,a).next(()=>n.Ns.addMatchingKeys(s,f.addedDocuments,a)));let d=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.has(a)?d=d.withResumeToken(tt.EMPTY_BYTE_STRING,z.min()).withLastLimboFreeSnapshotVersion(z.min()):f.resumeToken.approximateByteSize()>0&&(d=d.withResumeToken(f.resumeToken,r)),i=i.insert(a,d),function(m,y,w){return m.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,d,f)&&l.push(n.Ns.updateTargetData(s,d))});let u=wn(),c=Q();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,f))}),l.push(VC(s,o,e.documentUpdates).next(f=>{u=f.Hi,c=f.Ji})),!r.isEqual(z.min())){const f=n.Ns.getLastRemoteSnapshotVersion(s).next(a=>n.Ns.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(f)}return C.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ki=i,s))}function VC(t,e,n){let r=Q(),i=Q();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=wn();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(z.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):$("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Hi:o,Ji:i}})}function BC(t,e){const n=H(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jC(t,e){const n=H(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ns.getTargetData(r,e).next(s=>s?(i=s,C.resolve(i)):n.Ns.allocateTargetId(r).next(o=>(i=new xr(e,o,0,r.currentSequenceNumber),n.Ns.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ki.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ki=n.Ki.insert(r.targetId,r),n.Gi.set(e,r.targetId)),r})}async function Vh(t,e,n){const r=H(t),i=r.Ki.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xo(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ki=r.Ki.remove(e),r.Gi.delete(i.target)}function Jm(t,e,n){const r=H(t);let i=z.min(),s=Q();return r.persistence.runTransaction("Execute query","readonly",o=>function(l,u,c){const f=H(l),a=f.Gi.get(c);return a!==void 0?C.resolve(f.Ki.get(a)):f.Ns.getTargetData(u,c)}(r,o,vn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ns.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Ui.getDocumentsMatchingQuery(o,e,n?i:z.min(),n?s:Q())).next(l=>(zC(r,FI(e),l),{documents:l,Yi:s})))}function zC(t,e,n){let r=t.Qi.get(e)||z.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Qi.set(e,r)}class Zm{constructor(){this.activeTargetIds=Dw()}sr(e){this.activeTargetIds=this.activeTargetIds.add(e)}ir(e){this.activeTargetIds=this.activeTargetIds.delete(e)}nr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class HC{constructor(){this.Ur=new Zm,this.Kr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Ur.sr(e),this.Kr[e]||"not-current"}updateQueryState(e,n,r){this.Kr[e]=n}removeLocalQueryTarget(e){this.Ur.ir(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.Kr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Zm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{Gr(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(){this.Qr=()=>this.jr(),this.zr=()=>this.Wr(),this.Hr=[],this.Jr()}Gr(e){this.Hr.push(e)}shutdown(){window.removeEventListener("online",this.Qr),window.removeEventListener("offline",this.zr)}Jr(){window.addEventListener("online",this.Qr),window.addEventListener("offline",this.zr)}jr(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Hr)e(0)}Wr(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Hr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.Yr=e.Yr,this.Zr=e.Zr}Xr(e){this.eo=e}no(e){this.so=e}onMessage(e){this.io=e}close(){this.Zr()}send(e){this.Yr(e)}ro(){this.eo()}oo(e){this.so(e)}uo(e){this.io(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.co=n+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get ho(){return!1}lo(e,n,r,i,s){const o=this.fo(e,n);$("RestConnection","Sending: ",o,r);const l={};return this._o(l,i,s),this.wo(e,o,l,r).then(u=>($("RestConnection","Received: ",u),u),u=>{throw Dh("RestConnection",`${e} failed with error: `,u,"url: ",o,"request:",r),u})}mo(e,n,r,i,s,o){return this.lo(e,n,r,i,s)}_o(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ki,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}fo(e,n){const r=qC[e];return`${this.co}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}wo(e,n,r,i){return new Promise((s,o)=>{const l=new aI;l.setWithCredentials(!0),l.listenOnce(iI.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case dc.NO_ERROR:const c=l.getResponseJson();$("Connection","XHR received:",JSON.stringify(c)),s(c);break;case dc.TIMEOUT:$("Connection",'RPC "'+e+'" timed out'),o(new R(S.DEADLINE_EXCEEDED,"Request time out"));break;case dc.HTTP_ERROR:const f=l.getStatus();if($("Connection",'RPC "'+e+'" failed with status:',f,"response text:",l.getResponseText()),f>0){let a=l.getResponseJson();Array.isArray(a)&&(a=a[0]);const h=a==null?void 0:a.error;if(h&&h.status&&h.message){const d=function(m){const y=m.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(y)>=0?y:S.UNKNOWN}(h.status);o(new R(d,h.message))}else o(new R(S.UNKNOWN,"Server responded with status "+l.getStatus()))}else o(new R(S.UNAVAILABLE,"Connection failed."));break;default:V()}}finally{$("Connection",'RPC "'+e+'" completed.')}});const u=JSON.stringify(i);l.send(n,"POST",u,r,15)})}yo(e,n,r){const i=[this.co,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=nI(),o=rI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new oI({})),this._o(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=i.join("");$("Connection","Creating WebChannel: "+u,l);const c=s.createWebChannel(u,l);let f=!1,a=!1;const h=new KC({Yr:m=>{a?$("Connection","Not sending because WebChannel is closed:",m):(f||($("Connection","Opening WebChannel transport."),c.open(),f=!0),$("Connection","WebChannel sending:",m),c.send(m))},Zr:()=>c.close()}),d=(m,y,w)=>{m.listen(y,p=>{try{w(p)}catch(g){setTimeout(()=>{throw g},0)}})};return d(c,la.EventType.OPEN,()=>{a||$("Connection","WebChannel transport opened.")}),d(c,la.EventType.CLOSE,()=>{a||(a=!0,$("Connection","WebChannel transport closed"),h.oo())}),d(c,la.EventType.ERROR,m=>{a||(a=!0,Dh("Connection","WebChannel transport errored:",m),h.oo(new R(S.UNAVAILABLE,"The operation could not be completed")))}),d(c,la.EventType.MESSAGE,m=>{var y;if(!a){const w=m.data[0];ae(!!w);const p=w,g=p.error||((y=p[0])===null||y===void 0?void 0:y.error);if(g){$("Connection","WebChannel received error:",g);const v=g.status;let T=function(x){const N=Te[x];if(N!==void 0)return Cw(N)}(v),A=g.message;T===void 0&&(T=S.INTERNAL,A="Unknown error status: "+v+" with message "+g.message),a=!0,h.oo(new R(T,A)),c.close()}else $("Connection","WebChannel received:",w),h.uo(w)}}),d(o,sI.STAT_EVENT,m=>{m.stat===Pm.PROXY?$("Connection","Detected buffering proxy"):m.stat===Pm.NOPROXY&&$("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.ro()},0),h}}function pc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(t){return new iC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ys=e,this.timerId=n,this.po=r,this.Io=i,this.To=s,this.Eo=0,this.Ao=null,this.Ro=Date.now(),this.reset()}reset(){this.Eo=0}bo(){this.Eo=this.To}vo(e){this.cancel();const n=Math.floor(this.Eo+this.Po()),r=Math.max(0,Date.now()-this.Ro),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Eo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Ao=this.Ys.enqueueAfterDelay(this.timerId,i,()=>(this.Ro=Date.now(),e())),this.Eo*=this.Io,this.Eo<this.po&&(this.Eo=this.po),this.Eo>this.To&&(this.Eo=this.To)}Vo(){this.Ao!==null&&(this.Ao.skipDelay(),this.Ao=null)}cancel(){this.Ao!==null&&(this.Ao.cancel(),this.Ao=null)}Po(){return(Math.random()-.5)*this.Eo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n,r,i,s,o,l,u){this.Ys=e,this.So=r,this.Do=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Co=0,this.xo=null,this.No=null,this.stream=null,this.ko=new Bw(e,n)}Oo(){return this.state===1||this.state===5||this.Mo()}Mo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Fo()}async stop(){this.Oo()&&await this.close(0)}$o(){this.state=0,this.ko.reset()}Bo(){this.Mo()&&this.xo===null&&(this.xo=this.Ys.enqueueAfterDelay(this.So,6e4,()=>this.Lo()))}qo(e){this.Uo(),this.stream.send(e)}async Lo(){if(this.Mo())return this.close(0)}Uo(){this.xo&&(this.xo.cancel(),this.xo=null)}Ko(){this.No&&(this.No.cancel(),this.No=null)}async close(e,n){this.Uo(),this.Ko(),this.ko.cancel(),this.Co++,e!==4?this.ko.reset():n&&n.code===S.RESOURCE_EXHAUSTED?(yn(n.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),this.ko.bo()):n&&n.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Go(),this.stream.close(),this.stream=null),this.state=e,await this.listener.no(n)}Go(){}auth(){this.state=1;const e=this.Qo(this.Co),n=this.Co;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Co===n&&this.jo(r,i)},r=>{e(()=>{const i=new R(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.zo(i)})})}jo(e,n){const r=this.Qo(this.Co);this.stream=this.Wo(e,n),this.stream.Xr(()=>{r(()=>(this.state=2,this.No=this.Ys.enqueueAfterDelay(this.Do,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.no(i=>{r(()=>this.zo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Fo(){this.state=5,this.ko.vo(async()=>{this.state=0,this.start()})}zo(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Qo(e){return n=>{this.Ys.enqueueAndForget(()=>this.Co===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QC extends jw{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s}Wo(e,n){return this.connection.yo("Listen",e,n)}onMessage(e){this.ko.reset();const n=aC(this.Tt,e),r=function(i){if(!("targetChange"in i))return z.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?z.min():s.readTime?Kt(s.readTime):z.min()}(e);return this.listener.Ho(n,r)}Jo(e){const n={};n.database=Uh(this.Tt),n.addTarget=function(i,s){let o;const l=s.target;return o=Mh(l)?{documents:cC(i,l)}:{query:hC(i,l)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?o.resumeToken=bw(i,s.resumeToken):s.snapshotVersion.compareTo(z.min())>0&&(o.readTime=wl(i,s.snapshotVersion.toTimestamp())),o}(this.Tt,e);const r=fC(this.Tt,e);r&&(n.labels=r),this.qo(n)}Yo(e){const n={};n.database=Uh(this.Tt),n.removeTarget=e,this.qo(n)}}class XC extends jw{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.Tt=s,this.Zo=!1}get Xo(){return this.Zo}start(){this.Zo=!1,this.lastStreamToken=void 0,super.start()}Go(){this.Zo&&this.tu([])}Wo(e,n){return this.connection.yo("Write",e,n)}onMessage(e){if(ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Zo){this.ko.reset();const n=uC(e.writeResults,e.commitTime),r=Kt(e.commitTime);return this.listener.eu(r,n)}return ae(!e.writeResults||e.writeResults.length===0),this.Zo=!0,this.listener.nu()}su(){const e={};e.database=Uh(this.Tt),this.qo(e)}tu(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>lC(this.Tt,r))};this.qo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.Tt=i,this.iu=!1}ru(){if(this.iu)throw new R(S.FAILED_PRECONDITION,"The client has already been terminated.")}lo(e,n,r){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.lo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new R(S.UNKNOWN,i.toString())})}mo(e,n,r,i){return this.ru(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.mo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new R(S.UNKNOWN,s.toString())})}terminate(){this.iu=!0}}class JC{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.ou=0,this.uu=null,this.cu=!0}au(){this.ou===0&&(this.hu("Unknown"),this.uu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.uu=null,this.lu("Backend didn't respond within 10 seconds."),this.hu("Offline"),Promise.resolve())))}fu(e){this.state==="Online"?this.hu("Unknown"):(this.ou++,this.ou>=1&&(this.du(),this.lu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.hu("Offline")))}set(e){this.du(),this.ou=0,e==="Online"&&(this.cu=!1),this.hu(e)}hu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}lu(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.cu?(yn(n),this.cu=!1):$("OnlineStateTracker",n)}du(){this.uu!==null&&(this.uu.cancel(),this.uu=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this._u=[],this.wu=new Map,this.mu=new Set,this.gu=[],this.yu=s,this.yu.Gr(o=>{r.enqueueAndForget(async()=>{Hr(this)&&($("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=H(l);u.mu.add(4),await Ro(u),u.pu.set("Unknown"),u.mu.delete(4),await cu(u)}(this))})}),this.pu=new JC(r,i)}}async function cu(t){if(Hr(t))for(const e of t.gu)await e(!0)}async function Ro(t){for(const e of t.gu)await e(!1)}function zw(t,e){const n=H(t);n.wu.has(e.targetId)||(n.wu.set(e.targetId,e),If(n)?kf(n):Xi(n).Mo()&&Ef(n,e))}function Hw(t,e){const n=H(t),r=Xi(n);n.wu.delete(e),r.Mo()&&Gw(n,e),n.wu.size===0&&(r.Mo()?r.Bo():Hr(n)&&n.pu.set("Unknown"))}function Ef(t,e){t.Iu.Ft(e.targetId),Xi(t).Jo(e)}function Gw(t,e){t.Iu.Ft(e),Xi(t).Yo(e)}function kf(t){t.Iu=new eC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ie:e=>t.wu.get(e)||null}),Xi(t).start(),t.pu.au()}function If(t){return Hr(t)&&!Xi(t).Oo()&&t.wu.size>0}function Hr(t){return H(t).mu.size===0}function qw(t){t.Iu=void 0}async function eA(t){t.wu.forEach((e,n)=>{Ef(t,e)})}async function tA(t,e){qw(t),If(t)?(t.pu.fu(e),kf(t)):t.pu.set("Unknown")}async function nA(t,e,n){if(t.pu.set("Online"),e instanceof Rw&&e.state===2&&e.cause)try{await async function(r,i){const s=i.cause;for(const o of i.targetIds)r.wu.has(o)&&(await r.remoteSyncer.rejectListen(o,s),r.wu.delete(o),r.Iu.removeTarget(o))}(t,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _l(t,r)}else if(e instanceof Aa?t.Iu.Qt(e):e instanceof Pw?t.Iu.Zt(e):t.Iu.Wt(e),!n.isEqual(z.min()))try{const r=await Vw(t.localStore);n.compareTo(r)>=0&&await function(i,s){const o=i.Iu.ee(s);return o.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=i.wu.get(u);c&&i.wu.set(u,c.withResumeToken(l.resumeToken,s))}}),o.targetMismatches.forEach(l=>{const u=i.wu.get(l);if(!u)return;i.wu.set(l,u.withResumeToken(tt.EMPTY_BYTE_STRING,u.snapshotVersion)),Gw(i,l);const c=new xr(u.target,l,1,u.sequenceNumber);Ef(i,c)}),i.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){$("RemoteStore","Failed to raise snapshot:",r),await _l(t,r)}}async function _l(t,e,n){if(!xo(e))throw e;t.mu.add(1),await Ro(t),t.pu.set("Offline"),n||(n=()=>Vw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$("RemoteStore","Retrying IndexedDB access"),await n(),t.mu.delete(1),await cu(t)})}function Kw(t,e){return e().catch(n=>_l(t,n,e))}async function hu(t){const e=H(t),n=er(e);let r=e._u.length>0?e._u[e._u.length-1].batchId:-1;for(;rA(e);)try{const i=await BC(e.localStore,r);if(i===null){e._u.length===0&&n.Bo();break}r=i.batchId,iA(e,i)}catch(i){await _l(e,i)}Ww(e)&&Qw(e)}function rA(t){return Hr(t)&&t._u.length<10}function iA(t,e){t._u.push(e);const n=er(t);n.Mo()&&n.Xo&&n.tu(e.mutations)}function Ww(t){return Hr(t)&&!er(t).Oo()&&t._u.length>0}function Qw(t){er(t).start()}async function sA(t){er(t).su()}async function oA(t){const e=er(t);for(const n of t._u)e.tu(n.mutations)}async function aA(t,e,n){const r=t._u.shift(),i=wf.from(r,e,n);await Kw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await hu(t)}async function lA(t,e){e&&er(t).Xo&&await async function(n,r){if(i=r.code,QI(i)&&i!==S.ABORTED){const s=n._u.shift();er(n).$o(),await Kw(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,r)),await hu(n)}var i}(t,e),Ww(t)&&Qw(t)}async function tg(t,e){const n=H(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");const r=Hr(n);n.mu.add(3),await Ro(n),r&&n.pu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.mu.delete(3),await cu(n)}async function uA(t,e){const n=H(t);e?(n.mu.delete(2),await cu(n)):e||(n.mu.add(2),await Ro(n),n.pu.set("Unknown"))}function Xi(t){return t.Tu||(t.Tu=function(e,n,r){const i=H(e);return i.ru(),new QC(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:eA.bind(null,t),no:tA.bind(null,t),Ho:nA.bind(null,t)}),t.gu.push(async e=>{e?(t.Tu.$o(),If(t)?kf(t):t.pu.set("Unknown")):(await t.Tu.stop(),qw(t))})),t.Tu}function er(t){return t.Eu||(t.Eu=function(e,n,r){const i=H(e);return i.ru(),new XC(n,i.connection,i.authCredentials,i.appCheckCredentials,i.Tt,r)}(t.datastore,t.asyncQueue,{Xr:sA.bind(null,t),no:lA.bind(null,t),nu:oA.bind(null,t),eu:aA.bind(null,t)}),t.gu.push(async e=>{e?(t.Eu.$o(),await hu(t)):(await t.Eu.stop(),t._u.length>0&&($("RemoteStore",`Stopping write stream with ${t._u.length} pending writes`),t._u=[]))})),t.Eu}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Kn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Cf(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Af(t,e){if(yn("AsyncQueue",`${e}: ${t}`),xo(t))return new R(S.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||F.comparator(n.key,r.key):(n,r)=>F.comparator(n.key,r.key),this.keyedMap=fs(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(){this.Au=new De(F.comparator)}track(e){const n=e.doc.key,r=this.Au.get(n);r?e.type!==0&&r.type===3?this.Au=this.Au.insert(n,e):e.type===3&&r.type!==1?this.Au=this.Au.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Au=this.Au.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Au=this.Au.remove(n):e.type===1&&r.type===2?this.Au=this.Au.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Au=this.Au.insert(n,{type:2,doc:e.doc}):V():this.Au=this.Au.insert(n,e)}Ru(){const e=[];return this.Au.inorderTraversal((n,r)=>{e.push(r)}),e}}class $i{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new $i(e,n,vi.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&No(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.bu=void 0,this.listeners=[]}}class hA{constructor(){this.queries=new Qi(e=>mw(e),No),this.onlineState="Unknown",this.vu=new Set}}async function Xw(t,e){const n=H(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new cA),i)try{s.bu=await n.onListen(r)}catch(o){const l=Af(o,`Initialization of query '${Lh(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.listeners.push(e),e.Pu(n.onlineState),s.bu&&e.Vu(s.bu)&&xf(n)}async function Yw(t,e){const n=H(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function dA(t,e){const n=H(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.listeners)l.Vu(i)&&(r=!0);o.bu=i}}r&&xf(n)}function fA(t,e,n){const r=H(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function xf(t){t.vu.forEach(e=>{e.next()})}class Jw{constructor(e,n,r){this.query=e,this.Su=n,this.Du=!1,this.Cu=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new $i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Du?this.xu(e)&&(this.Su.next(e),n=!0):this.Nu(e,this.onlineState)&&(this.ku(e),n=!0),this.Cu=e,n}onError(e){this.Su.error(e)}Pu(e){this.onlineState=e;let n=!1;return this.Cu&&!this.Du&&this.Nu(this.Cu,e)&&(this.ku(this.Cu),n=!0),n}Nu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Ou||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}xu(e){if(e.docChanges.length>0)return!0;const n=this.Cu&&this.Cu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ku(e){e=$i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Du=!0,this.Su.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.key=e}}class e_{constructor(e){this.key=e}}class pA{constructor(e,n){this.query=e,this.Ku=n,this.Gu=null,this.hasCachedResults=!1,this.current=!1,this.Qu=Q(),this.mutatedKeys=Q(),this.ju=gw(e),this.zu=new vi(this.ju)}get Wu(){return this.Ku}Hu(e,n){const r=n?n.Ju:new ng,i=n?n.zu:this.zu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,a)=>{const h=i.get(f),d=su(this.query,a)?a:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!d&&(d.hasLocalMutations||this.mutatedKeys.has(d.key)&&d.hasCommittedMutations);let w=!1;h&&d?h.data.isEqual(d.data)?m!==y&&(r.track({type:3,doc:d}),w=!0):this.Yu(h,d)||(r.track({type:2,doc:d}),w=!0,(u&&this.ju(d,u)>0||c&&this.ju(d,c)<0)&&(l=!0)):!h&&d?(r.track({type:0,doc:d}),w=!0):h&&!d&&(r.track({type:1,doc:h}),w=!0,(u||c)&&(l=!0)),w&&(d?(o=o.add(d),s=y?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),r.track({type:1,doc:f})}return{zu:o,Ju:r,Li:l,mutatedKeys:s}}Yu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.zu;this.zu=e.zu,this.mutatedKeys=e.mutatedKeys;const s=e.Ju.Ru();s.sort((c,f)=>function(a,h){const d=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return V()}};return d(a)-d(h)}(c.type,f.type)||this.ju(c.doc,f.doc)),this.Zu(r);const o=n?this.Xu():[],l=this.Qu.size===0&&this.current?1:0,u=l!==this.Gu;return this.Gu=l,s.length!==0||u?{snapshot:new $i(this.query,e.zu,i,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),tc:o}:{tc:o}}Pu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({zu:this.zu,Ju:new ng,mutatedKeys:this.mutatedKeys,Li:!1},!1)):{tc:[]}}ec(e){return!this.Ku.has(e)&&!!this.zu.has(e)&&!this.zu.get(e).hasLocalMutations}Zu(e){e&&(e.addedDocuments.forEach(n=>this.Ku=this.Ku.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ku=this.Ku.delete(n)),this.current=e.current)}Xu(){if(!this.current)return[];const e=this.Qu;this.Qu=Q(),this.zu.forEach(r=>{this.ec(r.key)&&(this.Qu=this.Qu.add(r.key))});const n=[];return e.forEach(r=>{this.Qu.has(r)||n.push(new e_(r))}),this.Qu.forEach(r=>{e.has(r)||n.push(new Zw(r))}),n}nc(e){this.Ku=e.Yi,this.Qu=Q();const n=this.Hu(e.documents);return this.applyChanges(n,!0)}sc(){return $i.fromInitialDocuments(this.query,this.zu,this.mutatedKeys,this.Gu===0,this.hasCachedResults)}}class mA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class gA{constructor(e){this.key=e,this.ic=!1}}class yA{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.rc={},this.oc=new Qi(l=>mw(l),No),this.uc=new Map,this.cc=new Set,this.ac=new De(F.comparator),this.hc=new Map,this.lc=new _f,this.fc={},this.dc=new Map,this._c=Li.Sn(),this.onlineState="Unknown",this.wc=void 0}get isPrimaryClient(){return this.wc===!0}}async function vA(t,e){const n=xA(t);let r,i;const s=n.oc.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.sc();else{const o=await jC(n.localStore,vn(e));n.isPrimaryClient&&zw(n.remoteStore,o);const l=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await wA(n,e,r,l==="current",o.resumeToken)}return i}async function wA(t,e,n,r,i){t.mc=(a,h,d)=>async function(m,y,w,p){let g=y.view.Hu(w);g.Li&&(g=await Jm(m.localStore,y.query,!1).then(({documents:A})=>y.view.Hu(A,g)));const v=p&&p.targetChanges.get(y.targetId),T=y.view.applyChanges(g,m.isPrimaryClient,v);return ig(m,y.targetId,T.tc),T.snapshot}(t,a,h,d);const s=await Jm(t.localStore,e,!0),o=new pA(e,s.Yi),l=o.Hu(s.documents),u=Po.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);ig(t,n,c.tc);const f=new mA(e,n,o);return t.oc.set(e,f),t.uc.has(n)?t.uc.get(n).push(e):t.uc.set(n,[e]),c.snapshot}async function _A(t,e){const n=H(t),r=n.oc.get(e),i=n.uc.get(r.targetId);if(i.length>1)return n.uc.set(r.targetId,i.filter(s=>!No(s,e))),void n.oc.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Vh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Hw(n.remoteStore,r.targetId),Bh(n,r.targetId)}).catch(Ao)):(Bh(n,r.targetId),await Vh(n.localStore,r.targetId,!0))}async function TA(t,e,n){const r=NA(t);try{const i=await function(s,o){const l=H(s),u=Ae.now(),c=o.reduce((h,d)=>h.add(d.key),Q());let f,a;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let d=wn(),m=Q();return l.ji.getEntries(h,c).next(y=>{d=y,d.forEach((w,p)=>{p.isValidDocument()||(m=m.add(w))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,d)).next(y=>{f=y;const w=[];for(const p of o){const g=qI(p,f.get(p.key).overlayedDocument);g!=null&&w.push(new ur(p.key,g,fw(g.value.mapValue),qt.exists(!0)))}return l.mutationQueue.addMutationBatch(h,u,w,o)}).next(y=>{a=y;const w=y.applyToLocalDocumentSet(f,m);return l.documentOverlayCache.saveOverlays(h,y.batchId,w)})}).then(()=>({batchId:a.batchId,changes:xw(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,o,l){let u=s.fc[s.currentUser.toKey()];u||(u=new De(ne)),u=u.insert(o,l),s.fc[s.currentUser.toKey()]=u}(r,i.batchId,n),await bo(r,i.changes),await hu(r.remoteStore)}catch(i){const s=Af(i,"Failed to persist write");n.reject(s)}}async function t_(t,e){const n=H(t);try{const r=await UC(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.hc.get(s);o&&(ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ic=!0:i.modifiedDocuments.size>0?ae(o.ic):i.removedDocuments.size>0&&(ae(o.ic),o.ic=!1))}),await bo(n,r,e)}catch(r){await Ao(r)}}function rg(t,e,n){const r=H(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.oc.forEach((s,o)=>{const l=o.view.Pu(e);l.snapshot&&i.push(l.snapshot)}),function(s,o){const l=H(s);l.onlineState=o;let u=!1;l.queries.forEach((c,f)=>{for(const a of f.listeners)a.Pu(o)&&(u=!0)}),u&&xf(l)}(r.eventManager,e),i.length&&r.rc.Ho(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function SA(t,e,n){const r=H(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.hc.get(e),s=i&&i.key;if(s){let o=new De(F.comparator);o=o.insert(s,qe.newNoDocument(s,z.min()));const l=Q().add(s),u=new lu(z.min(),new Map,new xe(ne),o,l);await t_(r,u),r.ac=r.ac.remove(s),r.hc.delete(e),Nf(r)}else await Vh(r.localStore,e,!1).then(()=>Bh(r,e,n)).catch(Ao)}async function EA(t,e){const n=H(t),r=e.batch.batchId;try{const i=await FC(n.localStore,e);r_(n,r,null),n_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await bo(n,i)}catch(i){await Ao(i)}}async function kA(t,e,n){const r=H(t);try{const i=await function(s,o){const l=H(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,o).next(f=>(ae(f!==null),c=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,o)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,e);r_(r,e,n),n_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await bo(r,i)}catch(i){await Ao(i)}}function n_(t,e){(t.dc.get(e)||[]).forEach(n=>{n.resolve()}),t.dc.delete(e)}function r_(t,e,n){const r=H(t);let i=r.fc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.fc[r.currentUser.toKey()]=i}}function Bh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.uc.get(e))t.oc.delete(r),n&&t.rc.gc(r,n);t.uc.delete(e),t.isPrimaryClient&&t.lc.ds(e).forEach(r=>{t.lc.containsKey(r)||i_(t,r)})}function i_(t,e){t.cc.delete(e.path.canonicalString());const n=t.ac.get(e);n!==null&&(Hw(t.remoteStore,n),t.ac=t.ac.remove(e),t.hc.delete(n),Nf(t))}function ig(t,e,n){for(const r of n)r instanceof Zw?(t.lc.addReference(r.key,e),IA(t,r)):r instanceof e_?($("SyncEngine","Document no longer in limbo: "+r.key),t.lc.removeReference(r.key,e),t.lc.containsKey(r.key)||i_(t,r.key)):V()}function IA(t,e){const n=e.key,r=n.path.canonicalString();t.ac.get(n)||t.cc.has(r)||($("SyncEngine","New document in limbo: "+n),t.cc.add(r),Nf(t))}function Nf(t){for(;t.cc.size>0&&t.ac.size<t.maxConcurrentLimboResolutions;){const e=t.cc.values().next().value;t.cc.delete(e);const n=new F(ue.fromString(e)),r=t._c.next();t.hc.set(r,new gA(n)),t.ac=t.ac.insert(n,r),zw(t.remoteStore,new xr(vn(ru(n.path)),r,2,ff.at))}}async function bo(t,e,n){const r=H(t),i=[],s=[],o=[];r.oc.isEmpty()||(r.oc.forEach((l,u)=>{o.push(r.mc(u,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const f=Sf.Ni(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.rc.Ho(i),await async function(l,u){const c=H(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>C.forEach(u,a=>C.forEach(a.Ci,h=>c.persistence.referenceDelegate.addReference(f,a.targetId,h)).next(()=>C.forEach(a.xi,h=>c.persistence.referenceDelegate.removeReference(f,a.targetId,h)))))}catch(f){if(!xo(f))throw f;$("LocalStore","Failed to update sequence numbers: "+f)}for(const f of u){const a=f.targetId;if(!f.fromCache){const h=c.Ki.get(a),d=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(d);c.Ki=c.Ki.insert(a,m)}}}(r.localStore,s))}async function CA(t,e){const n=H(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());const r=await Uw(n.localStore,e);n.currentUser=e,function(i,s){i.dc.forEach(o=>{o.forEach(l=>{l.reject(new R(S.CANCELLED,s))})}),i.dc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bo(n,r.Wi)}}function AA(t,e){const n=H(t),r=n.hc.get(e);if(r&&r.ic)return Q().add(r.key);{let i=Q();const s=n.uc.get(e);if(!s)return i;for(const o of s){const l=n.oc.get(o);i=i.unionWith(l.view.Wu)}return i}}function xA(t){const e=H(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=t_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SA.bind(null,e),e.rc.Ho=dA.bind(null,e.eventManager),e.rc.gc=fA.bind(null,e.eventManager),e}function NA(t){const e=H(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kA.bind(null,e),e}class DA{constructor(){this.synchronizeTabs=!1}async initialize(e){this.Tt=uu(e.databaseInfo.databaseId),this.sharedClientState=this.Ic(e),this.persistence=this.Tc(e),await this.persistence.start(),this.localStore=this.Ec(e),this.gcScheduler=this.Ac(e,this.localStore),this.indexBackfillerScheduler=this.Rc(e,this.localStore)}Ac(e,n){return null}Rc(e,n){return null}Ec(e){return $C(this.persistence,new OC,e.initialUser,this.Tt)}Tc(e){return new bC(Tf.qs,this.Tt)}Ic(e){return new HC}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class PA{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>rg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CA.bind(null,this.syncEngine),await uA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hA}createDatastore(e){const n=uu(e.databaseInfo.databaseId),r=(i=e.databaseInfo,new WC(i));var i;return function(s,o,l,u){return new YC(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,i=e.asyncQueue,s=l=>rg(this.syncEngine,l,0),o=eg.C()?new eg:new GC,new ZC(n,r,i,s,o);var n,r,i,s,o}createSyncEngine(e,n){return function(r,i,s,o,l,u,c){const f=new yA(r,i,s,o,l,u);return c&&(f.wc=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=H(e);$("RemoteStore","RemoteStore shutting down."),n.mu.add(5),await Ro(n),n.yu.shutdown(),n.pu.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.vc(this.observer.next,e)}error(e){this.observer.error?this.vc(this.observer.error,e):yn("Uncaught Error in snapshot listener:",e.toString())}Pc(){this.muted=!0}vc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=He.UNAUTHENTICATED,this.clientId=rw.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{$("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>($("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new R(S.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Af(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function bA(t,e){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Uw(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function MA(t,e){t.asyncQueue.verifyOperationInProgress();const n=await OA(t);$("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>tg(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>tg(e.remoteStore,s)),t.onlineComponents=e}async function OA(t){return t.offlineComponents||($("FirestoreClient","Using default OfflineComponentProvider"),await bA(t,new DA)),t.offlineComponents}async function o_(t){return t.onlineComponents||($("FirestoreClient","Using default OnlineComponentProvider"),await MA(t,new PA)),t.onlineComponents}function LA(t){return o_(t).then(e=>e.syncEngine)}async function jh(t){const e=await o_(t),n=e.eventManager;return n.onListen=vA.bind(null,e.syncEngine),n.onUnlisten=_A.bind(null,e.syncEngine),n}function $A(t,e,n={}){const r=new Kn;return t.asyncQueue.enqueueAndForget(async()=>function(i,s,o,l,u){const c=new s_({next:a=>{s.enqueueAndForget(()=>Yw(i,f));const h=a.docs.has(o);!h&&a.fromCache?u.reject(new R(S.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&a.fromCache&&l&&l.source==="server"?u.reject(new R(S.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(a)},error:a=>u.reject(a)}),f=new Jw(ru(o.path),c,{includeMetadataChanges:!0,Ou:!0});return Xw(i,f)}(await jh(t),t.asyncQueue,e,n,r)),r.promise}const sg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a_(t,e,n){if(!n)throw new R(S.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function FA(t,e,n,r){if(e===!0&&r===!0)throw new R(S.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function og(t){if(!F.isDocumentKey(t))throw new R(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ag(t){if(F.isDocumentKey(t))throw new R(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function du(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":V()}function Wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new R(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=du(t);throw new R(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function UA(t,e){if(e<=0)throw new R(S.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new R(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new R(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,FA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new R(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new R(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lg(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new lI;switch(n.type){case"gapi":const r=n.client;return new dI(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new R(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=sg.get(e);n&&($("ComponentProvider","Removing Datastore"),sg.delete(e),n.terminate())}(this),Promise.resolve()}}function VA(t,e,n,r={}){var i;const s=(t=Wt(t,fu))._getSettings();if(s.host!=="firestore.googleapis.com"&&s.host!==e&&Dh("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,l;if(typeof r.mockUserToken=="string")o=r.mockUserToken,l=He.MOCK_USER;else{o=BS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new R(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new He(u)}t._authCredentials=new uI(new nw(o,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xe(this.firestore,e,this._key)}}class Jt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jt(this.firestore,e,this._query)}}class Wn extends Jt{constructor(e,n,r){super(e,n,ru(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xe(this.firestore,null,new F(e))}withConverter(e){return new Wn(this.firestore,e,this._path)}}function l_(t,e,...n){if(t=Ne(t),a_("collection","path",e),t instanceof fu){const r=ue.fromString(e,...n);return ag(r),new Wn(t,null,r)}{if(!(t instanceof Xe||t instanceof Wn))throw new R(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return ag(r),new Wn(t.firestore,null,r)}}function oo(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=rw.R()),a_("doc","path",e),t instanceof fu){const r=ue.fromString(e,...n);return og(r),new Xe(t,null,new F(r))}{if(!(t instanceof Xe||t instanceof Wn))throw new R(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ue.fromString(e,...n));return og(r),new Xe(t.firestore,t instanceof Wn?t.converter:null,new F(r))}}function BA(t,e){return t=Ne(t),e=Ne(e),t instanceof Jt&&e instanceof Jt&&t.firestore===e.firestore&&No(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.qc=Promise.resolve(),this.Uc=[],this.Kc=!1,this.Gc=[],this.Qc=null,this.jc=!1,this.zc=!1,this.Wc=[],this.ko=new Bw(this,"async_queue_retry"),this.Hc=()=>{const n=pc();n&&$("AsyncQueue","Visibility state changed to "+n.visibilityState),this.ko.Vo()};const e=pc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Hc)}get isShuttingDown(){return this.Kc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Jc(),this.Yc(e)}enterRestrictedMode(e){if(!this.Kc){this.Kc=!0,this.zc=e||!1;const n=pc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Hc)}}enqueue(e){if(this.Jc(),this.Kc)return new Promise(()=>{});const n=new Kn;return this.Yc(()=>this.Kc&&this.zc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Uc.push(e),this.Zc()))}async Zc(){if(this.Uc.length!==0){try{await this.Uc[0](),this.Uc.shift(),this.ko.reset()}catch(e){if(!xo(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.Uc.length>0&&this.ko.vo(()=>this.Zc())}}Yc(e){const n=this.qc.then(()=>(this.jc=!0,e().catch(r=>{this.Qc=r,this.jc=!1;const i=function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),o}(r);throw yn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.jc=!1,r))));return this.qc=n,n}enqueueAfterDelay(e,n,r){this.Jc(),this.Wc.indexOf(e)>-1&&(n=0);const i=Cf.createAndSchedule(this,e,n,r,s=>this.Xc(s));return this.Gc.push(i),i}Jc(){this.Qc&&V()}verifyOperationInProgress(){}async ta(){let e;do e=this.qc,await e;while(e!==this.qc)}ea(e){for(const n of this.Gc)if(n.timerId===e)return!0;return!1}na(e){return this.ta().then(()=>{this.Gc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Gc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.ta()})}sa(e){this.Wc.push(e)}Xc(e){const n=this.Gc.indexOf(e);this.Gc.splice(n,1)}}function ug(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Fi extends fu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new jA,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||u_(this),this._firestoreClient.terminate()}}function zA(t,e){const n=typeof t=="object"?t:Yv(),r=typeof t=="string"?t:e||"(default)",i=zd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=FS("firestore");s&&VA(i,...s)}return i}function Df(t){return t._firestoreClient||u_(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function u_(t){var e;const n=t._freezeSettings(),r=function(i,s,o,l){return new SI(i,s,o,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new RA(t._authCredentials,t._appCheckCredentials,t._queue,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ui(tt.fromBase64String(e))}catch(n){throw new R(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ui(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new R(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new R(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new R(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=/^__.*__$/;class GA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ur(e,this.data,this.fieldMask,n,this.fieldTransforms):new Do(e,this.data,n,this.fieldTransforms)}}class c_{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ur(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function h_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw V()}}class bf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.Tt=r,this.ignoreUndefinedProperties=i,s===void 0&&this.ia(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ra(){return this.settings.ra}oa(e){return new bf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.Tt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ua(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.aa(e),i}ha(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.oa({path:r,ca:!1});return i.ia(),i}la(e){return this.oa({path:void 0,ca:!0})}fa(e){return Tl(e,this.settings.methodName,this.settings.da||!1,this.path,this.settings._a)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}ia(){if(this.path)for(let e=0;e<this.path.length;e++)this.aa(this.path.get(e))}aa(e){if(e.length===0)throw this.fa("Document fields must not be empty");if(h_(this.ra)&&HA.test(e))throw this.fa('Document fields cannot begin and end with "__"')}}class qA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.Tt=r||uu(e)}wa(e,n,r,i=!1){return new bf({ra:e,methodName:n,_a:r,path:Ke.emptyPath(),ca:!1,da:i},this.databaseId,this.Tt,this.ignoreUndefinedProperties)}}function Mf(t){const e=t._freezeSettings(),n=uu(t._databaseId);return new qA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function KA(t,e,n,r,i,s={}){const o=t.wa(s.merge||s.mergeFields?2:0,e,n,i);Of("Data must be an object, but it was:",o,r);const l=d_(r,o);let u,c;if(s.merge)u=new vt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const f=[];for(const a of s.mergeFields){const h=zh(e,a,n);if(!o.contains(h))throw new R(S.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);p_(f,h)||f.push(h)}u=new vt(f),c=o.fieldTransforms.filter(a=>u.covers(a.field))}else u=null,c=o.fieldTransforms;return new GA(new ut(l),u,c)}class mu extends Pf{_toFieldTransform(e){if(e.ra!==2)throw e.ra===1?e.fa(`${this._methodName}() can only appear at the top level of your update data`):e.fa(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof mu}}function WA(t,e,n,r){const i=t.wa(1,e,n);Of("Data must be an object, but it was:",i,r);const s=[],o=ut.empty();zr(r,(u,c)=>{const f=Lf(e,u,n);c=Ne(c);const a=i.ha(f);if(c instanceof mu)s.push(f);else{const h=Mo(c,a);h!=null&&(s.push(f),o.set(f,h))}});const l=new vt(s);return new c_(o,l,i.fieldTransforms)}function QA(t,e,n,r,i,s){const o=t.wa(1,e,n),l=[zh(e,r,n)],u=[i];if(s.length%2!=0)throw new R(S.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)l.push(zh(e,s[h])),u.push(s[h+1]);const c=[],f=ut.empty();for(let h=l.length-1;h>=0;--h)if(!p_(c,l[h])){const d=l[h];let m=u[h];m=Ne(m);const y=o.ha(d);if(m instanceof mu)c.push(d);else{const w=Mo(m,y);w!=null&&(c.push(d),f.set(d,w))}}const a=new vt(c);return new c_(f,a,o.fieldTransforms)}function XA(t,e,n,r=!1){return Mo(n,t.wa(r?4:3,e))}function Mo(t,e){if(f_(t=Ne(t)))return Of("Unsupported field value:",e,t),d_(t,e);if(t instanceof Pf)return function(n,r){if(!h_(r.ra))throw r.fa(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.fa(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.ca&&e.ra!==4)throw e.fa("Nested arrays are not supported");return function(n,r){const i=[];let s=0;for(const o of n){let l=Mo(o,r.la(s));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),s++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Ne(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return VI(r.Tt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Ae.fromDate(n);return{timestampValue:wl(r.Tt,i)}}if(n instanceof Ae){const i=new Ae(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:wl(r.Tt,i)}}if(n instanceof Rf)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Ui)return{bytesValue:bw(r.Tt,n._byteString)};if(n instanceof Xe){const i=r.databaseId,s=n.firestore._databaseId;if(!s.isEqual(i))throw r.fa(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:vf(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.fa(`Unsupported field value: ${du(n)}`)}(t,e)}function d_(t,e){const n={};return iw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zr(t,(r,i)=>{const s=Mo(i,e.ua(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function f_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Rf||t instanceof Ui||t instanceof Xe||t instanceof Pf)}function Of(t,e,n){if(!f_(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=du(n);throw r==="an object"?e.fa(t+" a custom object"):e.fa(t+" "+r)}}function zh(t,e,n){if((e=Ne(e))instanceof pu)return e._internalPath;if(typeof e=="string")return Lf(t,e);throw Tl("Field path arguments must be of type string or ",t,!1,void 0,n)}const YA=new RegExp("[~\\*/\\[\\]]");function Lf(t,e,n){if(e.search(YA)>=0)throw Tl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pu(...e.split("."))._internalPath}catch{throw Tl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new R(S.INVALID_ARGUMENT,l+t+u)}function p_(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field($f("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class JA extends m_{data(){return super.data()}}function $f(t,e){return typeof e=="string"?Lf(t,e):e instanceof pu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new R(S.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ff{}class Uf extends Ff{}function ex(t,e,...n){let r=[];e instanceof Ff&&r.push(e),r=r.concat(n),function(i){const s=i.filter(l=>l instanceof Bf).length,o=i.filter(l=>l instanceof Vf).length;if(s>1||s>0&&o>0)throw new R(S.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Vf extends Uf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Vf(e,n,r)}_apply(e){const n=this._parse(e);return g_(e._query,n),new Jt(e.firestore,e.converter,Oh(e._query,n))}_parse(e){const n=Mf(e.firestore);return function(i,s,o,l,u,c,f){let a;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new R(S.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){hg(f,c);const h=[];for(const d of f)h.push(cg(l,i,d));a={arrayValue:{values:h}}}else a=cg(l,i,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||hg(f,c),a=XA(o,s,f,c==="in"||c==="not-in");return ke.create(u,c,a)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Bf extends Ff{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bf(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ft.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,i){let s=r;const o=i.getFlattenedFilters();for(const l of o)g_(s,l),s=Oh(s,l)}(e._query,n),new Jt(e.firestore,e.converter,Oh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class jf extends Uf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new jf(e,n)}_apply(e){const n=function(r,i,s){if(r.startAt!==null)throw new R(S.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new R(S.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new gi(i,s);return function(l,u){if(yf(l)===null){const c=iu(l);c!==null&&y_(l,c,u.field)}}(r,o),o}(e._query,this._field,this._direction);return new Jt(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new Wi(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function tx(t,e="asc"){const n=e,r=$f("orderBy",t);return jf._create(r,n)}class zf extends Uf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zf(e,n,r)}_apply(e){return new Jt(e.firestore,e.converter,gl(e._query,this._limit,this._limitType))}}function nx(t){return UA("limit",t),zf._create("limit",t,"F")}function cg(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new R(S.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pw(e)&&n.indexOf("/")!==-1)throw new R(S.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ue.fromString(n));if(!F.isDocumentKey(r))throw new R(S.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lm(t,new F(r))}if(n instanceof Xe)return Lm(t,n._key);throw new R(S.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${du(n)}.`)}function hg(t,e){if(!Array.isArray(t)||t.length===0)throw new R(S.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g_(t,e){if(e.isInequality()){const r=iu(t),i=e.field;if(r!==null&&!r.isEqual(i))throw new R(S.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=yf(t);s!==null&&y_(t,i,s)}const n=function(r,i){for(const s of r)for(const o of s.getFlattenedFilters())if(i.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new R(S.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new R(S.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function y_(t,e,n){if(!n.isEqual(e))throw new R(S.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class rx{convertValue(e,n="none"){switch(Fr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw V()}}convertObject(e,n){const r={};return zr(e.fields,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Rf(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ow(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(no(e));default:return null}}convertTimestamp(e){const n=Zn(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ue.fromString(e);ae(Fw(r));const i=new to(r.get(1),r.get(3)),s=new F(r.popFirst(5));return i.isEqual(n)||yn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class v_ extends m_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field($f("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class xa extends v_{data(e={}){return super.data(e)}}class sx{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ps(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xa(this._firestore,this._userDataWriter,r.key,r,new ps(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new R(S.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(o=>{const l=new xa(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ps(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>i||o.type!==3).map(o=>{const l=new xa(r._firestore,r._userDataWriter,o.doc.key,o.doc,new ps(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,c=-1;return o.type!==0&&(u=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),o.type!==1&&(s=s.add(o.doc),c=s.indexOf(o.doc.key)),{type:ox(o.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function ox(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return V()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(t){t=Wt(t,Xe);const e=Wt(t.firestore,Fi);return $A(Df(e),t._key).then(n=>E_(e,t,n))}class w_ extends rx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ui(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xe(this.firestore,null,n)}}function __(t,e,n){t=Wt(t,Xe);const r=Wt(t.firestore,Fi),i=ix(t.converter,e,n);return S_(r,[KA(Mf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,qt.none())])}function T_(t,e,n,...r){t=Wt(t,Xe);const i=Wt(t.firestore,Fi),s=Mf(i);let o;return o=typeof(e=Ne(e))=="string"||e instanceof pu?QA(s,"updateDoc",t._key,e,n,r):WA(s,"updateDoc",t._key,e),S_(i,[o.toMutation(t._key,qt.exists(!0))])}function dg(t,...e){var n,r,i;t=Ne(t);let s={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||ug(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges};if(ug(e[o])){const a=e[o];e[o]=(n=a.next)===null||n===void 0?void 0:n.bind(a),e[o+1]=(r=a.error)===null||r===void 0?void 0:r.bind(a),e[o+2]=(i=a.complete)===null||i===void 0?void 0:i.bind(a)}let u,c,f;if(t instanceof Xe)c=Wt(t.firestore,Fi),f=ru(t._key.path),u={next:a=>{e[o]&&e[o](E_(c,t,a))},error:e[o+1],complete:e[o+2]};else{const a=Wt(t,Jt);c=Wt(a.firestore,Fi),f=a._query;const h=new w_(c);u={next:d=>{e[o]&&e[o](new sx(c,h,a,d))},error:e[o+1],complete:e[o+2]},ZA(t._query)}return function(a,h,d,m){const y=new s_(m),w=new Jw(h,y,d);return a.asyncQueue.enqueueAndForget(async()=>Xw(await jh(a),w)),()=>{y.Pc(),a.asyncQueue.enqueueAndForget(async()=>Yw(await jh(a),w))}}(Df(c),f,l,u)}function S_(t,e){return function(n,r){const i=new Kn;return n.asyncQueue.enqueueAndForget(async()=>TA(await LA(n),r,i)),i.promise}(Df(t),e)}function E_(t,e,n){const r=n.docs.get(e._key),i=new w_(t);return new v_(t,i,e._key,r,new ps(n.hasPendingWrites,n.fromCache),e.converter)}(function(t,e=!0){(function(n){Ki=n})(yo),Di(new Or("firestore",(n,{instanceIdentifier:r,options:i})=>{const s=n.getProvider("app").getImmediate(),o=new Fi(new cI(n.getProvider("auth-internal")),new pI(n.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new R(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new to(l.options.projectId,u)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Cr(Rm,"3.8.4",t),Cr(Rm,"3.8.4","esm2017")})();function Gf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function k_(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ax=k_,I_=new mo("auth","Firebase",k_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fg=new Bd("@firebase/auth");function Na(t,...e){fg.logLevel<=te.ERROR&&fg.error(`Auth (${yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t,...e){throw qf(t,...e)}function Qt(t,...e){return qf(t,...e)}function C_(t,e,n){const r=Object.assign(Object.assign({},ax()),{[e]:n});return new mo("auth","Firebase",r).create(e,{appName:t.name})}function lx(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Zt(t,"argument-error"),C_(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function qf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return I_.create(t,...e)}function B(t,e,...n){if(!t)throw qf(e,...n)}function un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Na(e),new Error(e)}function _n(t,e){t||un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg=new Map;function cn(t){_n(t instanceof Function,"Expected a class definition");let e=pg.get(t);return e?(_n(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,pg.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(t,e){const n=zd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(il(s,e!=null?e:{}))return i;Zt(i,"already-initialized")}return n.initialize({options:e})}function cx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(cn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hx(){return mg()==="http:"||mg()==="https:"}function mg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hx()||zS()||"connection"in navigator)?navigator.onLine:!0}function fx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,n){this.shortDelay=e,this.longDelay=n,_n(n>e,"Short delay should be less than long delay!"),this.isMobile=jS()||HS()}get(){return dx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t,e){_n(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=new Oo(3e4,6e4);function gx(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gu(t,e,n,r,i={}){return x_(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=go(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),A_.fetch()(N_(t,t.config.apiHost,n,l),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function x_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},px),e);try{const i=new vx(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ha(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ha(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ha(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ha(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw C_(t,f,c);Zt(t,f)}}catch(i){if(i instanceof Sn)throw i;Zt(t,"internal-error",{message:String(i)})}}async function yx(t,e,n,r,i={}){const s=await gu(t,e,n,r,i);return"mfaPendingCredential"in s&&Zt(t,"multi-factor-auth-required",{_serverResponse:s}),s}function N_(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Kf(t.config,i):`${t.config.apiScheme}://${i}`}class vx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Qt(this.auth,"network-request-failed")),mx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ha(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Qt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wx(t,e){return gu(t,"POST","/v1/accounts:delete",e)}async function _x(t,e){return gu(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tx(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),i=Wf(r);B(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ns(mc(i.auth_time)),issuedAtTime:Ns(mc(i.iat)),expirationTime:Ns(mc(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function mc(t){return Number(t)*1e3}function Wf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Na("JWT malformed, contained fewer than 3 sections"),null;try{const i=Gv(n);return i?JSON.parse(i):(Na("Failed to decode base64 JWT payload"),null)}catch(i){return Na("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Sx(t){const e=Wf(t);return B(e,"internal-error"),B(typeof e.exp<"u","internal-error"),B(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ao(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sn&&Ex(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Ex({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ns(this.lastLoginAt),this.creationTime=Ns(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sl(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ao(t,_x(n,{idToken:r}));B(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Ax(s.providerUserInfo):[],l=Cx(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),f=u?c:!1,a={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new D_(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,a)}async function Ix(t){const e=Ne(t);await Sl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Cx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Ax(t){return t.map(e=>{var{providerId:n}=e,r=Gf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx(t,e){const n=await x_(t,{},async()=>{const r=go({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=N_(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",A_.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){B(e.idToken,"internal-error"),B(typeof e.idToken<"u","internal-error"),B(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Sx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return B(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await xx(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new lo;return r&&(B(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(B(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(B(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lo,this.toJSON())}_performRefresh(){return un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t,e){B(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Gf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new D_(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ao(this,this.stsTokenManager.getToken(this.auth,e));return B(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Tx(this,e)}reload(){return Ix(this)}_assign(e){this!==e&&(B(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Nr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ao(this,wx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,f;const a=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,d=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,y=(l=n.tenantId)!==null&&l!==void 0?l:void 0,w=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,p=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:v,emailVerified:T,isAnonymous:A,providerData:x,stsTokenManager:N}=n;B(v&&N,e,"internal-error");const L=lo.fromJSON(this.name,N);B(typeof v=="string",e,"internal-error"),In(a,e.name),In(h,e.name),B(typeof T=="boolean",e,"internal-error"),B(typeof A=="boolean",e,"internal-error"),In(d,e.name),In(m,e.name),In(y,e.name),In(w,e.name),In(p,e.name),In(g,e.name);const U=new Nr({uid:v,auth:e,email:h,emailVerified:T,displayName:a,isAnonymous:A,photoURL:m,phoneNumber:d,tenantId:y,stsTokenManager:L,createdAt:p,lastLoginAt:g});return x&&Array.isArray(x)&&(U.providerData=x.map(K=>Object.assign({},K))),w&&(U._redirectEventId=w),U}static async _fromIdTokenResponse(e,n,r=!1){const i=new lo;i.updateFromServerResponse(n);const s=new Nr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sl(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}P_.type="NONE";const gg=P_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t,e,n){return`firebase:${t}:${e}:${n}`}class wi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Da(this.userKey,i.apiKey,s),this.fullPersistenceKey=Da("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Nr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new wi(cn(gg),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||cn(gg);const o=Da(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const f=await c._get(o);if(f){const a=Nr._fromJSON(e,f);c!==s&&(l=a),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new wi(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new wi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(M_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(R_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(L_(e))return"Blackberry";if($_(e))return"Webos";if(Qf(e))return"Safari";if((e.includes("chrome/")||b_(e))&&!e.includes("edge/"))return"Chrome";if(O_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function R_(t=et()){return/firefox\//i.test(t)}function Qf(t=et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function b_(t=et()){return/crios\//i.test(t)}function M_(t=et()){return/iemobile/i.test(t)}function O_(t=et()){return/android/i.test(t)}function L_(t=et()){return/blackberry/i.test(t)}function $_(t=et()){return/webos/i.test(t)}function yu(t=et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Nx(t=et()){var e;return yu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Dx(){return GS()&&document.documentMode===10}function F_(t=et()){return yu(t)||O_(t)||$_(t)||L_(t)||/windows phone/i.test(t)||M_(t)}function Px(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(t,e=[]){let n;switch(t){case"Browser":n=yg(et());break;case"Worker":n=`${yg(et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new vg(this),this.idTokenSubscription=new vg(this),this.beforeStateQueue=new Rx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=I_,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=cn(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await wi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u==null?void 0:u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Ne(e):null;return n&&B(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&B(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(cn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&cn(e)||this._popupRedirectResolver;B(n,this,"argument-error"),this.redirectPersistenceManager=await wi.create(this,[cn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return B(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,r,i):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=U_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function vu(t){return Ne(t)}class vg{constructor(e){this.auth=e,this.observer=null,this.addObserver=JS(n=>this.observer=n)}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Mx(t,e,n){const r=vu(t);B(r._canInitEmulator,r,"emulator-config-failed"),B(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=V_(e),{host:o,port:l}=Ox(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Lx()}function V_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Ox(t){const e=V_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:wg(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:wg(o)}}}function wg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Lx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return un("not implemented")}_getIdTokenResponse(e){return un("not implemented")}_linkToIdToken(e,n){return un("not implemented")}_getReauthenticationResolver(e){return un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _i(t,e){return yx(t,"POST","/v1/accounts:signInWithIdp",gx(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x="http://localhost";class Ur extends B_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ur(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Zt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Gf(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ur(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return _i(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,_i(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_i(e,n)}buildRequest(){const e={requestUri:$x,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=go(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Xf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn extends Lo{constructor(){super("facebook.com")}static credential(e){return Ur._fromParams({providerId:rn.PROVIDER_ID,signInMethod:rn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rn.credentialFromTaggedObject(e)}static credentialFromError(e){return rn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rn.credential(e.oauthAccessToken)}catch{return null}}}rn.FACEBOOK_SIGN_IN_METHOD="facebook.com";rn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn extends Lo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ur._fromParams({providerId:sn.PROVIDER_ID,signInMethod:sn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return sn.credentialFromTaggedObject(e)}static credentialFromError(e){return sn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return sn.credential(n,r)}catch{return null}}}sn.GOOGLE_SIGN_IN_METHOD="google.com";sn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn extends Lo{constructor(){super("github.com")}static credential(e){return Ur._fromParams({providerId:bn.PROVIDER_ID,signInMethod:bn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bn.credentialFromTaggedObject(e)}static credentialFromError(e){return bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bn.credential(e.oauthAccessToken)}catch{return null}}}bn.GITHUB_SIGN_IN_METHOD="github.com";bn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends Lo{constructor(){super("twitter.com")}static credential(e,n){return Ur._fromParams({providerId:Mn.PROVIDER_ID,signInMethod:Mn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Mn.credentialFromTaggedObject(e)}static credentialFromError(e){return Mn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Mn.credential(n,r)}catch{return null}}}Mn.TWITTER_SIGN_IN_METHOD="twitter.com";Mn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Nr._fromIdTokenResponse(e,r,i),o=_g(r);return new Vi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=_g(r);return new Vi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function _g(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El extends Sn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,El.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new El(e,n,r,i)}}function j_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?El._fromErrorAndOperation(t,s,e,r):s})}async function Fx(t,e,n=!1){const r=await ao(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Vi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ux(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await ao(t,j_(r,i,e,t),n);B(s.idToken,r,"internal-error");const o=Wf(s.idToken);B(o,r,"internal-error");const{sub:l}=o;return B(t.uid===l,r,"user-mismatch"),Vi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Zt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vx(t,e,n=!1){const r="signIn",i=await j_(t,r,e),s=await Vi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function Bx(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function jx(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function zx(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}const kl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z_{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kl,"1"),this.storage.removeItem(kl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(){const t=et();return Qf(t)||yu(t)}const Gx=1e3,qx=10;class H_ extends z_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Hx()&&Px(),this.fallbackToPolling=F_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Dx()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qx):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Gx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}H_.type="LOCAL";const Kx=H_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends z_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}G_.type="SESSION";const q_=G_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new wu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await Wx(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qx{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=Yf("",20);i.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(a){const h=a;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(h.data.response);break;default:clearTimeout(f),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return window}function Xx(t){Xt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(){return typeof Xt().WorkerGlobalScope<"u"&&typeof Xt().importScripts=="function"}async function Yx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Zx(){return K_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="firebaseLocalStorageDb",eN=1,Il="firebaseLocalStorage",Q_="fbase_key";class $o{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function _u(t,e){return t.transaction([Il],e?"readwrite":"readonly").objectStore(Il)}function tN(){const t=indexedDB.deleteDatabase(W_);return new $o(t).toPromise()}function Gh(){const t=indexedDB.open(W_,eN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Il,{keyPath:Q_})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Il)?e(r):(r.close(),await tN(),e(await Gh()))})})}async function Tg(t,e,n){const r=_u(t,!0).put({[Q_]:e,value:n});return new $o(r).toPromise()}async function nN(t,e){const n=_u(t,!1).get(e),r=await new $o(n).toPromise();return r===void 0?null:r.value}function Sg(t,e){const n=_u(t,!0).delete(e);return new $o(n).toPromise()}const rN=800,iN=3;class X_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Gh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>iN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wu._getInstance(Zx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Yx(),!this.activeServiceWorker)return;this.sender=new Qx(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Jx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Gh();return await Tg(e,kl,"1"),await Sg(e,kl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Tg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>nN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Sg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=_u(i,!1).getAll();return new $o(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),rN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}X_.type="LOCAL";const sN=X_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function aN(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Qt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",oN().appendChild(r)})}function lN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new Oo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t,e){return e?cn(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf extends B_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _i(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _i(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _i(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uN(t){return Vx(t.auth,new Jf(t),t.bypassAuthState)}function cN(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),Ux(n,new Jf(t),t.bypassAuthState)}async function hN(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),Fx(n,new Jf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uN;case"linkViaPopup":case"linkViaRedirect":return hN;case"reauthViaPopup":case"reauthViaRedirect":return cN;default:Zt(this.auth,"internal-error")}}resolve(e){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_n(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN=new Oo(2e3,1e4);async function Z_(t,e,n){const r=vu(t);lx(t,e,Xf);const i=Y_(r,n);return new Er(r,"signInViaPopup",e,i).executeNotNull()}class Er extends J_{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Er.currentPopupAction&&Er.currentPopupAction.cancel(),Er.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return B(e,this.auth,"internal-error"),e}async onExecution(){_n(this.filter.length===1,"Popup operations only handle one event");const e=Yf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Qt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Er.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qt(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,dN.get())};e()}}Er.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="pendingRedirect",Pa=new Map;class pN extends J_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Pa.get(this.auth._key());if(!e){try{const r=await mN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Pa.set(this.auth._key(),e)}return this.bypassAuthState||Pa.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mN(t,e){const n=vN(e),r=yN(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function gN(t,e){Pa.set(t._key(),e)}function yN(t){return cn(t._redirectPersistence)}function vN(t){return Da(fN,t.config.apiKey,t.name)}async function wN(t,e,n=!1){const r=vu(t),i=Y_(r,e),o=await new pN(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=10*60*1e3;class TN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!e1(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Qt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_N&&this.cachedEventUids.clear(),this.cachedEventUids.has(Eg(e))}saveEventToCache(e){this.cachedEventUids.add(Eg(e)),this.lastProcessedEventTime=Date.now()}}function Eg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function e1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return e1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(t,e={}){return gu(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IN=/^https?/;async function CN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await EN(t);for(const n of e)try{if(AN(n))return}catch{}Zt(t,"unauthorized-domain")}function AN(t){const e=Hh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IN.test(n))return!1;if(kN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=new Oo(3e4,6e4);function kg(){const t=Xt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function NN(t){return new Promise((e,n)=>{var r,i,s;function o(){kg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{kg(),n(Qt(t,"network-request-failed"))},timeout:xN.get()})}if(!((i=(r=Xt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xt().gapi)===null||s===void 0)&&s.load)o();else{const l=lN("iframefcb");return Xt()[l]=()=>{gapi.load?o():n(Qt(t,"network-request-failed"))},aN(`https://apis.google.com/js/api.js?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw Ra=null,e})}let Ra=null;function DN(t){return Ra=Ra||NN(t),Ra}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new Oo(5e3,15e3),RN="__/auth/iframe",bN="emulator/auth/iframe",MN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ON=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function LN(t){const e=t.config;B(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Kf(e,bN):`https://${t.config.authDomain}/${RN}`,r={apiKey:e.apiKey,appName:t.name,v:yo},i=ON.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${go(r).slice(1)}`}async function $N(t){const e=await DN(t),n=Xt().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:LN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Qt(t,"network-request-failed"),l=Xt().setTimeout(()=>{s(o)},PN.get());function u(){Xt().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},UN=500,VN=600,BN="_blank",jN="http://localhost";class Ig{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zN(t,e,n,r=UN,i=VN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},FN),{width:r.toString(),height:i.toString(),top:s,left:o}),c=et().toLowerCase();n&&(l=b_(c)?BN:n),R_(c)&&(e=e||jN,u.scrollbars="yes");const f=Object.entries(u).reduce((h,[d,m])=>`${h}${d}=${m},`,"");if(Nx(c)&&l!=="_self")return HN(e||"",l),new Ig(null);const a=window.open(e||"",l,f);B(a,t,"popup-blocked");try{a.focus()}catch{}return new Ig(a)}function HN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="__/auth/handler",qN="emulator/auth/handler";function Cg(t,e,n,r,i,s){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yo,eventId:i};if(e instanceof Xf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",YS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,c]of Object.entries(s||{}))o[u]=c}if(e instanceof Lo){const u=e.getScopes().filter(c=>c!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];return`${KN(t)}?${go(l).slice(1)}`}function KN({config:t}){return t.emulator?Kf(t,qN):`https://${t.authDomain}/${GN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc="webStorageSupport";class WN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=q_,this._completeRedirectFn=wN,this._overrideRedirectResult=gN}async _openPopup(e,n,r,i){var s;_n((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=Cg(e,n,r,Hh(),i);return zN(e,o,Yf())}async _openRedirect(e,n,r,i){return await this._originValidation(e),Xx(Cg(e,n,r,Hh(),i)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(_n(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $N(e),r=new TN(e);return n.register("authEvent",i=>(B(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(gc,{type:gc},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[gc];o!==void 0&&n(!!o),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return F_()||Qf()||yu()}}const QN=WN;var Ag="@firebase/auth",xg="0.21.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function JN(t){Di(new Or("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=r.options;return((l,u)=>{B(s&&!s.includes(":"),"invalid-api-key",{appName:l.name}),B(!(o!=null&&o.includes(":")),"argument-error",{appName:l.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:U_(t)},f=new bx(l,u,c);return cx(f,n),f})(r,i)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Di(new Or("auth-internal",e=>{const n=vu(e.getProvider("auth").getImmediate());return(r=>new XN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cr(Ag,xg,YN(t)),Cr(Ag,xg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=5*60,eD=Kv("authIdTokenMaxAge")||ZN;let Ng=null;const tD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eD)return;const i=n==null?void 0:n.token;Ng!==i&&(Ng=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function nD(t=Yv()){const e=zd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ux(t,{popupRedirectResolver:QN,persistence:[sN,Kx,q_]}),r=Kv("authTokenSyncURL");if(r){const s=tD(r);jx(n,s,()=>s(n.currentUser)),Bx(n,o=>s(o))}const i=qv("auth");return i&&Mx(n,`http://${i}`),n}JN("Browser");var Z=(t=>(t[t.Spawn=0]="Spawn",t[t.Normal=1]="Normal",t[t.Dying=2]="Dying",t[t.Dead=3]="Dead",t))(Z||{}),mt=(t=>(t[t.Normal=0]="Normal",t[t.Attack=1]="Attack",t[t.Push=2]="Push",t[t.Regenerate=3]="Regenerate",t))(mt||{});class Fo{constructor(e,n,r,i){E(this,"x");E(this,"y");E(this,"w");E(this,"h");E(this,"color");E(this,"state");this.x=e,this.y=n,this.w=i,this.h=r,this.color="",this.state=1}}const rD={ArrowRight:"right",d:"right",ArrowUp:"up",w:"up",ArrowLeft:"left",a:"left",ArrowDown:"down",s:"down"," ":"attack",q:"push",p:"pause",r:"enemySpawn"};class iD{constructor(){E(this,"mouse");E(this,"mouseDown");E(this,"keyState");E(this,"keyMap");this.mouse={x:0,y:0},this.mouseDown=!1,this.keyState={right:!1,up:!1,left:!1,down:!1,attack:!1,push:!1,pause:!1,enemySpawn:!1},this.keyMap=rD,this.addKeyListeners(),this.addMouseListener()}addKeyListeners(){document.addEventListener("keydown",e=>this.keyDownHandler(e),!1),document.addEventListener("keyup",e=>this.keyUpHandler(e),!1)}keyDownHandler(e){const n=this.keyMap[e.key];this.keyState[n]=!0}keyUpHandler(e){const n=this.keyMap[e.key];this.keyState[n]=!1}mousePosition(e){this.mouse.x=e.x*1.5,this.mouse.y=e.y*1.5}addMouseListener(){document.addEventListener("mousedown",()=>this.mouseDown=!0,!1),document.addEventListener("mousemove",e=>this.mousePosition(e),!1),document.addEventListener("mouseup",()=>this.mouseDown=!1,!1)}}const Bt=new iD;class sD{constructor(){E(this,"interval");E(this,"maxPoints");E(this,"cool");E(this,"instances");this.interval=5,this.maxPoints=5,this.cool=0,this.instances=[]}draw(e){this.instances.forEach(n=>n.draw(e))}controller(){this.cool>0&&--this.cool;for(let e=0;e<this.instances.length;e++)this.instances[e].life<=0?this.instances.splice(e,1):this.instances[e].live()}spawn(e){if(this.instances.length<this.maxPoints&&this.cool<=0){const n=new oD(e);this.instances.push(n),this.cool=this.interval}}reset(){this.instances=[],this.cool=0}}class oD extends Fo{constructor(n){super(n.x,n.y,0,0);E(this,"life");this.life=100,this.spawn(n)}spawn(n){const r=n.w,i=n.h;let s=Math.random();s<.5?(this.x+=s<.5?-r/2-1:r/2+1,s=Math.random(),this.y+=s*(i+10)-5):(this.x+=s*(r+10)-5,s=Math.random(),this.y+=s<.5?-i/2-1:i/2+1)}draw(n){n.font="18px Comic Sans MS",n.fillStyle=`rgba(225, 0, 0, ${this.life/100})`,n.fillText("-1",this.x,this.y)}live(){this.life>0&&--this.life}}const tr=new sD,aD=(t,e)=>{const{w:n,h:r,cool:i,damaging:s}=e;let{x:o,y:l}=e;const u=Ye.normal.colorNorm,c=Ye.normal.colorCool,f=Ye.normal.colorDamg;o-=n/2,l-=r/2,t.fillStyle=i>0?c:u,s&&(t.fillStyle=f),t.fillRect(o,l,n,r)},lD=(t,e)=>{const{w:n,h:r,cool:i,damaging:s}=e;let{x:o,y:l}=e;const u=Ye.gold.colorNorm,c=Ye.gold.colorCool,f=Ye.gold.colorDamg;o-=n/2,l-=r/2,t.fillStyle=i>0?c:u,s&&(t.fillStyle=f),t.fillRect(o,l,n,r)},uD=(t,e)=>{const{h:n,cool:r,damaging:i}=e;let{x:s,y:o,w:l}=e;const u=Ye.enemy.colorNorm,c=Ye.enemy.colorCool,f=Ye.enemy.colorDamg;l/=2,s-=l/2,o-=n/2,t.fillStyle=r>0?c:u,i&&(t.fillStyle=f),t.beginPath(),t.strokeStyle="black",t.moveTo(s-l/8,o),t.bezierCurveTo(s-l/8,o-n/4,s+l+l/8,o-n/4,s+l+l/8,o),t.bezierCurveTo(s+l*2,o,s+l*2,o+n,s+l-l/8,o+n),t.bezierCurveTo(s+l-l/8,o+n*1.75,s-l*2,o+n/4,s-10,o+n/2-10),t.bezierCurveTo(s-l-5,o+n/2,s-l/4,o,s-l/8,o),t.fill(),t.closePath(),t.lineWidth=3},Ye={normal:{name:"Default",colorNorm:"#ffd6cc",colorCool:"#a8c7f7",colorDamg:"#f25f57",draw:aD,cost:0},gold:{name:"Pee",colorNorm:"#e8eb5b",colorCool:"#cbccc6",colorDamg:"#f21f90",draw:lD,cost:50},enemy:{name:"Enemy",colorNorm:"#81ea25",colorCool:"#bdf090",colorDamg:"#f25f57",draw:uD,cost:100}},Zf=()=>{const t=P.ctx;if(t==null)return;const e=t.canvas.width,r=t.canvas.height/40,i=20,s=7,o=r/2,l=Ye[I.body];t.fillStyle="black",t.fillRect(e/2,i,e/2-i,r),t.fillStyle=l.colorNorm,I&&I.damaging&&(t.fillStyle=l.colorDamg,console.log("SCENE DRAW DAMAGE")),t.font=`${o}px monospace`,t.fillText(I.health+"/"+I.maxHealth,e*(3/4)-10,o*(7/3)),t.fillRect(e/2+s,i+s,Math.max(0,I.health/I.maxHealth*(e/2-i-s*2)),r+-s*2),t.fillStyle="black",t.fillRect(e*(3/4)+i/2,i+r+i,e/4-i*(3/2),r),t.fillStyle="#33cc33",I.power>0&&t.fillRect(e*(3/4)+i/2+s,i+r+i+s,I.power/I.maxPower*(e/4-i*(3/2)-s*2),r-s*2),t.fillStyle="black",t.fillRect(e/2,i+r+i,e/4-i/2,r),t.fillStyle=l.colorCool,t.fillRect(e/2+s,i+r+i+s,(1-I.cool/I.maxCool)*(e/4-i/2-s*2),r-s*2)},cD=t=>{const e=t.canvas.width,n=t.canvas.height;t.fillStyle="rgba(225, 220, 212, 0.4)",t.fillRect(0,0,e,n),t.fillStyle="grey",t.font="50px monospace",t.fillText("PAUSE",e/2-t.measureText("Pause").width/2,n/2+10)},Dg=(t,e,n,r,i)=>{t.lineWidth=5,t.strokeStyle="black",t.beginPath(),t.moveTo(e,n),t.lineTo(r,i),t.stroke(),t.closePath();const s=Math.sqrt((i-n)*(i-n)+(r-e)*(r-e)),o=10;let[l,u]=[(-i+n+r-e)/s,(r-e+i-n)/s];t.beginPath(),t.moveTo(r-l*o,i-u*o),t.lineTo(r,i),l-=2*(r-e)/s,u-=2*(i-n)/s,t.lineTo(r+l*o,i+u*o),t.stroke(),t.closePath()},Pg=([t,e],[n,r])=>Math.abs(Math.sqrt((n-t)*(n-t)+(r-e)*(r-e)));class hD{constructor(){E(this,"instances");E(this,"currentPath");this.instances=[],this.currentPath=new yc}draw(e){this.instances.forEach(n=>n.draw(e)),this.currentPath.draw(e)}controller(){for(let e=0;e<this.instances.length;e++){const n=this.instances[e];if(n.health<=0){this.instances.splice(e,1);return}for(const r of q.instances)n.collides(r)&&r.pushLine()}Bt.mouseDown&&I.power>0?this.currentPath.add(Bt.mouse.x,Bt.mouse.y):this.currentPath.points.length>0&&(this.currentPath.planning=!1,this.currentPath.fixDimensions(),this.instances.push(this.currentPath),this.currentPath=new yc)}spawn(){const e=new yc;this.instances.push(e)}reset(){this.instances=[]}debug(e){const n=e.canvas.width-300;let r=e.canvas.height/2;e.fillStyle="black",e.font="20px Ariel",e.fillText("x -- Line -- x",n,r),r+=20,e.fillText("Mousedown:"+Bt.mouseDown,n,r),r+=20,e.fillText(`Mouse pos: (${Bt.mouse.x}, ${Bt.mouse.y})`,n,r),r+=20,e.fillText(`instances: ${this.instances.length}`,n,r),r+=40,this.instances.forEach(i=>{e.fillText(`Line points: ${i.points.length}`,n,r),r+=20,e.fillText(`Dimensions: (${i.x}, ${i.y}, ${i.w}, ${i.h}`,n,r),r+=40})}}class yc extends Fo{constructor(){super(0,0,0,0);E(this,"points");E(this,"planning");E(this,"x1");E(this,"x2");E(this,"y1");E(this,"y2");E(this,"health");this.points=[],this.planning=!0,this.x1=0,this.x2=0,this.y1=0,this.y2=0,this.health=50}draw(n){n.lineWidth=5,n.strokeStyle=this.planning?"rgba(15, 15, 15, 0.4)":`rgba(${(50-this.health)*4}, 
        0,
        0,
        ${(this.health+5)/50})`,n.beginPath(),this.points.forEach(r=>{n.lineTo(r[0],r[1])}),n.stroke(),n.closePath()}add(n,r){const i=this.points[this.points.length-1],s=[n,r];if(this.points.length==0){this.points.push([n,r]),this.x1=n,this.y1=r,this.x2=n,this.y2=r;return}Pg(i,s)>10&&(I.power--,this.points.push([n,r]),this.x1=Math.min(this.x1,n),this.y1=Math.min(this.y1,r),this.x2=Math.max(this.x2,n),this.y2=Math.max(this.y2,r))}fixDimensions(){this.x=(this.x1+this.x2)/2,this.y=(this.y1+this.y2)/2,this.w=this.x2-this.x1,this.h=this.y2-this.y1}collides(n){if(n==null)return!1;if(!(this.x+this.w/2<n.x-n.w/2||this.x-this.w/2>n.x+n.w/2)&&!(this.y+this.h/2<n.y-n.h/2||this.y-this.h/2>n.y+n.w/2)){for(const r of this.points)if(Pg(r,[n.x,n.y])<30)return this.health--,!0}return!1}}const Qn=new hD;var Uo=(t=>(t[t.move=0]="move",t[t.enemy=1]="enemy",t[t.cooldown=2]="cooldown",t[t.power=3]="power",t[t.draw_approach=4]="draw_approach",t[t.draw_gesture=5]="draw_gesture",t[t.draw_break=6]="draw_break",t[t.coins=7]="coins",t[t.goodLuck=8]="goodLuck",t[t.end=9]="end",t))(Uo||{});class dD{constructor(){E(this,"stageTimer");E(this,"stage");E(this,"check");E(this,"controlCheck");this.stageTimer=0,this.stage=0,this.check=!1,this.controlCheck=[0,0,0,0]}controller(e,n){++this.stageTimer;const r=Bt.keyState;switch(this.check&&(this.stage++,this.stageTimer=0,this.check=!1),this.stage){case 0:r.right&&(this.controlCheck[0]=1),r.up&&(this.controlCheck[1]=1),r.left&&(this.controlCheck[2]=1),r.down&&(this.controlCheck[3]=1),!this.controlCheck.includes(0)&&this.stageTimer>200&&(this.check=!0);break;case 1:q.instances.length==0&&q.spawn(e,n,I),P.score==1&&(this.check=!0);break;case 2:I.power=0,q.instances.length<2&&q.spawn(e,n,I),this.stageTimer>800&&(this.check=!0);break;case 3:q.instances.length<2&&q.spawn(e,n,I),this.stageTimer>1e3&&I.power>=I.maxPower&&(this.check=!0);break;case 4:q.instances.length<5&&q.spawn(e,n,I),this.stageTimer>200&&q.instances.forEach(i=>{i.distance<300&&(P.paused=!0)}),P.paused&&(this.check=!0);break;case 5:q.instances.length<5&&q.spawn(e,n,I),I.power<=0&&(P.paused=!1,this.check=!0);break;case 6:q.instances.length<5&&q.spawn(e,n,I),(Qn.instances.length<=0||this.stageTimer>2e3&&Qn.instances[0]&&Qn.instances[0].health<=50)&&(this.check=!0);break;case 7:q.instances.length<=0&&(this.check=!0);break;case 8:this.stageTimer>300&&(this.check=!0);break}}draw(e){const n=e.canvas.width,r=e.canvas.height;let i=0,s=r*(3/4);const o=r*(2/40)+40,l=100,u=20;let c="";switch(e.font="30px Comic Sans MS",this.stage){case 0:c="Use WASD or Arrow Keys to Move",i=n/2-e.measureText(c).width/2,s=r*(3/4),e.fillStyle="black",e.fillText(c,i,s);break;case 1:c="This is an enemy! Use space to kill him",i=n/2-e.measureText(c).width/2,s=r*(3/4),e.fillStyle="black",e.fillText(c,i,s);break;case 2:c="You can't attack while your cooling down",i=n/2-e.measureText(c).width/2,s=r*(3/4),e.fillStyle="black",e.fillText(c,i,s),Dg(e,n*(5/8)-10,o+u+l,n*(5/8)+10,o+u),c="cooldown",i=n*(5/8)-10-e.measureText(c).width/2,s=o+u*3+l,e.fillText(c,i,s);break;case 3:c="Killing blobs gets you power",i=n/2-e.measureText(c).width/2,s=r*(3/4),e.fillStyle="black",e.fillText(c,i,s),Dg(e,n*(7/8)+10,o+u+l,n*(7/8)-10,o+u),c="power",i=n*(7/8)+10-e.measureText(c).width/2,s=o+u*3+l,e.fillText(c,i,s);break;case 4:c="Sometimes you may get overwhelmed...",i=n/2-e.measureText(c).width/2,s=r*(3/4),e.fillStyle="black",e.fillText(c,i,s);break;case 5:c="Draw walls on the screen to protect yourself",i=n/2-e.measureText(c).width/2,s=r*(3/4),e.fillStyle="black",e.fillText(c,i,s);break;case 7:c="Collect coins and kill enemies,",i=n/2-e.measureText(c).width/2,s=r*(3/4),e.fillStyle="black",e.fillText(c,i,s),c="use your coins to update your stats and outfit",i=n/2-e.measureText(c).width/2,s+=34,e.fillText(c,i,s);break;case 8:c="Kill as many Blobs as you can,",i=n/2-e.measureText(c).width/2,s=r*(3/4),e.fillStyle="black",e.fillText(c,i,s),c="Good luck!",i=n/2-e.measureText(c).width/2,s+=34,e.fillText(c,i,s);break}}reset(){this.stageTimer=0,this.stage=0,this.check=!1,this.controlCheck=[0,0,0,0]}debug(e){e.font="20px Arial Bold",e.strokeStyle="black";const n=40;let r=e.canvas.height*6/8+100;switch(e.fillText("Stage: "+this.stage,n,r),r+=20,e.fillText("Timer: "+this.stageTimer,n,r),this.stage){case 1:r+=30,e.fillText(`Enemy State: ${q.instances[0].state}`,n,r);break}}}const nr=new dD;var ie=(t=>(t[t.menu=0]="menu",t[t.shop=1]="shop",t[t.shopMain=2]="shopMain",t[t.tutorial=3]="tutorial",t[t.tutorialMain=4]="tutorialMain",t[t.play=5]="play",t[t.battle=6]="battle",t[t.gameOver=7]="gameOver",t[t.gameOverMain=8]="gameOverMain",t))(ie||{});class fD{constructor(){E(this,"value");E(this,"instances");this.instances=[],this.value=1}draw(e){this.instances.forEach(n=>n.draw(e))}controller(e,n,r){for(let i=0;i<this.instances.length;i++)this.instances[i].state==Z.Dead?this.instances.splice(i,1):this.instances[i].controller(e,n,r)}spawn(e,n){const r=new pD(e,n,this.value);this.instances.push(r)}reset(){this.instances=[]}}class pD extends Fo{constructor(n,r,i){super(n,r,30,25);E(this,"value");E(this,"xdir");E(this,"ydir");E(this,"speed");E(this,"accel");E(this,"timer");this.state=Z.Spawn,this.value=i,this.xdir=0,this.ydir=0,this.speed=0,this.accel=.2,this.timer=15,I&&I.state<Z.Dying&&(this.xdir=I.xdir,this.ydir=I.ydir,this.speed=(I.maxSpeed+1)*3)}draw(n){if(this.w<=0||this.h<=0||(n.fillStyle="yellow",n.beginPath(),n.ellipse(this.x-this.w/2,this.y-this.h/2,this.w/2-5/2,this.h/2,0,0,2*Math.PI),n.fill(),n.fillStyle="#b3b300",n.beginPath(),n.ellipse(this.x-this.w/2+5,this.y-this.h/2,this.w/2-5/2,this.h/2,0,0,2*Math.PI),n.fill(),this.state>Z.Normal))return;n.fillStyle="black",n.font="22px monospace";const i="$";n.fillText(i,this.x-9-5,this.y-9)}controller(n,r,i){switch(this.state){case Z.Spawn:this.launch(r,i);break;case Z.Normal:n.frame%10==0&&this.wiggle();break;case Z.Dying:this.death(n);break}}launch(n,r){this.timer>0&&this.timer--,this.speed-=this.accel,this.x+=this.xdir*this.speed,this.y+=this.ydir*this.speed,this.bounceOnScreen(n,r),this.speed<=0&&(this.state=Z.Normal)}bounceOnScreen(n,r){this.x<=0&&this.xdir<0?this.xdir*=-1:this.x>=n&&this.xdir>0&&(this.xdir*=-1),this.y<=0&&this.ydir<0?this.ydir*=-1:this.y>=r&&this.ydir>0&&(this.ydir*=-1)}wiggle(){let n=Math.random()>.5?1:-1;this.x=this.x+n*2,n=Math.random()>.5?1:-1,this.y=this.y+n*2}death(n){this.w=Math.max(0,this.w-2),this.h=Math.max(0,this.h-3.9),(this.w==0||this.h==0)&&(n.coins+=this.value,console.log("INCREASING COINS BY",this.value),this.state=Z.Dead)}}const rr=new fD;class mD{constructor(){E(this,"instances");E(this,"cool");E(this,"speed");E(this,"maxInst");E(this,"spawnWait");E(this,"value");this.instances=[],this.speed=1,this.maxInst=10,this.spawnWait=5,this.cool=this.spawnWait,this.value=1}draw(e){this.instances.forEach(n=>n.draw(e))}controller(){let e=!1;for(let n=0;n<this.instances.length;n++){const r=this.instances[n];if(r.state==Z.Dead){this.instances.splice(n,1);return}I&&I.collides(r)&&r.state<Z.Dying&&(I.action!=mt.Attack?e=!0:r.state=Z.Dying),r.controller()}I&&I.state!=Z.Dead&&(I.damaging=e)}spawner(e,n,r){this.cool-=1,this.instances.length<this.maxInst&&this.cool<=0&&(this.spawn(e,n,r),this.cool=this.spawnWait*60)}updateAttributes(e){this.speed=e.speed,this.maxInst=e.maxInst,this.spawnWait=e.spawnWait}reset(){this.instances=[],this.cool=0}spawn(e,n,r){const i=new gD(e,n,r,this.speed,this.value);this.instances.push(i)}}class gD extends Fo{constructor(n,r,i,s,o){super(0,0,50,50);E(this,"rcolors");E(this,"speed");E(this,"xdir");E(this,"ydir");E(this,"target");E(this,"triedCoinSpawn");E(this,"value");E(this,"distance");E(this,"pushMagnitude");this.rcolors=["#81ea25","#6bba27","#96e84e","#abf966","#b9f981"],this.color=this.rcolors[0],this.state=Z.Spawn,this.speed=s,this.xdir=0,this.ydir=0,this.target=null,this.triedCoinSpawn=!1,this.distance=0,this.pushMagnitude=17,this.value=o,this.target=i,this.spawn(n,r)}spawn(n,r){let i=Math.random();i<=.5?(i=Math.random(),this.x=i<.5?-this.w-5:n+5,i=Math.random(),this.y=i*(r+10)-5):(i=Math.random(),this.x=i*(n+10)-5,i=Math.random(),this.y=i<.5?-this.h-5:r+5),this.state=Z.Normal}draw(n){if(this.state==Z.Spawn)return;const r=this.x-this.w/2,i=this.y-this.h/2;if(P.frame%3==0){const s=Math.round(Math.random()*2);this.color=this.rcolors[s]}n.fillStyle=this.color,this.target!=null&&this.state==Z.Normal&&(this.w=this.target.w/2-10,this.h=this.target.h-10),n.beginPath(),n.strokeStyle="black",n.moveTo(r-this.w/8,i),n.bezierCurveTo(r-this.w/8,i-this.h/4,r+this.w+this.w/8,i-this.h/4,r+this.w+this.w/8,i),n.bezierCurveTo(r+this.w*2,i,r+this.w*2,i+this.h,r+this.w-this.w/8,i+this.h),n.bezierCurveTo(r+this.w-this.w/8,i+this.h*1.75,r-this.w*2,i+this.h/4,r-10,i+this.h/2-10),n.bezierCurveTo(r-this.w-5,i+this.h/2,r-this.w/4,i,r-this.w/8,i),n.fill(),n.closePath(),n.lineWidth=3,n.beginPath(),n.fillStyle="black",n.arc(r+this.w/6+this.xdir*5,i+this.h/6+this.ydir*5,(this.w/4+this.h/4)/4,0,2*Math.PI),n.stroke(),n.closePath(),n.beginPath(),n.arc(r+this.w-this.w/8+this.xdir*5,i+this.h/6+this.ydir*5,(this.w/4+this.h/4)/6,0,2*Math.PI),n.stroke(),n.closePath(),n.beginPath(),n.moveTo(r+this.w/8,i+this.h),n.bezierCurveTo(r+this.h/8,i+this.h-this.h/3,r+this.w-this.h/8,i+this.h-this.h/3,r+this.w-this.h/8,i+this.h),n.stroke(),n.closePath()}controller(){switch(this.state){case Z.Normal:this.move();break;case Z.Dying:this.death(this.target);break}}calculateDir(){if(this.target==null)return;const n=this.target.x-this.x,r=this.target.y-this.y;this.distance=Math.sqrt(n*n+r*r),this.distance>0&&(this.xdir=n/this.distance,this.ydir=r/this.distance)}move(){this.target!=null&&(this.calculateDir(),this.target.state==Z.Dead&&(this.xdir=-this.xdir,this.ydir=-this.ydir),this.x+=this.xdir*this.speed,this.y+=this.ydir*this.speed,P.frame%3==0&&this.wiggle())}wiggle(){let n=Math.random()>.5?1:-1;this.x=this.x+n*2,n=Math.random()>.5?1:-1,this.y=this.y+n*2}death(n){if(this.w=Math.max(0,this.w-2),this.h=Math.max(0,this.h-3.9),!this.triedCoinSpawn&&(P.scene==ie.tutorialMain&&nr.stage>=Uo.coins||P.scene==ie.battle&&Math.random()<=.8))for(let r=0;r<this.value;r++)rr.spawn(this.x,this.y);this.triedCoinSpawn=!0,(this.w==0||this.h==0)&&(n!=null&&n.updatePower(),(P.scene==ie.battle||P.scene==ie.tutorialMain)&&(P.score+=this.value),this.state=Z.Dead)}pushField(n){this.distance<n&&(this.x+=this.pushMagnitude*-this.xdir,this.y+=this.pushMagnitude*-this.ydir)}pushLine(){this.x+=this.pushMagnitude*-this.xdir,this.y+=this.pushMagnitude*-this.ydir}}const q=new mD,yD=(t,e)=>{const{w:n,h:r,xdir:i,ydir:s,frownCount:o,frownCountMax:l}=e;let{x:u,y:c}=e;u-=n/2,c-=r/2,t.lineWidth=3,t.strokeStyle="black",t.beginPath(),t.fillStyle="black",t.arc(u+n/4+i/2,c+r/4+s/2,(n/4+r/4)/4,0,2*Math.PI),t.stroke(),t.closePath(),t.beginPath(),t.arc(u+n-n/4+i,c+r/4+s,(n/4+r/4)/6,0,2*Math.PI),t.stroke(),t.closePath(),t.beginPath();const f=o/l*2-1,[a,h]=[n/8,r*(3/4)],d=r/8;t.moveTo(u+a,c+h+f),t.bezierCurveTo(u+a,c+h+d*-f,u+n-a+i,c+h+d*-f,u+n-a,c+h+f),t.stroke(),t.closePath()},vD=(t,e)=>{const{w:n,h:r,xdir:i,ydir:s}=e;let{x:o,y:l}=e;o-=n/2,l-=r/2,t.lineWidth=3,t.strokeStyle="black",t.beginPath(),t.fillStyle="black",t.arc(o+n/4+i/2,l+r/4+s/2,(n/4+r/4)/4,0,2*Math.PI),t.stroke(),t.closePath(),t.beginPath(),t.arc(o+n*(3/4)+i,l+r/4+s,(n/4+r/4)/6,0,2*Math.PI),t.stroke(),t.closePath(),t.fillStyle="black",t.lineWidth=3;const[u,c]=[n/2+5,r*(3/4)];t.beginPath(),t.arc(o+u+i*3,l+c+s,(n/4+r/4)/8,0,2*Math.PI),t.fill(),t.stroke(),t.closePath()},wD=(t,e)=>{const{w:n,h:r,xdir:i,ydir:s,frownCount:o,frownCountMax:l}=e;let{x:u,y:c}=e;u-=n/2,c-=r/2,t.lineWidth=3,t.strokeStyle="black",t.beginPath(),t.fillStyle="black",t.arc(u+n/4+i/2,c+r/4+s/2,(n/4+r/4)/4,0,2*Math.PI),t.stroke(),t.closePath(),t.beginPath(),t.arc(u+n-n/4+i,c+r/4+s,(n/4+r/4)/6,0,2*Math.PI),t.stroke(),t.closePath();const[f,a]=[n/8,r/2+5],h=r/4,d=n/8;let m=o/l*1.4-.7;t.fillStyle="white",t.strokeStyle="black",t.fillRect(u+n/2-d/2,c+a+h*-m,d,d),t.strokeRect(u+n/2-d/2,c+a+h*-m,d,d),m=o/l*2-1,t.beginPath(),t.moveTo(u+f,c+a+m),t.bezierCurveTo(u+f,c+a+h*-m,u+n-f+i,c+a+h*-m,u+n-f,c+a+m),t.stroke(),t.closePath()},_D=(t,e)=>{const{w:n,h:r,xdir:i,ydir:s,frownCount:o,frownCountMax:l}=e;let{x:u,y:c}=e;u-=n/2,c-=r/2,t.lineWidth=3,t.strokeStyle="black",t.beginPath(),t.fillStyle="black",t.arc(u+n/2+i*4,c+r/4+s/4,(n/4+r/4)/4,0,2*Math.PI),t.stroke(),t.closePath();const[f,a]=[n/3,r*(3/4)],h=r/8,d=o/l*2-1;t.beginPath(),t.moveTo(u+f,c+a+d),t.bezierCurveTo(u+f,c+a+h*-d,u+n-f+i*4,c+a+h*-d,u+n-f,c+a+d),t.stroke(),t.closePath()},TD=(t,e)=>{const{w:n,h:r,xdir:i,ydir:s,frownCount:o,frownCountMax:l}=e;let{x:u,y:c}=e;u-=n/2,c-=r/2,t.lineWidth=3,t.strokeStyle="black",t.beginPath(),t.moveTo(u+n/3+i/2,c+r/2+r/10+s/2),t.bezierCurveTo(u+n/4+i/2,c+r/2-r/5+s/2,u+n*(3/4)+i/2,c+r/2-r/5+s/2,u+n*(3/4)+i/2,c+r/2+s/2+r/10),t.stroke(),t.closePath(),t.beginPath(),t.fillStyle="white",t.arc(u+n/3+i/2,c+r/2+s/2,(n/4+r/4)/5,0,2*Math.PI),t.fill(),t.stroke(),t.closePath(),t.beginPath(),t.arc(u+n*(2/3)+i/2,c+r/2+s/2,(n/4+r/4)/5,0,2*Math.PI),t.fill(),t.stroke(),t.closePath(),t.beginPath();const f=o/l*2-1,[a,h]=[n/8,r*(3/4)],d=r/8;t.moveTo(u+a,c+h+f),t.bezierCurveTo(u+a,c+h+d*-f,u+n-a+i,c+h+d*-f,u+n-a,c+h+f),t.stroke(),t.closePath()},Ti={normal:{name:"Default",draw:yD,cost:0},nervous:{name:"Ooo",draw:vD,cost:10},tooth:{name:"Baby",draw:wD,cost:100},cyclops:{name:"Cyclops",draw:_D,cost:300},glasses:{name:"Goggles",draw:TD,cost:500}},SD=(t,e)=>{},ED=(t,e)=>{const{x:n,w:r,h:i}=e;let s=e.y;s-=i/2,t.fillStyle="black";const o=i/5,l=r/2,u=i*(3/4);t.fillRect(n-r/2,s-o*(3/4),r,o),t.fillRect(n-l/2,s-o*(1/4)-u,l,u),t.fillStyle="white",t.fillRect(n-l/2,s-o*(5/4),l,o/2)},Si={normal:{name:"Default",draw:SD,cost:0},topHat:{name:"Top Hat",draw:ED,cost:1e3}},Mt={maxPower:{name:"Draw",initial:10,increase:10,priceScale:[5,10,15,20,40,50,60,80,100,150,200]},maxSpeed:{name:"Speed",initial:3,increase:1,priceScale:[50,100,150,200,400,500]},maxHealth:{name:"Health",initial:20,increase:20,priceScale:[20,40,50,70,90,100]},maxCool:{name:"Wait",initial:150,increase:-10,priceScale:[10,20,30,40,60,100,200,250,300,400,500]}},Cn=(t,e,n)=>Math.min(Math.max(t,e),n);class kD extends Fo{constructor(n,r,i,s){super(n,r,i,s);E(this,"body");E(this,"face");E(this,"hat");E(this,"frownCount");E(this,"frownCountMax");E(this,"accel");E(this,"xdir");E(this,"ydir");E(this,"speed");E(this,"action");E(this,"damaging");E(this,"pushRadius");E(this,"pushR");E(this,"timer");E(this,"maxSpeed");E(this,"maxCool");E(this,"maxPower");E(this,"maxHealth");E(this,"cool");E(this,"power");E(this,"health");this.body="normal",this.face="normal",this.hat="normal",this.state=Z.Normal,this.frownCount=0,this.frownCountMax=30,this.xdir=1,this.ydir=0,this.accel=.1,this.speed=0,this.action=mt.Normal,this.damaging=!1,this.pushRadius=240,this.pushR=0,this.timer=0,this.maxSpeed=Mt.maxSpeed.initial,this.maxHealth=Mt.maxHealth.initial,this.maxPower=Mt.maxPower.initial,this.maxCool=Mt.maxCool.initial,this.health=this.maxHealth,this.power=0,this.cool=0}draw(n){Ye[this.body].draw(n,I),Ti[this.face].draw(n,I),Si[this.hat].draw(n,I),this.action==mt.Push&&(n.beginPath(),n.arc(this.x,this.y,this.pushR,0,2*Math.PI),n.stroke(),n.closePath())}controller(n,r){if(this.state==Z.Dead){this.damaging=!0;return}this.actionController(n,r,Bt.keyState),this.action!=mt.Push&&this.cool>0&&(--this.cool,this.frownCount<this.frownCountMax*.5&&this.frownCount++),this.healthController(),rr&&rr.instances.forEach(i=>{this.collides(i)&&(i.state==Z.Normal||i.state==Z.Spawn&&i.timer<=0)&&(i.state=Z.Dying)}),this.health<=0&&(this.state=Z.Dead)}actionController(n,r,i){switch(this.cool<=0&&(this.cool=0,i.attack?this.action=mt.Attack:i.push&&this.power==this.maxPower&&(this.action=mt.Push)),this.action){case mt.Attack:this.attack(n,r,12);return;case mt.Normal:this.move(n,r,i);break;case mt.Push:this.move(n,r,i),this.pushField(600);break}}healthController(){this.damaging?(this.health--,this.frownCount++,tr!=null&&tr.spawn(this)):this.cool<=0&&this.frownCount--,this.frownCount=Cn(this.frownCount,0,this.frownCountMax)}move(n,r,i){const s=i.right||i.left,o=i.up||i.down;s&&o?(this.xdir=i.right?.7071:-.7071,this.ydir=i.down?.7071:-.7071):s?(this.xdir=i.right?1:-1,this.ydir=0):o&&(this.xdir=0,this.ydir=i.down?1:-1),s||o?this.speed+=this.accel:this.speed>0&&(this.speed=0),this.speed=Cn(this.speed,0,this.maxSpeed),this.x+=this.xdir*this.speed,this.y+=this.ydir*this.speed,P.frame%10==0&&this.wiggle(50,69),this.keepOnScreen(n,r)}attack(n,r,i){++this.timer,this.cool+=this.maxCool/i,this.x+=this.xdir*this.maxSpeed*3,this.y+=this.ydir*this.maxSpeed*3,this.keepOnScreen(n,r),this.timer>=i&&(this.timer=0,this.action=mt.Normal)}pushField(n){++this.timer,this.power-=this.maxPower/n,this.cool+=this.maxCool/n,q.instances.forEach(r=>{r.state!=Z.Dying&&r.state!=Z.Dead&&(this.pushR=Math.min(this.timer/(n/4),1)*this.pushRadius,r.pushField(this.pushR))}),this.timer>=n&&(this.pushR=0,this.power=0,this.timer=0,this.action=mt.Normal)}shrink(n,r,i){i=Cn(i/2,55,60+i/2),this.wiggle(55,i),this.x+=n,this.y+=r}collides(n){return n==null?!1:!(this.x+this.w/2<n.x-n.w/2||this.x-this.w/2>n.x+n.w/2)&&!(this.y+this.h/2<n.y-n.h/2||this.y-this.h/2>n.y+n.w/2)}wiggle(n,r){let i=Math.random()>.5?1:-1;this.x=this.x+i,i=Math.random()>.5?1:-1,this.y=this.y+i,i=Math.random()>.5?1:-1,this.w=Cn(this.w+i,n,r),i=Math.random()>.5?1:-1,this.h=Cn(this.h+i,n,r)}keepOnScreen(n,r){this.x=Cn(this.x,this.w/2+5,n-this.w/2-5),this.y=Cn(this.y,this.h/2+5,r-this.h/2-5)}reset(){this.health=this.maxHealth,this.power=0,this.cool=0,this.state=Z.Normal,this.action=mt.Normal,this.speed=0,this.frownCount=this.frownCountMax*.6}updatePower(){this.power<this.maxPower?this.power+=2:this.power=this.maxPower}getAttributes(){return{maxSpeed:this.maxSpeed,maxCool:this.maxCool,maxHealth:this.maxHealth,maxPower:this.maxPower}}updateAttributes(n){this.maxSpeed=n.maxSpeed,this.maxCool=n.maxCool,this.maxHealth=n.maxHealth,this.health=this.maxHealth}increaseAttrSpeed(n){this.maxSpeed+=n}increaseAttrHealth(n){this.maxHealth+=n}increaseAttrPower(n){this.maxPower+=n}increaseAttrCool(n){this.maxCool+=n,this.maxCool<=30&&(this.maxCool=30)}debug(n){n.font="20px Arial Bold",n.fillStyle="black";const r=40;let i=n.canvas.height*5/8;n.fillText(`player direction: ${this.xdir} ${this.ydir}`,r,i),i+=20}}const I=new kD(250,250,250,250);class ID{constructor(){E(this,"purchasedFaces");E(this,"purchasedBodies");E(this,"purchasedHats");E(this,"purchasedStatsIdx");E(this,"setPlayerStats");E(this,"setPlayerFit");this.purchasedFaces=["normal"],this.purchasedBodies=["normal"],this.purchasedHats=["normal"],this.purchasedStatsIdx={maxHealth:0,maxPower:0,maxCool:0,maxSpeed:0}}purchaseStat(e){const n=this.purchasedStatsIdx[e],r=Mt[e].priceScale[n];return P.coins<r?!1:n<Mt[e].priceScale.length?(P.coins-=r,this.purchasedStatsIdx[e]++,I[e]+=Mt[e].increase,this.syncReactStatsShop(),!0):!1}syncReactStatsShop(){if(!this.setPlayerStats){console.error("shop: syncReactShop: setPlayerStats hook not passed to Shop Object");return}console.log("SYNCING STATS"),this.setPlayerStats(I.getAttributes())}syncPlayerStatsShop(){let e;for(e in this.purchasedStatsIdx)I[e]=Mt[e].initial+Mt[e].increase*this.purchasedStatsIdx[e]}purchaseBody(e){const n=Ye[e].cost;return P.coins<n||this.checkPurchaseBody(e)?!1:(P.coins-=n,this.purchasedBodies.push(e),!0)}purchaseFace(e){const n=Ti[e].cost;return P.coins<n||this.checkPurchaseFace(e)?!1:(P.coins-=n,this.purchasedFaces.push(e),!0)}purchaseHat(e){const n=Si[e].cost;return P.coins<n||this.checkPurchaseHat(e)?!1:(P.coins-=n,this.purchasedHats.push(e),!0)}checkPurchaseFace(e){for(const n in this.purchasedFaces)if(e===this.purchasedFaces[n])return!0;return!1}checkPurchaseBody(e){for(const n in this.purchasedBodies)if(e===this.purchasedBodies[n])return!0;return!1}checkPurchaseHat(e){for(const n in this.purchasedHats)if(e===this.purchasedHats[n])return!0;return!1}syncReactFitShop(){if(!this.setPlayerFit){console.error("shop: syncReactShop: setPlayerFit hook not passed to Shop Object");return}this.setPlayerFit({body:I.body,face:I.face,hat:I.hat})}debug(e){const n=e.canvas.width*.3333333333333333;let r=e.canvas.height*(7/8);e.fillText("PurchasedFaces:"+this.purchasedFaces,n,r),r+=10,e.fillText("PurchasedBodies:"+this.purchasedBodies,n,r)}}const he=new ID,{VITE_API_KEY:CD,VITE_AUTH_DOMAIN:AD,VITE_PROJECT_ID:xD,VITE_STORAGE_BUCKET:ND,VITE_MESSAGING_SENDER_ID:DD,VITE_APP_ID:PD}={VITE_STORAGE_BUCKET:"blob-mob-cfe57.appspot.com",VITE_AUTH_DOMAIN:"blob-mob-cfe57.firebaseapp.com",VITE_PROJECT_ID:"blob-mob-cfe57",VITE_APP_ID:"1:340119698127:web:4a2a0e642ccbfe96aa15ba",VITE_API_KEY:"AIzaSyAGfLgXSIWOXu2bs2JCobBEXiyk5Be9pbQ",VITE_MESSAGING_SENDER_ID:"340119698127",BASE_URL:"/Blob-Mob/",MODE:"production",DEV:!1,PROD:!0},RD={apiKey:CD,authDomain:AD,projectId:xD,storageBucket:ND,messagingSenderId:DD,appId:PD},t1=Xv(RD),se=nD(t1),Bi=zA(t1),n1=async()=>{var r,i;const t=""+((r=se==null?void 0:se.currentUser)==null?void 0:r.uid);if(t==="undefined")return;const e=oo(Bi,"players",t),n=await Hf(e);if(n.exists()){console.log(n.data());const{coins:s,purchasedBodies:o,purchasedFaces:l,purchasedHats:u,playerAttrIdx:c,fit:f}=n.data();P.coins=s,he.purchasedBodies=o,he.purchasedFaces=l,he.purchasedHats=u,he.purchasedStatsIdx=c,I.body=f.body,I.face=f.face,I.hat=f.hat,he.syncPlayerStatsShop()}else console.log("firebase: getAccount: Creating new user"),await __(e,{uid:t,username:(i=se==null?void 0:se.currentUser)==null?void 0:i.displayName,coins:P.coins,playerAttrIdx:he.purchasedStatsIdx,purchasedBodies:he.purchasedBodies,purchasedFaces:he.purchasedFaces,purchasedHats:he.purchasedHats,fit:{face:I.face,body:I.body,hat:I.hat}}),r1(P.highscore)},bD=async()=>{var n;const t=""+((n=se==null?void 0:se.currentUser)==null?void 0:n.uid);if(t==="undefined")return;const e=oo(Bi,"players",t);await T_(e,{coins:P.coins,playerAttrIdx:he.purchasedStatsIdx,purchasedBodies:he.purchasedBodies,purchasedFaces:he.purchasedFaces,purchasedHats:he.purchasedHats,fit:{face:I.face,body:I.body,hat:I.hat}})},MD=async()=>{var r;console.log("firebase: getHighscore: GETTING HIGHSCORE");const t=""+((r=se==null?void 0:se.currentUser)==null?void 0:r.uid),e=oo(Bi,"highscores",t),n=await Hf(e);n.exists()?(console.log("firebase: getHighscore: Highscore exists:",n.data().score),P.highscore=n.data().score):console.error("firebase: getHighscore: couldn't retrieve highscore")},r1=async t=>{var e,n;try{const r=""+((e=se==null?void 0:se.currentUser)==null?void 0:e.uid),i=oo(Bi,"highscores",r),s=await Hf(i);if(s.exists())console.log("Highscore exists"),t>s.data().score?await T_(i,{score:t}):console.log("not a new highscore :/");else{const o=l_(Bi,"highscores");await __(oo(o,r),{uid:r,username:(n=se==null?void 0:se.currentUser)==null?void 0:n.displayName,score:t}),console.log("Document written")}}catch(r){console.error("Error adding document: ",r)}},OD=()=>{const t=new sn;Z_(se,t),n1()},LD=()=>{const t=new rn;Z_(se,t)},i1=()=>{se.signOut(),window.location.reload()};var Tu={exports:{}},Su={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $D=Y.exports,FD=Symbol.for("react.element"),UD=Symbol.for("react.fragment"),VD=Object.prototype.hasOwnProperty,BD=$D.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,jD={key:!0,ref:!0,__self:!0,__source:!0};function s1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)VD.call(e,r)&&!jD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:FD,type:t,key:s,ref:o,props:i,_owner:BD.current}}Su.Fragment=UD;Su.jsx=s1;Su.jsxs=s1;(function(t){t.exports=Su})(Tu);const _=Tu.exports.jsx,M=Tu.exports.jsxs,ai=Tu.exports.Fragment,zD=60,HD=1e3/60*(60/zD)-1e3/60*.5,o1=({draw:t,...e})=>{const n=Y.exports.useRef(null);return Y.exports.useEffect(()=>{const r=n.current;if(r==null)throw new Error("Could not get canvas");const i=r.getContext("2d");if(i==null)throw new Error("Could not get context");let s=0,o=0;const l=u=>{if(u-o<HD){s=window.requestAnimationFrame(l);return}r.onselectstart=()=>!1,GD(r),t(i),o=u,s=window.requestAnimationFrame(l)};return window.requestAnimationFrame(l),()=>{window.cancelAnimationFrame(s)}},[t]),_("canvas",{ref:n,...e,className:"fixed top-0 left-0 -z-50 h-screen w-screen"})},GD=t=>{const{width:e,height:n}=t.getBoundingClientRect();return t.width!==e||t.height!==n?(t.width=e*1.5,t.height=n*1.5,!0):!1},qD=()=>{const[t,e]=Y.exports.useState(P.score),[n,r]=Y.exports.useState(P.highscore);return P.setScore=e,P.setHighscore=r,M("div",{className:"absolute left-6 top-3 text-2xl",children:[M("p",{children:["Score: ",""+t]}),M("p",{children:["highscore: ",""+n]})]})},KD=()=>{const[t,e]=Y.exports.useState(P.coins);return P.setCoins=e,_("div",{className:"absolute bottom-6 left-6 text-4xl",children:M("p",{children:["$",""+t]})})};var ms={};/*!
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var a=this||n;return a._counter=1e3,a._html5AudioPool=[],a.html5PoolSize=10,a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator=typeof window<"u"&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.autoUnlock=!0,a._setup(),a},volume:function(a){var h=this||n;if(a=parseFloat(a),h.ctx||f(),typeof a<"u"&&a>=0&&a<=1){if(h._volume=a,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(a,n.ctx.currentTime);for(var d=0;d<h._howls.length;d++)if(!h._howls[d]._webAudio)for(var m=h._howls[d]._getSoundIds(),y=0;y<m.length;y++){var w=h._howls[d]._soundById(m[y]);w&&w._node&&(w._node.volume=w._volume*a)}return h}return h._volume},mute:function(a){var h=this||n;h.ctx||f(),h._muted=a,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(a?0:h._volume,n.ctx.currentTime);for(var d=0;d<h._howls.length;d++)if(!h._howls[d]._webAudio)for(var m=h._howls[d]._getSoundIds(),y=0;y<m.length;y++){var w=h._howls[d]._soundById(m[y]);w&&w._node&&(w._node.muted=a?!0:w._muted)}return h},stop:function(){for(var a=this||n,h=0;h<a._howls.length;h++)a._howls[h].stop();return a},unload:function(){for(var a=this||n,h=a._howls.length-1;h>=0;h--)a._howls[h].unload();return a.usingWebAudio&&a.ctx&&typeof a.ctx.close<"u"&&(a.ctx.close(),a.ctx=null,f()),a},codecs:function(a){return(this||n)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||n;if(a.state=a.ctx&&a.ctx.state||"suspended",a._autoSuspend(),!a.usingWebAudio)if(typeof Audio<"u")try{var h=new Audio;typeof h.oncanplaythrough>"u"&&(a._canPlayEvent="canplay")}catch{a.noAudio=!0}else a.noAudio=!0;try{var h=new Audio;h.muted&&(a.noAudio=!0)}catch{}return a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||n,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return a}if(!h||typeof h.canPlayType!="function")return a;var d=h.canPlayType("audio/mpeg;").replace(/^no$/,""),m=a._navigator?a._navigator.userAgent:"",y=m.match(/OPR\/([0-6].)/g),w=y&&parseInt(y[0].split("/")[1],10)<33,p=m.indexOf("Safari")!==-1&&m.indexOf("Chrome")===-1,g=m.match(/Version\/(.*?) /),v=p&&g&&parseInt(g[1],10)<15;return a._codecs={mp3:!!(!w&&(d||h.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!d,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!v&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!v&&h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_unlockAudio:function(){var a=this||n;if(!(a._audioUnlocked||!a.ctx)){a._audioUnlocked=!1,a.autoUnlock=!1,!a._mobileUnloaded&&a.ctx.sampleRate!==44100&&(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var h=function(d){for(;a._html5AudioPool.length<a.html5PoolSize;)try{var m=new Audio;m._unlocked=!0,a._releaseHtml5Audio(m)}catch{a.noAudio=!0;break}for(var y=0;y<a._howls.length;y++)if(!a._howls[y]._webAudio)for(var w=a._howls[y]._getSoundIds(),p=0;p<w.length;p++){var g=a._howls[y]._soundById(w[p]);g&&g._node&&!g._node._unlocked&&(g._node._unlocked=!0,g._node.load())}a._autoResume();var v=a.ctx.createBufferSource();v.buffer=a._scratchBuffer,v.connect(a.ctx.destination),typeof v.start>"u"?v.noteOn(0):v.start(0),typeof a.ctx.resume=="function"&&a.ctx.resume(),v.onended=function(){v.disconnect(0),a._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var T=0;T<a._howls.length;T++)a._howls[T]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),a}},_obtainHtml5Audio:function(){var a=this||n;if(a._html5AudioPool.length)return a._html5AudioPool.pop();var h=new Audio().play();return h&&typeof Promise<"u"&&(h instanceof Promise||typeof h.then=="function")&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(a){var h=this||n;return a._unlocked&&h._html5AudioPool.push(a),h},_autoSuspend:function(){var a=this;if(!(!a.autoSuspend||!a.ctx||typeof a.ctx.suspend>"u"||!n.usingWebAudio)){for(var h=0;h<a._howls.length;h++)if(a._howls[h]._webAudio){for(var d=0;d<a._howls[h]._sounds.length;d++)if(!a._howls[h]._sounds[d]._paused)return a}return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){if(!!a.autoSuspend){a._suspendTimer=null,a.state="suspending";var m=function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())};a.ctx.suspend().then(m,m)}},3e4),a}},_autoResume:function(){var a=this;if(!(!a.ctx||typeof a.ctx.resume>"u"||!n.usingWebAudio))return a.state==="running"&&a.ctx.state!=="interrupted"&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):a.state==="suspended"||a.state==="running"&&a.ctx.state==="interrupted"?(a.ctx.resume().then(function(){a.state="running";for(var h=0;h<a._howls.length;h++)a._howls[h]._emit("resume")}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):a.state==="suspending"&&(a._resumeAfterSuspend=!0),a}};var n=new e,r=function(a){var h=this;if(!a.src||a.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}h.init(a)};r.prototype={init:function(a){var h=this;return n.ctx||f(),h._autoplay=a.autoplay||!1,h._format=typeof a.format!="string"?a.format:[a.format],h._html5=a.html5||!1,h._muted=a.mute||!1,h._loop=a.loop||!1,h._pool=a.pool||5,h._preload=typeof a.preload=="boolean"||a.preload==="metadata"?a.preload:!0,h._rate=a.rate||1,h._sprite=a.sprite||{},h._src=typeof a.src!="string"?a.src:[a.src],h._volume=a.volume!==void 0?a.volume:1,h._xhr={method:a.xhr&&a.xhr.method?a.xhr.method:"GET",headers:a.xhr&&a.xhr.headers?a.xhr.headers:null,withCredentials:a.xhr&&a.xhr.withCredentials?a.xhr.withCredentials:!1},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=a.onend?[{fn:a.onend}]:[],h._onfade=a.onfade?[{fn:a.onfade}]:[],h._onload=a.onload?[{fn:a.onload}]:[],h._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],h._onplayerror=a.onplayerror?[{fn:a.onplayerror}]:[],h._onpause=a.onpause?[{fn:a.onpause}]:[],h._onplay=a.onplay?[{fn:a.onplay}]:[],h._onstop=a.onstop?[{fn:a.onstop}]:[],h._onmute=a.onmute?[{fn:a.onmute}]:[],h._onvolume=a.onvolume?[{fn:a.onvolume}]:[],h._onrate=a.onrate?[{fn:a.onrate}]:[],h._onseek=a.onseek?[{fn:a.onseek}]:[],h._onunlock=a.onunlock?[{fn:a.onunlock}]:[],h._onresume=[],h._webAudio=n.usingWebAudio&&!h._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&h._preload!=="none"&&h.load(),h},load:function(){var a=this,h=null;if(n.noAudio){a._emit("loaderror",null,"No audio support.");return}typeof a._src=="string"&&(a._src=[a._src]);for(var d=0;d<a._src.length;d++){var m,y;if(a._format&&a._format[d])m=a._format[d];else{if(y=a._src[d],typeof y!="string"){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}m=/^data:audio\/([^;,]+);/i.exec(y),m||(m=/\.([^.]+)$/.exec(y.split("?",1)[0])),m&&(m=m[1].toLowerCase())}if(m||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),m&&n.codecs(m)){h=a._src[d];break}}if(!h){a._emit("loaderror",null,"No codec support for selected audio sources.");return}return a._src=h,a._state="loading",window.location.protocol==="https:"&&h.slice(0,5)==="http:"&&(a._html5=!0,a._webAudio=!1),new i(a),a._webAudio&&o(a),a},play:function(a,h){var d=this,m=null;if(typeof a=="number")m=a,a=null;else{if(typeof a=="string"&&d._state==="loaded"&&!d._sprite[a])return null;if(typeof a>"u"&&(a="__default",!d._playLock)){for(var y=0,w=0;w<d._sounds.length;w++)d._sounds[w]._paused&&!d._sounds[w]._ended&&(y++,m=d._sounds[w]._id);y===1?a=null:m=null}}var p=m?d._soundById(m):d._inactiveSound();if(!p)return null;if(m&&!a&&(a=p._sprite||"__default"),d._state!=="loaded"){p._sprite=a,p._ended=!1;var g=p._id;return d._queue.push({event:"play",action:function(){d.play(g)}}),g}if(m&&!p._paused)return h||d._loadQueue("play"),p._id;d._webAudio&&n._autoResume();var v=Math.max(0,p._seek>0?p._seek:d._sprite[a][0]/1e3),T=Math.max(0,(d._sprite[a][0]+d._sprite[a][1])/1e3-v),A=T*1e3/Math.abs(p._rate),x=d._sprite[a][0]/1e3,N=(d._sprite[a][0]+d._sprite[a][1])/1e3;p._sprite=a,p._ended=!1;var L=function(){p._paused=!1,p._seek=v,p._start=x,p._stop=N,p._loop=!!(p._loop||d._sprite[a][2])};if(v>=N){d._ended(p);return}var U=p._node;if(d._webAudio){var K=function(){d._playLock=!1,L(),d._refreshBuffer(p);var en=p._muted||d._muted?0:p._volume;U.gain.setValueAtTime(en,n.ctx.currentTime),p._playStart=n.ctx.currentTime,typeof U.bufferSource.start>"u"?p._loop?U.bufferSource.noteGrainOn(0,v,86400):U.bufferSource.noteGrainOn(0,v,T):p._loop?U.bufferSource.start(0,v,86400):U.bufferSource.start(0,v,T),A!==1/0&&(d._endTimers[p._id]=setTimeout(d._ended.bind(d,p),A)),h||setTimeout(function(){d._emit("play",p._id),d._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?K():(d._playLock=!0,d.once("resume",K),d._clearTimer(p._id))}else{var at=function(){U.currentTime=v,U.muted=p._muted||d._muted||n._muted||U.muted,U.volume=p._volume*n.volume(),U.playbackRate=p._rate;try{var en=U.play();if(en&&typeof Promise<"u"&&(en instanceof Promise||typeof en.then=="function")?(d._playLock=!0,L(),en.then(function(){d._playLock=!1,U._unlocked=!0,h?d._loadQueue():d._emit("play",p._id)}).catch(function(){d._playLock=!1,d._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),p._ended=!0,p._paused=!0})):h||(d._playLock=!1,L(),d._emit("play",p._id)),U.playbackRate=p._rate,U.paused){d._emit("playerror",p._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}a!=="__default"||p._loop?d._endTimers[p._id]=setTimeout(d._ended.bind(d,p),A):(d._endTimers[p._id]=function(){d._ended(p),U.removeEventListener("ended",d._endTimers[p._id],!1)},U.addEventListener("ended",d._endTimers[p._id],!1))}catch(ku){d._emit("playerror",p._id,ku)}};U.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(U.src=d._src,U.load());var hr=window&&window.ejecta||!U.readyState&&n._navigator.isCocoonJS;if(U.readyState>=3||hr)at();else{d._playLock=!0,d._state="loading";var En=function(){d._state="loaded",at(),U.removeEventListener(n._canPlayEvent,En,!1)};U.addEventListener(n._canPlayEvent,En,!1),d._clearTimer(p._id)}}return p._id},pause:function(a){var h=this;if(h._state!=="loaded"||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(a)}}),h;for(var d=h._getSoundIds(a),m=0;m<d.length;m++){h._clearTimer(d[m]);var y=h._soundById(d[m]);if(y&&!y._paused&&(y._seek=h.seek(d[m]),y._rateSeek=0,y._paused=!0,h._stopFade(d[m]),y._node))if(h._webAudio){if(!y._node.bufferSource)continue;typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),h._cleanBuffer(y._node)}else(!isNaN(y._node.duration)||y._node.duration===1/0)&&y._node.pause();arguments[1]||h._emit("pause",y?y._id:null)}return h},stop:function(a,h){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"stop",action:function(){d.stop(a)}}),d;for(var m=d._getSoundIds(a),y=0;y<m.length;y++){d._clearTimer(m[y]);var w=d._soundById(m[y]);w&&(w._seek=w._start||0,w._rateSeek=0,w._paused=!0,w._ended=!0,d._stopFade(m[y]),w._node&&(d._webAudio?w._node.bufferSource&&(typeof w._node.bufferSource.stop>"u"?w._node.bufferSource.noteOff(0):w._node.bufferSource.stop(0),d._cleanBuffer(w._node)):(!isNaN(w._node.duration)||w._node.duration===1/0)&&(w._node.currentTime=w._start||0,w._node.pause(),w._node.duration===1/0&&d._clearSound(w._node))),h||d._emit("stop",w._id))}return d},mute:function(a,h){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"mute",action:function(){d.mute(a,h)}}),d;if(typeof h>"u")if(typeof a=="boolean")d._muted=a;else return d._muted;for(var m=d._getSoundIds(h),y=0;y<m.length;y++){var w=d._soundById(m[y]);w&&(w._muted=a,w._interval&&d._stopFade(w._id),d._webAudio&&w._node?w._node.gain.setValueAtTime(a?0:w._volume,n.ctx.currentTime):w._node&&(w._node.muted=n._muted?!0:a),d._emit("mute",w._id))}return d},volume:function(){var a=this,h=arguments,d,m;if(h.length===0)return a._volume;if(h.length===1||h.length===2&&typeof h[1]>"u"){var y=a._getSoundIds(),w=y.indexOf(h[0]);w>=0?m=parseInt(h[0],10):d=parseFloat(h[0])}else h.length>=2&&(d=parseFloat(h[0]),m=parseInt(h[1],10));var p;if(typeof d<"u"&&d>=0&&d<=1){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,h)}}),a;typeof m>"u"&&(a._volume=d),m=a._getSoundIds(m);for(var g=0;g<m.length;g++)p=a._soundById(m[g]),p&&(p._volume=d,h[2]||a._stopFade(m[g]),a._webAudio&&p._node&&!p._muted?p._node.gain.setValueAtTime(d,n.ctx.currentTime):p._node&&!p._muted&&(p._node.volume=d*n.volume()),a._emit("volume",p._id))}else return p=m?a._soundById(m):a._sounds[0],p?p._volume:0;return a},fade:function(a,h,d,m){var y=this;if(y._state!=="loaded"||y._playLock)return y._queue.push({event:"fade",action:function(){y.fade(a,h,d,m)}}),y;a=Math.min(Math.max(0,parseFloat(a)),1),h=Math.min(Math.max(0,parseFloat(h)),1),d=parseFloat(d),y.volume(a,m);for(var w=y._getSoundIds(m),p=0;p<w.length;p++){var g=y._soundById(w[p]);if(g){if(m||y._stopFade(w[p]),y._webAudio&&!g._muted){var v=n.ctx.currentTime,T=v+d/1e3;g._volume=a,g._node.gain.setValueAtTime(a,v),g._node.gain.linearRampToValueAtTime(h,T)}y._startFadeInterval(g,a,h,d,w[p],typeof m>"u")}}return y},_startFadeInterval:function(a,h,d,m,y,w){var p=this,g=h,v=d-h,T=Math.abs(v/.01),A=Math.max(4,T>0?m/T:m),x=Date.now();a._fadeTo=d,a._interval=setInterval(function(){var N=(Date.now()-x)/m;x=Date.now(),g+=v*N,g=Math.round(g*100)/100,v<0?g=Math.max(d,g):g=Math.min(d,g),p._webAudio?a._volume=g:p.volume(g,a._id,!0),w&&(p._volume=g),(d<h&&g<=d||d>h&&g>=d)&&(clearInterval(a._interval),a._interval=null,a._fadeTo=null,p.volume(d,a._id),p._emit("fade",a._id))},A)},_stopFade:function(a){var h=this,d=h._soundById(a);return d&&d._interval&&(h._webAudio&&d._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(d._interval),d._interval=null,h.volume(d._fadeTo,a),d._fadeTo=null,h._emit("fade",a)),h},loop:function(){var a=this,h=arguments,d,m,y;if(h.length===0)return a._loop;if(h.length===1)if(typeof h[0]=="boolean")d=h[0],a._loop=d;else return y=a._soundById(parseInt(h[0],10)),y?y._loop:!1;else h.length===2&&(d=h[0],m=parseInt(h[1],10));for(var w=a._getSoundIds(m),p=0;p<w.length;p++)y=a._soundById(w[p]),y&&(y._loop=d,a._webAudio&&y._node&&y._node.bufferSource&&(y._node.bufferSource.loop=d,d&&(y._node.bufferSource.loopStart=y._start||0,y._node.bufferSource.loopEnd=y._stop,a.playing(w[p])&&(a.pause(w[p],!0),a.play(w[p],!0)))));return a},rate:function(){var a=this,h=arguments,d,m;if(h.length===0)m=a._sounds[0]._id;else if(h.length===1){var y=a._getSoundIds(),w=y.indexOf(h[0]);w>=0?m=parseInt(h[0],10):d=parseFloat(h[0])}else h.length===2&&(d=parseFloat(h[0]),m=parseInt(h[1],10));var p;if(typeof d=="number"){if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,h)}}),a;typeof m>"u"&&(a._rate=d),m=a._getSoundIds(m);for(var g=0;g<m.length;g++)if(p=a._soundById(m[g]),p){a.playing(m[g])&&(p._rateSeek=a.seek(m[g]),p._playStart=a._webAudio?n.ctx.currentTime:p._playStart),p._rate=d,a._webAudio&&p._node&&p._node.bufferSource?p._node.bufferSource.playbackRate.setValueAtTime(d,n.ctx.currentTime):p._node&&(p._node.playbackRate=d);var v=a.seek(m[g]),T=(a._sprite[p._sprite][0]+a._sprite[p._sprite][1])/1e3-v,A=T*1e3/Math.abs(p._rate);(a._endTimers[m[g]]||!p._paused)&&(a._clearTimer(m[g]),a._endTimers[m[g]]=setTimeout(a._ended.bind(a,p),A)),a._emit("rate",p._id)}}else return p=a._soundById(m),p?p._rate:a._rate;return a},seek:function(){var a=this,h=arguments,d,m;if(h.length===0)a._sounds.length&&(m=a._sounds[0]._id);else if(h.length===1){var y=a._getSoundIds(),w=y.indexOf(h[0]);w>=0?m=parseInt(h[0],10):a._sounds.length&&(m=a._sounds[0]._id,d=parseFloat(h[0]))}else h.length===2&&(d=parseFloat(h[0]),m=parseInt(h[1],10));if(typeof m>"u")return 0;if(typeof d=="number"&&(a._state!=="loaded"||a._playLock))return a._queue.push({event:"seek",action:function(){a.seek.apply(a,h)}}),a;var p=a._soundById(m);if(p)if(typeof d=="number"&&d>=0){var g=a.playing(m);g&&a.pause(m,!0),p._seek=d,p._ended=!1,a._clearTimer(m),!a._webAudio&&p._node&&!isNaN(p._node.duration)&&(p._node.currentTime=d);var v=function(){g&&a.play(m,!0),a._emit("seek",m)};if(g&&!a._webAudio){var T=function(){a._playLock?setTimeout(T,0):v()};setTimeout(T,0)}else v()}else if(a._webAudio){var A=a.playing(m)?n.ctx.currentTime-p._playStart:0,x=p._rateSeek?p._rateSeek-p._seek:0;return p._seek+(x+A*Math.abs(p._rate))}else return p._node.currentTime;return a},playing:function(a){var h=this;if(typeof a=="number"){var d=h._soundById(a);return d?!d._paused:!1}for(var m=0;m<h._sounds.length;m++)if(!h._sounds[m]._paused)return!0;return!1},duration:function(a){var h=this,d=h._duration,m=h._soundById(a);return m&&(d=h._sprite[m._sprite][1]/1e3),d},state:function(){return this._state},unload:function(){for(var a=this,h=a._sounds,d=0;d<h.length;d++)h[d]._paused||a.stop(h[d]._id),a._webAudio||(a._clearSound(h[d]._node),h[d]._node.removeEventListener("error",h[d]._errorFn,!1),h[d]._node.removeEventListener(n._canPlayEvent,h[d]._loadFn,!1),h[d]._node.removeEventListener("ended",h[d]._endFn,!1),n._releaseHtml5Audio(h[d]._node)),delete h[d]._node,a._clearTimer(h[d]._id);var m=n._howls.indexOf(a);m>=0&&n._howls.splice(m,1);var y=!0;for(d=0;d<n._howls.length;d++)if(n._howls[d]._src===a._src||a._src.indexOf(n._howls[d]._src)>=0){y=!1;break}return s&&y&&delete s[a._src],n.noAudio=!1,a._state="unloaded",a._sounds=[],a=null,null},on:function(a,h,d,m){var y=this,w=y["_on"+a];return typeof h=="function"&&w.push(m?{id:d,fn:h,once:m}:{id:d,fn:h}),y},off:function(a,h,d){var m=this,y=m["_on"+a],w=0;if(typeof h=="number"&&(d=h,h=null),h||d)for(w=0;w<y.length;w++){var p=d===y[w].id;if(h===y[w].fn&&p||!h&&p){y.splice(w,1);break}}else if(a)m["_on"+a]=[];else{var g=Object.keys(m);for(w=0;w<g.length;w++)g[w].indexOf("_on")===0&&Array.isArray(m[g[w]])&&(m[g[w]]=[])}return m},once:function(a,h,d){var m=this;return m.on(a,h,d,1),m},_emit:function(a,h,d){for(var m=this,y=m["_on"+a],w=y.length-1;w>=0;w--)(!y[w].id||y[w].id===h||a==="load")&&(setTimeout(function(p){p.call(this,h,d)}.bind(m,y[w].fn),0),y[w].once&&m.off(a,y[w].fn,y[w].id));return m._loadQueue(a),m},_loadQueue:function(a){var h=this;if(h._queue.length>0){var d=h._queue[0];d.event===a&&(h._queue.shift(),h._loadQueue()),a||d.action()}return h},_ended:function(a){var h=this,d=a._sprite;if(!h._webAudio&&a._node&&!a._node.paused&&!a._node.ended&&a._node.currentTime<a._stop)return setTimeout(h._ended.bind(h,a),100),h;var m=!!(a._loop||h._sprite[d][2]);if(h._emit("end",a._id),!h._webAudio&&m&&h.stop(a._id,!0).play(a._id),h._webAudio&&m){h._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=n.ctx.currentTime;var y=(a._stop-a._start)*1e3/Math.abs(a._rate);h._endTimers[a._id]=setTimeout(h._ended.bind(h,a),y)}return h._webAudio&&!m&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,h._clearTimer(a._id),h._cleanBuffer(a._node),n._autoSuspend()),!h._webAudio&&!m&&h.stop(a._id,!0),h},_clearTimer:function(a){var h=this;if(h._endTimers[a]){if(typeof h._endTimers[a]!="function")clearTimeout(h._endTimers[a]);else{var d=h._soundById(a);d&&d._node&&d._node.removeEventListener("ended",h._endTimers[a],!1)}delete h._endTimers[a]}return h},_soundById:function(a){for(var h=this,d=0;d<h._sounds.length;d++)if(a===h._sounds[d]._id)return h._sounds[d];return null},_inactiveSound:function(){var a=this;a._drain();for(var h=0;h<a._sounds.length;h++)if(a._sounds[h]._ended)return a._sounds[h].reset();return new i(a)},_drain:function(){var a=this,h=a._pool,d=0,m=0;if(!(a._sounds.length<h)){for(m=0;m<a._sounds.length;m++)a._sounds[m]._ended&&d++;for(m=a._sounds.length-1;m>=0;m--){if(d<=h)return;a._sounds[m]._ended&&(a._webAudio&&a._sounds[m]._node&&a._sounds[m]._node.disconnect(0),a._sounds.splice(m,1),d--)}}},_getSoundIds:function(a){var h=this;if(typeof a>"u"){for(var d=[],m=0;m<h._sounds.length;m++)d.push(h._sounds[m]._id);return d}else return[a]},_refreshBuffer:function(a){var h=this;return a._node.bufferSource=n.ctx.createBufferSource(),a._node.bufferSource.buffer=s[h._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop||0),a._node.bufferSource.playbackRate.setValueAtTime(a._rate,n.ctx.currentTime),h},_cleanBuffer:function(a){var h=this,d=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&a.bufferSource&&(a.bufferSource.onended=null,a.bufferSource.disconnect(0),d))try{a.bufferSource.buffer=n._scratchBuffer}catch{}return a.bufferSource=null,h},_clearSound:function(a){var h=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);h||(a.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(a){this._parent=a,this.init()};i.prototype={init:function(){var a=this,h=a._parent;return a._muted=h._muted,a._loop=h._loop,a._volume=h._volume,a._rate=h._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++n._counter,h._sounds.push(a),a.create(),a},create:function(){var a=this,h=a._parent,d=n._muted||a._muted||a._parent._muted?0:a._volume;return h._webAudio?(a._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),a._node.gain.setValueAtTime(d,n.ctx.currentTime),a._node.paused=!0,a._node.connect(n.masterGain)):n.noAudio||(a._node=n._obtainHtml5Audio(),a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(n._canPlayEvent,a._loadFn,!1),a._endFn=a._endListener.bind(a),a._node.addEventListener("ended",a._endFn,!1),a._node.src=h._src,a._node.preload=h._preload===!0?"auto":h._preload,a._node.volume=d*n.volume(),a._node.load()),a},reset:function(){var a=this,h=a._parent;return a._muted=h._muted,a._loop=h._loop,a._volume=h._volume,a._rate=h._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=++n._counter,a},_errorListener:function(){var a=this;a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorFn,!1)},_loadListener:function(){var a=this,h=a._parent;h._duration=Math.ceil(a._node.duration*10)/10,Object.keys(h._sprite).length===0&&(h._sprite={__default:[0,h._duration*1e3]}),h._state!=="loaded"&&(h._state="loaded",h._emit("load"),h._loadQueue()),a._node.removeEventListener(n._canPlayEvent,a._loadFn,!1)},_endListener:function(){var a=this,h=a._parent;h._duration===1/0&&(h._duration=Math.ceil(a._node.duration*10)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=h._duration*1e3),h._ended(a)),a._node.removeEventListener("ended",a._endFn,!1)}};var s={},o=function(a){var h=a._src;if(s[h]){a._duration=s[h].duration,c(a);return}if(/^data:[^;]+;base64,/.test(h)){for(var d=atob(h.split(",")[1]),m=new Uint8Array(d.length),y=0;y<d.length;++y)m[y]=d.charCodeAt(y);u(m.buffer,a)}else{var w=new XMLHttpRequest;w.open(a._xhr.method,h,!0),w.withCredentials=a._xhr.withCredentials,w.responseType="arraybuffer",a._xhr.headers&&Object.keys(a._xhr.headers).forEach(function(p){w.setRequestHeader(p,a._xhr.headers[p])}),w.onload=function(){var p=(w.status+"")[0];if(p!=="0"&&p!=="2"&&p!=="3"){a._emit("loaderror",null,"Failed loading audio file with status: "+w.status+".");return}u(w.response,a)},w.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete s[h],a.load())},l(w)}},l=function(a){try{a.send()}catch{a.onerror()}},u=function(a,h){var d=function(){h._emit("loaderror",null,"Decoding audio data failed.")},m=function(y){y&&h._sounds.length>0?(s[h._src]=y,c(h,y)):d()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(a).then(m).catch(d):n.ctx.decodeAudioData(a,m,d)},c=function(a,h){h&&!a._duration&&(a._duration=h.duration),Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue())},f=function(){if(!!n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var a=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),h=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),d=h?parseInt(h[1],10):null;if(a&&d&&d<9){var m=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!m&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=r,typeof Yi<"u"?(Yi.HowlerGlobal=e,Yi.Howler=n,Yi.Howl=r,Yi.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=r,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.3
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var r=this;if(!r.ctx||!r.ctx.listener)return r;for(var i=r._howls.length-1;i>=0;i--)r._howls[i].stereo(n);return r},HowlerGlobal.prototype.pos=function(n,r,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(r=typeof r!="number"?s._pos[1]:r,i=typeof i!="number"?s._pos[2]:i,typeof n=="number")s._pos=[n,r,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,r,i,s,o,l){var u=this;if(!u.ctx||!u.ctx.listener)return u;var c=u._orientation;if(r=typeof r!="number"?c[1]:r,i=typeof i!="number"?c[2]:i,s=typeof s!="number"?c[3]:s,o=typeof o!="number"?c[4]:o,l=typeof l!="number"?c[5]:l,typeof n=="number")u._orientation=[n,r,i,s,o,l],typeof u.ctx.listener.forwardX<"u"?(u.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),u.ctx.listener.forwardY.setTargetAtTime(r,Howler.ctx.currentTime,.1),u.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),u.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),u.ctx.listener.upY.setTargetAtTime(o,Howler.ctx.currentTime,.1),u.ctx.listener.upZ.setTargetAtTime(l,Howler.ctx.currentTime,.1)):u.ctx.listener.setOrientation(n,r,i,s,o,l);else return c;return u},Howl.prototype.init=function(n){return function(r){var i=this;return i._orientation=r.orientation||[1,0,0],i._stereo=r.stereo||null,i._pos=r.pos||null,i._pannerAttr={coneInnerAngle:typeof r.coneInnerAngle<"u"?r.coneInnerAngle:360,coneOuterAngle:typeof r.coneOuterAngle<"u"?r.coneOuterAngle:360,coneOuterGain:typeof r.coneOuterGain<"u"?r.coneOuterGain:0,distanceModel:typeof r.distanceModel<"u"?r.distanceModel:"inverse",maxDistance:typeof r.maxDistance<"u"?r.maxDistance:1e4,panningModel:typeof r.panningModel<"u"?r.panningModel:"HRTF",refDistance:typeof r.refDistance<"u"?r.refDistance:1,rolloffFactor:typeof r.rolloffFactor<"u"?r.rolloffFactor:1},i._onstereo=r.onstereo?[{fn:r.onstereo}]:[],i._onpos=r.onpos?[{fn:r.onpos}]:[],i._onorientation=r.onorientation?[{fn:r.onorientation}]:[],n.call(this,r)}}(Howl.prototype.init),Howl.prototype.stereo=function(n,r){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(n,r)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof r>"u")if(typeof n=="number")i._stereo=n,i._pos=[n,0,0];else return i._stereo;for(var o=i._getSoundIds(r),l=0;l<o.length;l++){var u=i._soundById(o[l]);if(u)if(typeof n=="number")u._stereo=n,u._pos=[n,0,0],u._node&&(u._pannerAttr.panningModel="equalpower",(!u._panner||!u._panner.pan)&&e(u,s),s==="spatial"?typeof u._panner.positionX<"u"?(u._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),u._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),u._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):u._panner.setPosition(n,0,0):u._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),i._emit("stereo",u._id);else return u._stereo}return i},Howl.prototype.pos=function(n,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"pos",action:function(){o.pos(n,r,i,s)}}),o;if(r=typeof r!="number"?0:r,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof n=="number")o._pos=[n,r,i];else return o._pos;for(var l=o._getSoundIds(s),u=0;u<l.length;u++){var c=o._soundById(l[u]);if(c)if(typeof n=="number")c._pos=[n,r,i],c._node&&((!c._panner||c._panner.pan)&&e(c,"spatial"),typeof c._panner.positionX<"u"?(c._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.positionY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setPosition(n,r,i)),o._emit("pos",c._id);else return c._pos}return o},Howl.prototype.orientation=function(n,r,i,s){var o=this;if(!o._webAudio)return o;if(o._state!=="loaded")return o._queue.push({event:"orientation",action:function(){o.orientation(n,r,i,s)}}),o;if(r=typeof r!="number"?o._orientation[1]:r,i=typeof i!="number"?o._orientation[2]:i,typeof s>"u")if(typeof n=="number")o._orientation=[n,r,i];else return o._orientation;for(var l=o._getSoundIds(s),u=0;u<l.length;u++){var c=o._soundById(l[u]);if(c)if(typeof n=="number")c._orientation=[n,r,i],c._node&&(c._panner||(c._pos||(c._pos=o._pos||[0,0,-.5]),e(c,"spatial")),typeof c._panner.orientationX<"u"?(c._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),c._panner.orientationY.setValueAtTime(r,Howler.ctx.currentTime),c._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):c._panner.setOrientation(n,r,i)),o._emit("orientation",c._id);else return c._orientation}return o},Howl.prototype.pannerAttr=function(){var n=this,r=arguments,i,s,o;if(!n._webAudio)return n;if(r.length===0)return n._pannerAttr;if(r.length===1)if(typeof r[0]=="object")i=r[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),n._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:n._panningModel});else return o=n._soundById(parseInt(r[0],10)),o?o._pannerAttr:n._pannerAttr;else r.length===2&&(i=r[0],s=parseInt(r[1],10));for(var l=n._getSoundIds(s),u=0;u<l.length;u++)if(o=n._soundById(l[u]),o){var c=o._pannerAttr;c={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:c.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:c.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:c.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:c.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:c.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:c.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:c.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:c.panningModel};var f=o._panner;f?(f.coneInnerAngle=c.coneInnerAngle,f.coneOuterAngle=c.coneOuterAngle,f.coneOuterGain=c.coneOuterGain,f.distanceModel=c.distanceModel,f.maxDistance=c.maxDistance,f.refDistance=c.refDistance,f.rolloffFactor=c.rolloffFactor,f.panningModel=c.panningModel):(o._pos||(o._pos=n._pos||[0,0,-.5]),e(o,"spatial"))}return n},Sound.prototype.init=function(n){return function(){var r=this,i=r._parent;r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,n.call(this),r._stereo?i.stereo(r._stereo):r._pos&&i.pos(r._pos[0],r._pos[1],r._pos[2],r._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var r=this,i=r._parent;return r._orientation=i._orientation,r._stereo=i._stereo,r._pos=i._pos,r._pannerAttr=i._pannerAttr,r._stereo?i.stereo(r._stereo):r._pos?i.pos(r._pos[0],r._pos[1],r._pos[2],r._id):r._panner&&(r._panner.disconnect(0),r._panner=void 0,i._refreshBuffer(r)),n.call(this)}}(Sound.prototype.reset);var e=function(n,r){r=r||"spatial",r==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(ms);const WD="/Blob-Mob/assets/music-main.bb848f63.mp3",QD="/Blob-Mob/assets/8-lit.b45adae0.mp3",XD="/Blob-Mob/assets/Good-portion-of-distortion.7aed1497.mp3",YD="/Blob-Mob/assets/Game-Over.c002124e.mp3";var An=(t=>(t[t.Title=0]="Title",t[t.Main=1]="Main",t[t.Shop=2]="Shop",t[t.Gameover=3]="Gameover",t))(An||{});class JD{constructor(){E(this,"titleTheme");E(this,"mainTheme");E(this,"shopTheme");E(this,"gameoverTheme");E(this,"currTheme");this.titleTheme=new ms.Howl({src:[WD],loop:!0}),this.mainTheme=new ms.Howl({src:[QD],loop:!0}),this.shopTheme=new ms.Howl({src:[XD],loop:!0}),this.gameoverTheme=new ms.Howl({src:[YD],loop:!0})}play(e){if(!(this.currTheme&&this.currTheme==e)){switch(this.mainTheme.stop(),this.titleTheme.stop(),this.shopTheme.stop(),this.gameoverTheme.stop(),e){case 0:this.titleTheme.play();break;case 2:this.shopTheme.play();break;case 1:this.mainTheme.play();break;case 3:this.gameoverTheme.play();break}this.currTheme=e}}mute(e){this.mainTheme.mute(e),this.titleTheme.mute(e),this.shopTheme.mute(e),this.gameoverTheme.mute(e)}}const xn=new JD;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ZD(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(f){try{c(r.next(f))}catch(a){o(a)}}function u(f){try{c(r.throw(f))}catch(a){o(a)}}function c(f){f.done?s(f.value):i(f.value).then(l,u)}c((r=r.apply(t,e||[])).next())})}function eP(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(f){return u([c,f])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(f){c=[6,f],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var li=function(){return li=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},li.apply(this,arguments)},a1=function(t){return{loading:t==null,value:t}},tP=function(){return function(t,e){switch(e.type){case"error":return li(li({},t),{error:e.error,loading:!1,value:void 0});case"reset":return a1(e.defaultValue);case"value":return li(li({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},nP=function(t){var e=t?t():void 0,n=Y.exports.useReducer(tP(),a1(e)),r=n[0],i=n[1],s=Y.exports.useCallback(function(){var u=t?t():void 0;i({type:"reset",defaultValue:u})},[t]),o=Y.exports.useCallback(function(u){i({type:"error",error:u})},[]),l=Y.exports.useCallback(function(u){i({type:"value",value:u})},[]);return Y.exports.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:l,value:r.value}},[r.error,r.loading,s,o,l,r.value])},l1=function(t,e){var n=nP(function(){return t.currentUser}),r=n.error,i=n.loading,s=n.setError,o=n.setValue,l=n.value;return Y.exports.useEffect(function(){var u=zx(t,function(c){return ZD(void 0,void 0,void 0,function(){var f;return eP(this,function(a){switch(a.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,e.onUserChanged(c)];case 2:return a.sent(),[3,4];case 3:return f=a.sent(),s(f),[3,4];case 4:return o(c),[2]}})})},s);return function(){u()}},[t]),[l,i,r]};const u1=Y.exports.createContext(null),cr=()=>{const t=Y.exports.useContext(u1);if(!t)throw new Error("useNavigation has to be used within <ViewContext.Provider");return t};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ui=function(){return ui=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ui.apply(this,arguments)},c1=function(t){return{loading:t==null,value:t}},rP=function(){return function(t,e){switch(e.type){case"error":return ui(ui({},t),{error:e.error,loading:!1,value:void 0});case"reset":return c1(e.defaultValue);case"value":return ui(ui({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},iP=function(t){var e=t?t():void 0,n=Y.exports.useReducer(rP(),c1(e)),r=n[0],i=n[1],s=Y.exports.useCallback(function(){var u=t?t():void 0;i({type:"reset",defaultValue:u})},[t]),o=Y.exports.useCallback(function(u){i({type:"error",error:u})},[]),l=Y.exports.useCallback(function(u){i({type:"value",value:u})},[]);return Y.exports.useMemo(function(){return{error:r.error,loading:r.loading,reset:s,setError:o,setValue:l,value:r.value}},[r.error,r.loading,s,o,l,r.value])},sP=function(t,e,n){var r=Y.exports.useRef(t);return Y.exports.useEffect(function(){e(t,r.current)||(r.current=t,n&&n())}),r},oP=function(t,e){var n=!t&&!e,r=!!t&&!!e&&BA(t,e);return n||r},aP=function(t,e){return sP(t,oP,e)},lP=function(t,e){var n=iP(),r=n.error,i=n.loading,s=n.reset,o=n.setError,l=n.setValue,u=n.value,c=aP(t,s);return Y.exports.useEffect(function(){if(!c.current){l(void 0);return}var f=e!=null&&e.snapshotListenOptions?dg(c.current,e.snapshotListenOptions,l,o):dg(c.current,l,o);return function(){f()}},[c.current]),[u,i,r]},uP=function(t,e){var n=lP(t,e),r=n[0],i=n[1],s=n[2],o=cP(r,e==null?void 0:e.snapshotOptions,e==null?void 0:e.initialValue);return[o,i,s,r]},cP=function(t,e,n){return Y.exports.useMemo(function(){var r;return(r=t==null?void 0:t.docs.map(function(i){return i.data(e)}))!==null&&r!==void 0?r:n},[t,e])};const ct=({color:t,children:e,onClick:n,size:r,textstyle:i})=>M("div",{className:`relative ${r}`,children:[_("div",{className:`absolute mt-2 rounded-lg brightness-50 ${r} ${t}`}),_("button",{className:`absolute mt-0 flex items-center justify-center gap-1 p-2 font-bold text-text-alt active:mt-1 ${r} ${t} ${i}`,onClick:()=>n(),children:e})]}),hP=()=>M("div",{className:"flex h-[500px] w-[600px] items-stretch gap-5",children:[M("div",{className:"flex w-full flex-col gap-5",children:[_(dP,{}),_(fP,{})]}),_(pP,{})]}),dP=()=>{const[t]=l1(se),{setView:e}=cr(),n=()=>{const r=localStorage.getItem("firstTime");e(r==="false"?Je.Difficulty:Je.FirstTime)};return M("div",{className:"flex grow flex-col items-stretch justify-start gap-4 rounded-3xl bg-card p-10 shadow-2xl",children:[_("h2",{className:"text-shadow-main text-center text-2xl font-bold uppercase",children:"Blob Mob"}),M("div",{className:"flex flex-col gap-3",children:[_(ct,{color:"bg-main",size:"h-10 w-full",onClick:()=>n(),children:t?"Play":"Play as Guest"}),_("div",{className:"flex flex-row gap-1",children:t?_(ct,{color:"bg-signout",size:"h-10 w-full",onClick:()=>i1(),children:"Sign Out"}):M("div",{className:"flex w-full gap-1",children:[M(ct,{color:"bg-google",size:"h-8 w-full",textstyle:"text-xs",onClick:()=>OD(),children:["Google",_("i",{className:"fa-brands fa-google"})]}),M(ct,{color:"bg-facebook",size:"h-8 w-full",textstyle:"text-xs",onClick:()=>LD(),children:["Facebook",_("i",{className:"fa-brands fa-square-facebook"})]})]})})]}),M("div",{className:"text-center text-text-secondary",children:[_("b",{children:"WASD"})," to move, ",_("b",{children:"SPACE"})," to attack, or play..."]}),_(ct,{color:"bg-tutorial",size:"h-10 w-full",onClick:()=>e(Je.Tutorial),children:"Tutorial"})]})},fP=()=>{const{setView:t}=cr();return M("div",{className:"flex flex-col items-stretch justify-center gap-3 rounded-3xl bg-card px-10 py-7 shadow-2xl",children:[_("h2",{className:"text-center text-2xl font-bold",children:"Shop"}),_(ct,{color:"bg-upgrade",size:"h-10 w-full",onClick:()=>t(Je.Shop),children:"Upgrade"})]})},pP=()=>{const t=l_(Bi,"highscores"),e=ex(t,tx("score","desc"),nx(10)),[n,r,i]=uP(e);return i?M("div",{className:"col-start-2 row-start-1 row-end-3 flex w-full flex-col items-stretch justify-start gap-3 rounded-3xl bg-card p-10 shadow-2xl",children:[_("h2",{className:"text-center text-xl font-bold",children:"Top Scores"}),M("h2",{className:"text-error",children:["Can't get Highscores: ",""+i]})]}):M("div",{className:"col-start-2 row-start-1 row-end-3 flex w-4/6 flex-col items-stretch justify-start gap-3 rounded-3xl bg-card p-10 shadow-2xl",children:[_("h2",{className:"text-center text-xl font-bold",children:"Top Scores"}),_("ul",{children:r?[...Array(9).keys()].map(s=>M("li",{className:"flex h-11 grow animate-pulse items-center justify-between border-b-2 border-gray",children:[_("div",{className:"h-4 w-20 rounded bg-gray"}),_("div",{className:"h-4 w-10 rounded bg-gray"})]},s)):n==null?void 0:n.map((s,o)=>M("li",{className:"flex h-11 grow items-center justify-between border-b-2 border-gray text-sm",children:[_("p",{className:Rg(s.uid)?"bg-main font-bold":"",children:s.username}),_("p",{className:Rg(s.uid)?"bg-main font-bold":"",children:s.score})]},o))})]})},Rg=t=>{var e;return((e=se==null?void 0:se.currentUser)==null?void 0:e.uid)===t};var Eu=(t=>(t[t.Body=0]="Body",t[t.Face=1]="Face",t[t.Hat=2]="Hat",t))(Eu||{});const ep=({type:t,face:e,body:n,hat:r})=>{const i=Ye[n].draw,s=Ti[e].draw,o=Si[r].draw;let l=0,u="",c=!1,f=!1;t==0?(l=Ye[n].cost,u=Ye[n].name,c=he.checkPurchaseBody(n),f=I.body===n):t==1?(l=Ti[e].cost,u=Ti[e].name,c=he.checkPurchaseFace(e),f=I.face===e):t==2&&(l=Si[r].cost,u=Si[r].name,c=he.checkPurchaseHat(r),f=I.hat===r);let a="frame-normal",h="";l<0?(a="frame-locked",h="LOCKED"):c?f&&(a="frame-selected",h="SELECTED"):P.coins<l?(a="frame-cant-afford",h="$"+l):P.coins>=l&&(a="frame-afford",h="$"+l);const d=()=>{he.purchaseFace(e),he.purchaseBody(n),he.purchaseHat(r),c&&(I.face=e,I.body=n,I.hat=r),he.syncReactFitShop()};return M("div",{className:`playerFit ${a}`,onClick:()=>d(),children:[_("p",{className:"playerFit-name",children:l>=0?u:"LOCKED"}),_(o1,{draw:m=>{const y={x:m.canvas.width/2,y:m.canvas.height/2,w:m.canvas.width*.625,h:m.canvas.width*.625};if(t==2){o(m,{...y,y:m.canvas.height*(6/7),xdir:I.xdir,ydir:I.ydir});return}i(m,{...y,cool:I.cool,maxCool:I.maxCool,damaging:I.damaging}),s(m,{...y,xdir:I.xdir,ydir:I.ydir,frownCount:I.frownCount,frownCountMax:I.frownCountMax})}}),_("p",{className:"playerFit-label",children:h})]})};const da=({type:t,stats:e})=>{const n=Mt[t].priceScale[he.purchasedStatsIdx[t]],r=Mt[t].name,i=e[t];let s="up",o="default";switch(t){case"maxSpeed":o="speed";break;case"maxHealth":o="health";break;case"maxPower":o="power";break;case"maxCool":o="cool",s="down";break}const l=n<=P.coins?"afford":"cant-afford",u=()=>{he.purchaseStat(t)};return M("div",{className:"playerStat",children:[M("div",{className:"playerStat__stat",children:[_("p",{className:"playerStat__stat-name",children:r}),_("p",{className:"playerStat__stat-number",children:i})]}),M("div",{className:`playerStat__upgrade ${s} ${l} ${o}`,children:[_("i",{className:"fa-solid fa-arrow-up fa-2xl",onClick:u}),_("span",{className:"playerStat__upgrade-cost",children:_("p",{children:"$"+n})})]})]})},mP=()=>{const[t,e]=Y.exports.useState(0),{setView:n}=cr();return Y.exports.useEffect(()=>()=>{bD()},[]),M("div",{className:"flex h-full w-full items-center justify-start",children:[_("div",{className:"h-full w-1/2"}),_("div",{className:"flex h-full w-full items-center justify-center pb-20 pt-24",children:M("div",{className:"flex h-full w-[500px] flex-col items-stretch justify-start gap-3 rounded-3xl bg-card px-10 py-7 shadow-2xl",children:[M("div",{className:"flex items-center justify-center gap-5 rounded-2xl bg-gray",children:[M("div",{className:`flex h-10 w-full items-center justify-center gap-2 rounded-2xl ${t===0&&"bg-main"}`,onClick:()=>e(0),children:["Stats",_("i",{className:"fa-solid fa-arrow-up-9-1"})]}),M("div",{className:`flex h-10 w-full items-center justify-center gap-2 rounded-2xl ${t===1&&"bg-main"}`,onClick:()=>e(1),children:["Fit",_("i",{className:"fa-solid fa-glasses"})]})]}),_("div",{className:"flex h-[300rem] items-center justify-center",children:t==0?_(gP,{}):_(yP,{})}),M("div",{className:"flex w-full items-center justify-evenly py-6",children:[_("i",{className:`fa-solid fa-angle-left fa-2xl ${t==0?"text-gray":"text-main"}`,onClick:()=>e(t>0?t-1:t)}),_("i",{className:`fa-solid fa-angle-right fa-2xl ${t==1?"text-gray":"text-main"}`,onClick:()=>e(t<1?t+1:t)})]}),M("div",{className:"flex items-center justify-evenly",children:[_(ct,{color:"bg-upgrade",size:"w-44 h-10",onClick:()=>{const r=P.ctx;!r||q.spawn(r.canvas.width,r.canvas.height,I)},children:"Spawn Enemy"}),_(ct,{size:"w-44 h-10",color:"bg-main",onClick:()=>n(Je.Play),children:"Play"})]})]})})]})},gP=()=>{const[t,e]=Y.exports.useState(I.getAttributes());return he.setPlayerStats=e,M("div",{className:"grid h-full w-full grid-cols-2 grid-rows-2 items-center justify-center text-3xl",children:[_(da,{type:"maxSpeed",stats:t}),_(da,{type:"maxHealth",stats:t}),_(da,{type:"maxPower",stats:t}),_(da,{type:"maxCool",stats:t})]})},yP=()=>{const[t,e]=Y.exports.useState({body:I.body,face:I.face,hat:I.hat});return he.setPlayerFit=e,M("div",{className:"flex h-full w-full flex-col gap-5 text-[0.6em]",children:[_(vP,{fit:t}),_(wP,{fit:t}),_(_P,{fit:t})]})},vP=t=>{const{body:e,face:n}=t.fit,r=[];let i;for(i in Si)r.push(_(ep,{type:Eu.Hat,body:e,face:n,hat:i},i));return M("div",{children:[_("h2",{children:"Hats"}),_("div",{className:"h-3"}),_("div",{className:"flex gap-3",children:r})]})},wP=({fit:t})=>{const{face:e,hat:n}=t,r=[];let i;for(i in Ye)r.push(_(ep,{type:Eu.Body,body:i,face:e,hat:n},i));return M("div",{children:[_("h2",{children:"Bodies"}),_("div",{className:"h-3"}),_("div",{className:"flex gap-3",children:r})]})},_P=t=>{const{body:e,hat:n}=t.fit,r=[];let i;for(i in Ti)r.push(_(ep,{type:Eu.Face,body:e,face:i,hat:n},i));return M("div",{children:[_("h2",{children:"Faces"}),_("div",{className:"h-3"}),_("div",{className:"flex gap-3",children:r})]})},TP=({blobsKilled:t})=>{const{setView:e}=cr();return M("div",{className:"flex flex-col items-center justify-center gap-3 rounded-3xl bg-card p-10 shadow-2xl",children:[_("h2",{className:"text-shadow-gameover text-center text-6xl font-bold uppercase",children:"Gameover"}),M("ul",{className:"w-full",children:[M("li",{className:"flex w-full items-center justify-between border-b-2 border-gray py-4",children:[_("p",{children:"Blobs Killed"}),_("p",{children:t})]}),M("li",{className:"flex w-full items-center justify-between border-b-2 border-gray py-4",children:[_("p",{children:"Highscore"}),_("p",{children:P.highscore})]})]}),M("div",{className:"flex w-full items-center justify-between",children:[_(ct,{color:"bg-main",size:"w-44 h-10",onClick:()=>e(Je.Play),children:"Play Again"}),_(ct,{color:"bg-upgrade",size:"w-44 h-10",onClick:()=>e(Je.Shop),children:"Upgrade"})]})]})},SP="/Blob-Mob/assets/favicon.71c13204.svg",EP=()=>M("div",{className:"flex h-3/5 w-[36rem] flex-col items-center justify-evenly rounded-3xl bg-card px-20 py-5 ",children:[_("h2",{className:"text-3xl font-bold",children:"ABOUT"}),M("p",{className:"leading-8",children:[_("span",{className:"font-bold",children:"Howdy There!"})," This game was one of my first coding projects, and I originally made it using a single file of javascript and some boilerplate HTML."]}),_("p",{className:"leading-8",children:"The game has evolved a lot since then, using typescript for the core game and React for the UI components."}),_("p",{className:"leading-8",children:"You can look at the code below, or visit my website to see other my other projects."}),_("p",{className:"w-full text-right",children:"-- Zack Traczyk"}),M("div",{className:"flex h-10 w-full items-center justify-around",children:[M("a",{href:"https://github.com/xxzbuckxx/Blob-Mob",target:"_blank",className:"flex items-center gap-2 rounded-xl border-4 border-text-main py-2 px-3",rel:"noreferrer",children:["View Code ",_("i",{className:"fa-brands fa-github fa-2xl"})]}),M("a",{href:"http://zacktraczyk.com",target:"_blank",className:"flex items-center gap-2 rounded-xl border-4 border-orange py-2 px-3 text-orange",rel:"noreferrer",children:["My Website ",_("img",{src:SP,alt:"Zack Traczyk logo",className:"h-7"})]})]})]});var Ds=(t=>(t[t.Easy=0]="Easy",t[t.Medium=1]="Medium",t[t.Hard=2]="Hard",t))(Ds||{});class kP{constructor(){E(this,"difficulty");this.difficulty=1}debug(e){e.font="20px Arial Bold",e.fillStyle="black";const n=40;let r=e.canvas.height*5/8+100;e.fillText("difficulty debug --x",n,r),r+=20,e.fillText(`Timer: ${Math.round(P.frame/60*10)/10}`,n,r),r+=20,e.fillText(`Enemy Speed: ${q.speed}`,n,r),r+=20,e.fillText(`Enemy Spawn Rate: ${q.spawnWait}`,n,r),r+=20,e.fillText(`Max Enemies: ${q.maxInst}`,n,r)}controller(){q.maxInst=60;const e=P.frame/60;let n=3;switch(this.difficulty){case 0:q.speed=1,n=2e3/(e+200)-.3,q.value=1;break;case 1:q.speed=3,n=500/(e+96)-.8,q.value=1;break;case 2:q.speed=8,n=180/(e+70)-.4,q.value=2;break}q.spawnWait=q.instances.length<15?Cn(Math.round(n*100)/100,0,8):5}}const tp=new kP,IP="/Blob-Mob/assets/difficulty-easy.655ecc3b.jpg",CP="/Blob-Mob/assets/difficulty-medium.38a97eb5.jpg",AP="/Blob-Mob/assets/difficulty-hard.5029a881.jpg",xP=[{difficulty:Ds.Easy,title:"Easier",preview:IP,descriptors:[M(ai,{children:[_("b",{children:"2x"})," Slower Enemies"]})]},{difficulty:Ds.Medium,preview:CP,title:"Normal"},{difficulty:Ds.Hard,title:"Harder",preview:AP,descriptors:[M(ai,{children:[_("b",{children:"2x"})," Coins"]}),M(ai,{children:[_("b",{children:"2x"})," Score"]}),M(ai,{children:[_("b",{children:"2x"})," Faster Enemies"]})]}],NP=()=>{const[t,e]=Y.exports.useState(Ds.Medium),{setView:n}=cr();return M("div",{className:"flex w-[600px] flex-col items-center justify-center gap-3 rounded-3xl bg-card p-10 shadow-2xl",children:[_("h2",{className:"text-center text-xl font-bold",children:"Difficulty"}),_("div",{className:"my-4 flex w-full grow items-stretch justify-center gap-5",children:xP.map((r,i)=>_(DP,{active:t===r.difficulty,setSelected:e,...r},i))}),_(ct,{color:"bg-main",size:"w-60 h-10",onClick:()=>{tp.difficulty=t,n(Je.Play)},children:"Play"})]})},DP=({active:t,setSelected:e,difficulty:n,preview:r,title:i,descriptors:s})=>M("div",{className:`grid border-4 text-center transition-all ${t&&"border-facebook shadow-[-0_0_1em_0.3em_#12bcf1]"}`,onClick:()=>e(n),children:[_("img",{className:"bg-text 68xt-main col-start-1 row-start-1 h-[304px] w-[684px]",src:r}),M("div",{className:"col-start-1 row-start-1 flex h-full flex-col items-center justify-between py-4",children:[_("h3",{className:"text-xl font-bold text-main",children:i}),_("ul",{children:s==null?void 0:s.map((o,l)=>_("li",{className:"text-sm text-text-alt",children:o},l))})]})]}),PP=()=>{const{setView:t}=cr();return M("div",{className:"flex flex-col items-center justify-center gap-3 rounded-3xl bg-card p-10 shadow-2xl",children:[_("h2",{className:"text-center text-xl font-bold ",children:"Need a Tutorial?"}),_("div",{className:"h-2"}),M("div",{className:"flex items-center gap-5",children:[_(ct,{color:"bg-main",size:"w-40 h-10",onClick:()=>t(Je.Play),children:"Nah, Play"}),_(ct,{color:"bg-tutorial",size:"w-44 h-10",onClick:()=>t(Je.Tutorial),children:"Tutorial"})]})]})};var Je=(t=>(t[t.Home=0]="Home",t[t.Info=1]="Info",t[t.Shop=2]="Shop",t[t.FirstTime=3]="FirstTime",t[t.Tutorial=4]="Tutorial",t[t.Difficulty=5]="Difficulty",t[t.Play=6]="Play",t[t.Gameover=7]="Gameover",t))(Je||{});const RP=()=>{const{view:t,setView:e}=cr();switch(t){case 0:return P.scene=ie.menu,xn.play(An.Title),_(hP,{});case 1:return P.scene=ie.menu,xn.play(An.Title),_(EP,{});case 3:return P.scene=ie.menu,xn.play(An.Title),_(PP,{});case 4:P.scene=ie.tutorial,xn.play(An.Title);break;case 5:return P.scene=ie.menu,xn.play(An.Title),_(NP,{});case 6:return localStorage.setItem("firstTime","false"),xn.play(An.Main),P.scene=ie.play,_(ai,{});case 2:return P.scene=ie.shop,xn.play(An.Shop),_(mP,{});case 7:return _(TP,{blobsKilled:P.score})}return M("div",{className:"flex w-[500px] flex-col items-center justify-start gap-3 rounded-3xl bg-card p-10 shadow-2xl",children:[_("h1",{className:"text-center text-3xl",children:"Oops! Routing Error \u2639\uFE0F"}),M("h2",{className:"text-center text-xl italic text-gameover",children:["&qout;Invalid Page Route Enum ",t,"&qout;"]}),_("div",{className:"h-5"}),_(ct,{size:"w-60 h-10",color:"bg-main",onClick:()=>e(0),children:"Back To Home"})]})},bP=()=>{const[t]=l1(se),[e,n]=Y.exports.useState(!1),{setView:r}=cr(),i=()=>{xn.mute(!e),n(!e)};return M("div",{className:"absolute bottom-6 right-6 flex items-center justify-end gap-6",children:[_("div",{className:"w-10",onClick:()=>r(Je.Home),children:_("i",{className:"fa-solid fa-house fa-2xl"})}),_("div",{className:"w-10",onClick:()=>i(),children:e?_("i",{className:"fa-solid fa-volume-mute fa-2xl"}):_("i",{className:"fa-solid fa-volume-high fa-2xl"})}),_("div",{className:"w-10",onClick:()=>r(Je.Info),children:_("i",{className:"fa-solid fa-circle-info fa-2xl"})}),t&&_("div",{className:"w-10",onClick:()=>i1(),children:_("i",{className:"fa-solid fa-right-to-bracket fa-2xl"})})]})},bg=()=>{const{innerWidth:t,innerHeight:e}=window;return{width:t,height:e}},MP=()=>{const[t,e]=Y.exports.useState(bg());return Y.exports.useEffect(()=>{function n(){e(bg())}return window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),t};class OP{constructor(){E(this,"ctx");E(this,"frame");E(this,"paused");E(this,"pauseKeyRelease");E(this,"scoreVal");E(this,"setScore");E(this,"highscoreVal");E(this,"setHighscore");E(this,"difficulty");E(this,"coinVal");E(this,"setCoins");E(this,"fxSound");E(this,"musSound");E(this,"scene");this.ctx=null,this.difficulty=5,this.scoreVal=0,this.highscoreVal=0,this.coinVal=0,this.frame=0,this.paused=!1,this.pauseKeyRelease=!0,this.fxSound=1,this.musSound=.5,this.scene=ie.menu}set score(e){this.scoreVal=e,this.syncReactScore()}get score(){return this.scoreVal}set coins(e){this.coinVal=e,this.syncReactCoins()}get coins(){return this.coinVal}set highscore(e){this.highscoreVal=e,this.syncReactHighscore()}get highscore(){return this.highscoreVal}syncReactCoins(){if(!this.setCoins){console.error("Game: syncReactCoins: setCoins hook not passed to game Object");return}this.setCoins(this.coins)}syncReactScore(){if(!this.setScore){console.error("Game: syncReactScore: setScore hook not passed to game Object");return}this.setScore(this.score)}syncReactHighscore(){if(!this.setHighscore){console.error("Game: syncReactScore: setHighscore hook not passed to game Object");return}this.setHighscore(this.highscoreVal)}gameOver(){this.scene=ie.gameOver}pause(){this.scene==ie.battle&&(Bt.keyState.pause?(this.pauseKeyRelease&&(this.paused=!this.paused),this.pauseKeyRelease=!1):this.pauseKeyRelease=!0)}reset(){I.reset(),q.reset(),tr.reset(),rr.reset(),Qn.reset(),this.paused=!1,this.score=0,this.frame=0,this.ctx&&(I.x=this.ctx.canvas.width/2,I.y=this.ctx.canvas.height/2)}}const LP=()=>{const t=P.ctx;t!=null&&t.clearRect(0,0,t.canvas.width,t.canvas.height)};let vc=200;const $P=()=>{UP(),FP(),I.state==Z.Dead&&(vc<0?(vc=200,P.reset()):vc--)};let wc=!0;const FP=()=>{const t=P.ctx;!t||(I.controller(t.canvas.width/3,t.canvas.height),q.controller(),tr.controller(),Bt.keyState.enemySpawn?(wc&&q.spawn(t.canvas.width,t.canvas.height,I),wc=!1):wc=!0)},UP=()=>{const t=P.ctx;t!=null&&(t.clearRect(0,0,t.canvas.width,t.canvas.height),I.draw(t),q.draw(t),tr.draw(t),Zf())},VP=t=>{BP(),jP(),nr.stage==Uo.end&&(P.reset(),nr.reset(),t(Je.Difficulty))},BP=()=>{const t=P.ctx;!t||(P.paused||(I.controller(t.canvas.width,t.canvas.height),tr.controller(),q.controller()),nr.stage>=Uo.draw_gesture&&Qn.controller(),rr.controller(P,t.canvas.width,t.canvas.height),nr.controller(t.canvas.width,t.canvas.height),I.health<=I.maxHealth*.1&&(I.health=I.maxHealth))},jP=()=>{const t=P.ctx;!t||(t.clearRect(0,0,t.canvas.width,t.canvas.height),rr.draw(t),I.draw(t),q.draw(t),Qn.draw(t),nr.draw(t),nr.stage>Uo.enemy&&Zf())};let _c=0;const zP=100,HP=()=>{P.paused||GP(),P.pause(),qP(),I.state==Z.Dead&&(_c++,_c>zP&&(P.gameOver(),_c=0))},GP=()=>{const t=P.ctx;t!=null&&(I.state!=Z.Dead&&q.spawner(t.canvas.width,t.canvas.height,I),tp.controller(),rr.controller(P,t.canvas.width,t.canvas.height),I.controller(t.canvas.width,t.canvas.height),tr.controller(),q.controller(),Qn.controller())},qP=()=>{const t=P.ctx;t!=null&&(t.clearRect(0,0,t.canvas.width,t.canvas.height),rr.draw(t),I.draw(t),tr.draw(t),q.draw(t),Qn.draw(t),Zf(),P.paused&&cD(t))},KP=()=>{WP(),QP()},WP=()=>{q.controller()},QP=()=>{const t=P.ctx;t!=null&&(t.clearRect(0,0,t.canvas.width,t.canvas.height),I.draw(t),q.draw(t))},XP=(t,e,n)=>{if(!!t.ctx)switch(t.paused||++t.frame,t.scene){case ie.menu:LP();break;case ie.shop:t.reset(),t.scene=ie.shopMain;case ie.shopMain:$P();break;case ie.tutorial:t.reset(),nr.reset(),t.scene=ie.tutorialMain;case ie.tutorialMain:VP(n);break;case ie.play:t.reset(),t.scene=ie.battle,tp.controller();case ie.battle:HP();break;case ie.gameOver:r1(t.score),n(Je.Gameover),t.scene=ie.gameOverMain;case ie.gameOverMain:KP();break}},P=new OP,YP=()=>{const[t,e]=Y.exports.useState(Je.Home),{width:n,height:r}=MP(),i=()=>{n1(),MD()};return Y.exports.useEffect(()=>se.onAuthStateChanged(i),[]),n<700||r<700?_(JP,{}):M(ai,{children:[_(o1,{draw:s=>{P.ctx=s,XP(P,t,e)}}),M(u1.Provider,{value:{view:t,setView:e},children:[_(qD,{}),_("div",{className:"flex h-screen w-screen items-center justify-center",children:_(RP,{})}),_(KD,{}),_(bP,{})]})]})},JP=()=>M("div",{className:"flex h-screen w-screen flex-col items-center justify-center",children:[_("div",{className:"fixed -z-10 h-screen w-screen bg-main opacity-50"}),_("h1",{className:"text-center text-2xl font-bold text-text-alt",children:"Screen Size Not Supported"}),_("div",{className:"h-5"}),_("h1",{className:"text-center text-xl italic",children:"Please Resize the Screen\uFE0F"})]});const h1=document.getElementById("root");if(!h1)throw"React root id missing in index.html";Tc.createRoot(h1).render(_(YP,{}));
